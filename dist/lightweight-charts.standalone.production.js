/*!
 * @license
 * TradingView Lightweight Charts v3.6.1-dev+202204050724
 * Copyright (c) 2020 TradingView, Inc.
 * Licensed under Apache License 2.0 https://www.apache.org/licenses/LICENSE-2.0
 */
!function(){"use strict";var t,i;function n(t,i){var n,h=((n={})[0]=[],n[1]=[t.lineWidth,t.lineWidth],n[2]=[2*t.lineWidth,2*t.lineWidth],n[3]=[6*t.lineWidth,6*t.lineWidth],n[4]=[t.lineWidth,4*t.lineWidth],n)[i];t.setLineDash(h)}function h(t,i,n,h){t.beginPath();var s=t.lineWidth%2?.5:0;t.moveTo(n,i+s),t.lineTo(h,i+s),t.stroke()}!function(t){t[t.Simple=0]="Simple",t[t.WithSteps=1]="WithSteps"}(t||(t={})),function(t){t[t.Solid=0]="Solid",t[t.Dotted=1]="Dotted",t[t.Dashed=2]="Dashed",t[t.LargeDashed=3]="LargeDashed",t[t.SparseDotted=4]="SparseDotted"}(i||(i={}));var s=function(t,i){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])},s(t,i)};function r(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=t}s(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}var e=function(){return e=Object.assign||function(t){for(var i,n=1,h=arguments.length;n<h;n++)for(var s in i=arguments[n])Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s]);return t},e.apply(this,arguments)};function u(t,i,n){if(n||2===arguments.length)for(var h,s=0,r=i.length;s<r;s++)!h&&s in i||(h||(h=Array.prototype.slice.call(i,0,s)),h[s]=i[s]);return t.concat(h||Array.prototype.slice.call(i))}function a(t,i){if(!t)throw new Error("Assertion failed"+(i?": "+i:""))}function o(t){if(void 0===t)throw new Error("Value is undefined");return t}function l(t){if(null===t)throw new Error("Value is null");return t}function f(t){return l(o(t))}function c(t){for(var i=[],n=1;n<arguments.length;n++)i[n-1]=arguments[n];for(var h=0,s=i;h<s.length;h++){var r=s[h];for(var e in r)void 0!==r[e]&&("object"!=typeof r[e]||void 0===t[e]?t[e]=r[e]:c(t[e],r[e]))}return t}function v(t){return"number"==typeof t&&isFinite(t)}function _(t){return"number"==typeof t&&t%1==0}function d(t){return"string"==typeof t}function w(t){return"boolean"==typeof t}function M(t){var i,n,h,s=t;if(!s||"object"!=typeof s)return s;for(n in i=Array.isArray(s)?[]:{},s)s.hasOwnProperty(n)&&(h=s[n],i[n]=h&&"object"==typeof h?M(h):h);return i}function b(t){return null!==t}function m(t){return null===t?void 0:t}var p=function(){function t(){this.t=[]}return t.prototype.i=function(t){this.t=t},t.prototype.h=function(t,i,n,h){this.t.forEach((function(s){t.save(),s.h(t,i,n,h),t.restore()}))},t}(),g=function(){function t(){}return t.prototype.h=function(t,i,n,h){t.save(),t.scale(i,i),this.u(t,n,h),t.restore()},t.prototype.o=function(t,i,n,h){t.save(),t.scale(i,i),this.l(t,n,h),t.restore()},t.prototype.l=function(t,i,n){},t}(),y=function(t){function i(){var i=null!==t&&t.apply(this,arguments)||this;return i.v=null,i}return r(i,t),i.prototype._=function(t){this.v=t},i.prototype.u=function(t){if(null!==this.v&&null!==this.v.M){var i=this.v.M,n=this.v,h=function(h){t.beginPath();for(var s=i.to-1;s>=i.from;--s){var r=n.m[s];t.moveTo(r.p,r.g),t.arc(r.p,r.g,h,0,2*Math.PI)}t.fill()};t.fillStyle=n.k,h(n.N+2),t.fillStyle=n.S,h(n.N)}},i}(g);function k(){return{m:[{p:0,g:0,C:0,D:0}],S:"",k:"",N:0,M:null}}var x={from:0,to:1},N=function(){function t(t,i){this.T=new p,this.A=[],this.L=[],this.B=!0,this.O=t,this.F=i,this.T.i(this.A)}return t.prototype.V=function(t){var i=this.O.P();i.length!==this.A.length&&(this.L=i.map(k),this.A=this.L.map((function(t){var i=new y;return i._(t),i})),this.T.i(this.A)),this.B=!0},t.prototype.R=function(t,i,n){return this.B&&(this.I(t),this.B=!1),this.T},t.prototype.I=function(t){var i=this,n=this.O.P(),h=this.F.W(),s=this.O.j();n.forEach((function(n,r){var e,u=i.L[r],a=n.U(h);if(null!==a&&n.q()){var o=l(n.H());u.S=a.Y,u.N=a.N,u.m[0].D=a.D,u.m[0].g=n.$().K(a.D,o.X),u.k=null!==(e=a.Z)&&void 0!==e?e:i.O.J(u.m[0].g/t),u.m[0].C=h,u.m[0].p=s.G(h),u.M=x}else u.M=null}))},t}(),S=function(){function t(t){this.tt=t}return t.prototype.h=function(t,i,s,r){if(null!==this.tt){var e=this.tt.it.q,u=this.tt.nt.q;if(e||u){t.save();var a=Math.round(this.tt.p*i),o=Math.round(this.tt.g*i),l=Math.ceil(this.tt.ht*i),f=Math.ceil(this.tt.st*i);t.lineCap="butt",e&&a>=0&&(t.lineWidth=Math.floor(this.tt.it.rt*i),t.strokeStyle=this.tt.it.et,t.fillStyle=this.tt.it.et,n(t,this.tt.it.ut),function(t,i,n,h){t.beginPath();var s=t.lineWidth%2?.5:0;t.moveTo(i+s,n),t.lineTo(i+s,h),t.stroke()}(t,a,0,f)),u&&o>=0&&(t.lineWidth=Math.floor(this.tt.nt.rt*i),t.strokeStyle=this.tt.nt.et,t.fillStyle=this.tt.nt.et,n(t,this.tt.nt.ut),h(t,o,0,l)),t.restore()}}},t}(),C=function(){function t(t){this.B=!0,this.ot={it:{rt:1,ut:0,et:"",q:!1},nt:{rt:1,ut:0,et:"",q:!1},ht:0,st:0,p:0,g:0},this.lt=new S(this.ot),this.ft=t}return t.prototype.V=function(){this.B=!0},t.prototype.R=function(t,i){return this.B&&(this.I(),this.B=!1),this.lt},t.prototype.I=function(){var t=this.ft.q(),i=l(this.ft.ct()),n=i._t().vt().crosshair,h=this.ot;h.nt.q=t&&this.ft.dt(i),h.it.q=t&&this.ft.wt(),h.nt.rt=n.horzLine.width,h.nt.ut=n.horzLine.style,h.nt.et=n.horzLine.color,h.it.rt=n.vertLine.width,h.it.ut=n.vertLine.style,h.it.et=n.vertLine.color,h.ht=i.Mt(),h.st=i.bt(),h.p=this.ft.gt(),h.g=this.ft.yt()},t}(),D={khaki:"#f0e68c",azure:"#f0ffff",aliceblue:"#f0f8ff",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",gray:"#808080",green:"#008000",honeydew:"#f0fff0",floralwhite:"#fffaf0",lightblue:"#add8e6",lightcoral:"#f08080",lemonchiffon:"#fffacd",hotpink:"#ff69b4",lightyellow:"#ffffe0",greenyellow:"#adff2f",lightgoldenrodyellow:"#fafad2",limegreen:"#32cd32",linen:"#faf0e6",lightcyan:"#e0ffff",magenta:"#f0f",maroon:"#800000",olive:"#808000",orange:"#ffa500",oldlace:"#fdf5e6",mediumblue:"#0000cd",transparent:"#0000",lime:"#0f0",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",midnightblue:"#191970",orchid:"#da70d6",mediumorchid:"#ba55d3",mediumturquoise:"#48d1cc",orangered:"#ff4500",royalblue:"#4169e1",powderblue:"#b0e0e6",red:"#f00",coral:"#ff7f50",turquoise:"#40e0d0",white:"#fff",whitesmoke:"#f5f5f5",wheat:"#f5deb3",teal:"#008080",steelblue:"#4682b4",bisque:"#ffe4c4",aquamarine:"#7fffd4",aqua:"#0ff",sienna:"#a0522d",silver:"#c0c0c0",springgreen:"#00ff7f",antiquewhite:"#faebd7",burlywood:"#deb887",brown:"#a52a2a",beige:"#f5f5dc",chocolate:"#d2691e",chartreuse:"#7fff00",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cadetblue:"#5f9ea0",tomato:"#ff6347",fuchsia:"#f0f",blue:"#00f",salmon:"#fa8072",blanchedalmond:"#ffebcd",slateblue:"#6a5acd",slategray:"#708090",thistle:"#d8bfd8",tan:"#d2b48c",cyan:"#0ff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",blueviolet:"#8a2be2",black:"#000",darkmagenta:"#8b008b",darkslateblue:"#483d8b",darkkhaki:"#bdb76b",darkorchid:"#9932cc",darkorange:"#ff8c00",darkgreen:"#006400",darkred:"#8b0000",dodgerblue:"#1e90ff",darkslategray:"#2f4f4f",dimgray:"#696969",deepskyblue:"#00bfff",firebrick:"#b22222",forestgreen:"#228b22",indigo:"#4b0082",ivory:"#fffff0",lavenderblush:"#fff0f5",feldspar:"#d19275",indianred:"#cd5c5c",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightskyblue:"#87cefa",lightslategray:"#789",lightslateblue:"#8470ff",snow:"#fffafa",lightseagreen:"#20b2aa",lightsalmon:"#ffa07a",darksalmon:"#e9967a",darkviolet:"#9400d3",mediumpurple:"#9370d8",mediumaquamarine:"#66cdaa",skyblue:"#87ceeb",lavender:"#e6e6fa",lightsteelblue:"#b0c4de",mediumvioletred:"#c71585",mintcream:"#f5fffa",navajowhite:"#ffdead",navy:"#000080",olivedrab:"#6b8e23",palevioletred:"#d87093",violetred:"#d02090",yellow:"#ff0",yellowgreen:"#9acd32",lawngreen:"#7cfc00",pink:"#ffc0cb",paleturquoise:"#afeeee",palegoldenrod:"#eee8aa",darkolivegreen:"#556b2f",darkseagreen:"#8fbc8f",darkturquoise:"#00ced1",peachpuff:"#ffdab9",deeppink:"#ff1493",violet:"#ee82ee",palegreen:"#98fb98",mediumseagreen:"#3cb371",peru:"#cd853f",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",purple:"#800080",seagreen:"#2e8b57",seashell:"#fff5ee",papayawhip:"#ffefd5",mediumslateblue:"#7b68ee",plum:"#dda0dd",mediumspringgreen:"#00fa9a"};function T(t){return t<0?0:t>255?255:Math.round(t)||0}function A(t){return t<=0||t>0?t<0?0:t>1?1:Math.round(1e4*t)/1e4:0}var L=/^#([0-9a-f])([0-9a-f])([0-9a-f])([0-9a-f])?$/i,E=/^#([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})?$/i,B=/^rgb\(\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*\)$/,O=/^rgba\(\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*,\s*(-?[\d]{0,10}(?:\.\d+)?)\s*\)$/;function F(t){var i;if((t=t.toLowerCase())in D&&(t=D[t]),i=O.exec(t)||B.exec(t))return[T(parseInt(i[1],10)),T(parseInt(i[2],10)),T(parseInt(i[3],10)),A(i.length<5?1:parseFloat(i[4]))];if(i=E.exec(t))return[T(parseInt(i[1],16)),T(parseInt(i[2],16)),T(parseInt(i[3],16)),1];if(i=L.exec(t))return[T(17*parseInt(i[1],16)),T(17*parseInt(i[2],16)),T(17*parseInt(i[3],16)),1];throw new Error("Cannot parse color: ".concat(t))}function V(t){var i,n=F(t);return{kt:"rgb(".concat(n[0],", ").concat(n[1],", ").concat(n[2],")"),xt:(i=n,.199*i[0]+.687*i[1]+.114*i[2]>160?"black":"white")}}function P(t,i,n,h,s,r){t.fillRect(i+r,n,h-2*r,r),t.fillRect(i+r,n+s-r,h-2*r,r),t.fillRect(i,n,r,s),t.fillRect(i+h-r,n,r,s)}function z(t,i,n){t.save(),t.scale(i,i),n(),t.restore()}function R(t,i,n,h,s,r){t.save(),t.globalCompositeOperation="copy",t.fillStyle=r,t.fillRect(i,n,h,s),t.restore()}function I(t,i,n,h,s,r,e){t.save(),t.globalCompositeOperation="copy";var u=t.createLinearGradient(0,0,0,s);u.addColorStop(0,r),u.addColorStop(1,e),t.fillStyle=u,t.fillRect(i,n,h,s),t.restore()}var W,j=function(){function t(t,i){this._(t,i)}return t.prototype._=function(t,i){this.tt=t,this.Nt=i},t.prototype.h=function(t,i,n,h,s,r){if(this.tt.q){t.font=i.St;var e=this.tt.Ct||!this.tt.Dt?i.Tt:0,u=i.At,a=i.Lt,o=i.Et,l=i.Bt,f=i.Ot,c=this.tt.Ft,v=Math.ceil(n.Vt(t,c)),_=i.Pt,d=i.zt+a+o,w=Math.ceil(.5*d),M=u+v+l+f+e,b=this.Nt.Rt;this.Nt.It&&(b=this.Nt.It);var m,p,g=(b=Math.round(b))-w,y=g+d,k="right"===s,x=k?h:0,N=Math.ceil(h*r),S=x;if(t.fillStyle=this.Nt.kt,t.lineWidth=1,t.lineCap="butt",c){k?(m=x-e,p=(S=x-M)+f):(S=x+M,m=x+e,p=x+u+e+l);var C=Math.max(1,Math.floor(r)),D=Math.max(1,Math.floor(u*r)),T=k?N:0,A=Math.round(g*r),L=Math.round(S*r),E=Math.round(b*r)-Math.floor(.5*r),B=E+C+(E-A),O=Math.round(m*r);t.save(),t.beginPath(),t.moveTo(T,A),t.lineTo(L,A),t.lineTo(L,B),t.lineTo(T,B),t.fill(),t.fillStyle=this.tt.Z,t.fillRect(k?N-D:0,A,D,B-A),this.tt.Ct&&(t.fillStyle=this.Nt.et,t.fillRect(T,E,O-T,C)),t.textAlign="left",t.fillStyle=this.Nt.et,z(t,r,(function(){t.fillText(c,p,y-o-_)})),t.restore()}}},t.prototype.bt=function(t,i){return this.tt.q?t.zt+t.Lt+t.Et:0},t}(),U=function(){function t(t){this.Wt={Rt:0,et:"#FFF",kt:"#000"},this.jt={Ft:"",q:!1,Ct:!0,Dt:!1,Z:""},this.Ut={Ft:"",q:!1,Ct:!1,Dt:!0,Z:""},this.B=!0,this.qt=new(t||j)(this.jt,this.Wt),this.Ht=new(t||j)(this.Ut,this.Wt)}return t.prototype.Ft=function(){return this.jt.Ft},t.prototype.Rt=function(){return this.Yt(),this.Wt.Rt},t.prototype.V=function(){this.B=!0},t.prototype.bt=function(t,i){return void 0===i&&(i=!1),Math.max(this.qt.bt(t,i),this.Ht.bt(t,i))},t.prototype.Kt=function(){return this.Wt.It||0},t.prototype.$t=function(t){this.Wt.It=t},t.prototype.Xt=function(){return this.Yt(),this.jt.q||this.Ut.q},t.prototype.Zt=function(){return this.Yt(),this.jt.q},t.prototype.R=function(t){return this.Yt(),this.jt.Ct=this.jt.Ct&&t.vt().drawTicks,this.Ut.Ct=this.Ut.Ct&&t.vt().drawTicks,this.qt._(this.jt,this.Wt),this.Ht._(this.Ut,this.Wt),this.qt},t.prototype.Jt=function(){return this.Yt(),this.qt._(this.jt,this.Wt),this.Ht._(this.Ut,this.Wt),this.Ht},t.prototype.Yt=function(){this.B&&(this.jt.Ct=!0,this.Ut.Ct=!1,this.Gt(this.jt,this.Ut,this.Wt))},t}(),q=function(t){function i(i,n,h){var s=t.call(this)||this;return s.ft=i,s.Qt=n,s.ti=h,s}return r(i,t),i.prototype.Gt=function(t,i,n){t.q=!1;var h=this.ft.vt().horzLine;if(h.labelVisible){var s=this.Qt.H();if(this.ft.q()&&!this.Qt.ii()&&null!==s){var r=V(h.labelBackgroundColor);n.kt=r.kt,n.et=r.xt;var e=this.ti(this.Qt);n.Rt=e.Rt,t.Ft=this.Qt.ni(e.D,s),t.q=!0}}},i}(U),H=/[1-9]/g,Y=function(){function t(){this.tt=null}return t.prototype._=function(t){this.tt=t},t.prototype.h=function(t,i,n){var h=this;if(null!==this.tt&&!1!==this.tt.q&&0!==this.tt.Ft.length){t.font=i.St;var s=Math.round(i.hi.Vt(t,this.tt.Ft,H));if(!(s<=0)){t.save();var r=i.si,e=s+2*r,u=e/2,a=this.tt.Mt,o=this.tt.Rt,f=Math.floor(o-u)+.5;f<0?(o+=Math.abs(0-f),f=Math.floor(o-u)+.5):f+e>a&&(o-=Math.abs(a-(f+e)),f=Math.floor(o-u)+.5);var c=f+e,v=0+i.At+i.Lt+i.zt+i.Et;t.fillStyle=this.tt.kt;var _=Math.round(f*n),d=Math.round(0*n),w=Math.round(c*n),M=Math.round(v*n);t.fillRect(_,d,w-_,M-d);var b=Math.round(this.tt.Rt*n),m=d,p=Math.round((m+i.At+i.Tt)*n);t.fillStyle=this.tt.et;var g=Math.max(1,Math.floor(n)),y=Math.floor(.5*n);t.fillRect(b-y,m,g,p-m);var k=v-i.Pt-i.Et;t.textAlign="left",t.fillStyle=this.tt.et,z(t,n,(function(){t.fillText(l(h.tt).Ft,f+r,k)})),t.restore()}}},t}(),K=function(){function t(t,i,n){this.B=!0,this.lt=new Y,this.ot={q:!1,kt:"#4c525e",et:"white",Ft:"",Mt:0,Rt:NaN},this.F=t,this.ri=i,this.ti=n}return t.prototype.V=function(){this.B=!0},t.prototype.R=function(){return this.B&&(this.I(),this.B=!1),this.lt._(this.ot),this.lt},t.prototype.I=function(){var t=this.ot;t.q=!1;var i=this.F.vt().vertLine;if(i.labelVisible){var n=this.ri.j();if(!n.ii()){var h=n.ei(this.F.W());t.Mt=n.Mt();var s=this.ti();if(s.C){t.Rt=s.Rt,t.Ft=n.ui(l(h)),t.q=!0;var r=V(i.labelBackgroundColor);t.kt=r.kt,t.et=r.xt}}}},t}(),$=function(){function t(){this.ai=null,this.oi=0}return t.prototype.li=function(){return this.oi},t.prototype.fi=function(t){this.oi=t},t.prototype.$=function(){return this.ai},t.prototype.ci=function(t){this.ai=t},t.prototype.vi=function(t,i){return[]},t.prototype._i=function(t){return[]},t.prototype.di=function(){return[]},t.prototype.q=function(){return!0},t}();!function(t){t[t.Normal=0]="Normal",t[t.Magnet=1]="Magnet"}(W||(W={}));var X=function(t){function i(i,n){var h=t.call(this)||this;h.wi=null,h.Mi=NaN,h.bi=0,h.mi=!0,h.pi=new Map,h.gi=!1,h.yi=NaN,h.ki=NaN,h.xi=NaN,h.Ni=NaN,h.ri=i,h.Si=n,h.Ci=new N(i,h);var s,r;h.Di=(s=function(){return h.Mi},r=function(){return h.ki},function(t){var i=r(),n=s();if(t===l(h.wi).Ti())return{D:n,Rt:i};var e=l(t.H());return{D:t.Ai(i,e),Rt:i}});var e=function(t,i){return function(){return{C:h.ri.j().ei(t()),Rt:i()}}}((function(){return h.bi}),(function(){return h.gt()}));return h.Li=new K(h,i,e),h.Ei=new C(h),h}return r(i,t),i.prototype.vt=function(){return this.Si},i.prototype.Bi=function(t,i){this.xi=t,this.Ni=i},i.prototype.Oi=function(){this.xi=NaN,this.Ni=NaN},i.prototype.Fi=function(){return this.xi},i.prototype.Vi=function(){return this.Ni},i.prototype.Pi=function(t,i,n){this.gi||(this.gi=!0),this.mi=!0,this.zi(t,i,n)},i.prototype.W=function(){return this.bi},i.prototype.gt=function(){return this.yi},i.prototype.yt=function(){return this.ki},i.prototype.q=function(){return this.mi},i.prototype.Ri=function(){this.mi=!1,this.Ii(),this.Mi=NaN,this.yi=NaN,this.ki=NaN,this.wi=null,this.Oi()},i.prototype._i=function(t){return null!==this.wi?[this.Ei,this.Ci]:[]},i.prototype.dt=function(t){return t===this.wi&&this.Si.horzLine.visible},i.prototype.wt=function(){return this.Si.vertLine.visible},i.prototype.vi=function(t,i){this.mi&&this.wi===t||this.pi.clear();var n=[];return this.wi===t&&n.push(this.Wi(this.pi,i,this.Di)),n},i.prototype.di=function(){return this.mi?[this.Li]:[]},i.prototype.ct=function(){return this.wi},i.prototype.ji=function(){this.Ei.V(),this.pi.forEach((function(t){return t.V()})),this.Li.V(),this.Ci.V()},i.prototype.Ui=function(t){return t&&!t.Ti().ii()?t.Ti():null},i.prototype.zi=function(t,i,n){this.qi(t,i,n)&&this.ji()},i.prototype.qi=function(t,i,n){var h=this.yi,s=this.ki,r=this.Mi,e=this.bi,u=this.wi,a=this.Ui(n);this.bi=t,this.yi=isNaN(t)?NaN:this.ri.j().G(t),this.wi=n;var o=null!==a?a.H():null;return null!==a&&null!==o?(this.Mi=i,this.ki=a.K(i,o)):(this.Mi=NaN,this.ki=NaN),h!==this.yi||s!==this.ki||e!==this.bi||r!==this.Mi||u!==this.wi},i.prototype.Ii=function(){var t=this.ri.P().map((function(t){return t.Yi().Hi()})).filter(b),i=0===t.length?null:Math.max.apply(Math,t);this.bi=null!==i?i:NaN},i.prototype.Wi=function(t,i,n){var h=t.get(i);return void 0===h&&(h=new q(this,i,n),t.set(i,h)),h},i}($),Z=".";function J(t,i){if(!v(t))return"n/a";if(!_(i))throw new TypeError("invalid length");if(i<0||i>16)throw new TypeError("invalid length");if(0===i)return t.toString();return("0000000000000000"+t.toString()).slice(-i)}var G=function(){function t(t,i){if(i||(i=1),v(t)&&_(t)||(t=100),t<0)throw new TypeError("invalid base");this.Qt=t,this.Ki=i,this.$i()}return t.prototype.format=function(t){var i=t<0?"−":"";return t=Math.abs(t),i+this.Xi(t)},t.prototype.$i=function(){if(this.Zi=0,this.Qt>0&&this.Ki>0)for(var t=this.Qt;t>1;)t/=10,this.Zi++},t.prototype.Xi=function(t){var i=this.Qt/this.Ki,n=Math.floor(t),h="",s=void 0!==this.Zi?this.Zi:NaN;if(i>1){var r=+(Math.round(t*i)-n*i).toFixed(this.Zi);r>=i&&(r-=i,n+=1),h=Z+J(+r.toFixed(this.Zi)*this.Ki,s)}else n=Math.round(n*i)/i,s>0&&(h=Z+J(0,s));return n.toFixed(0)+h},t}(),Q=function(t){function i(i){return void 0===i&&(i=100),t.call(this,i)||this}return r(i,t),i.prototype.format=function(i){return"".concat(t.prototype.format.call(this,i),"%")},i}(G),tt=function(){function t(){this.Ji=[]}return t.prototype.Gi=function(t,i,n){var h={Qi:t,tn:i,nn:!0===n};this.Ji.push(h)},t.prototype.hn=function(t){var i=this.Ji.findIndex((function(i){return t===i.Qi}));i>-1&&this.Ji.splice(i,1)},t.prototype.sn=function(t){this.Ji=this.Ji.filter((function(i){return i.tn===t}))},t.prototype.rn=function(t,i){var n=u([],this.Ji,!0);this.Ji=this.Ji.filter((function(t){return!t.nn})),n.forEach((function(n){return n.Qi(t,i)}))},t.prototype.en=function(){return this.Ji.length>0},t.prototype.un=function(){this.Ji=[]},t}(),it=function(){function t(t,i){this.an=t,this.on=i}return t.prototype.ln=function(t){return null!==t&&(this.an===t.an&&this.on===t.on)},t.prototype.fn=function(){return new t(this.an,this.on)},t.prototype.cn=function(){return this.an},t.prototype.vn=function(){return this.on},t.prototype._n=function(){return this.on-this.an},t.prototype.ii=function(){return this.on===this.an||Number.isNaN(this.on)||Number.isNaN(this.an)},t.prototype.dn=function(i){return null===i?this:new t(Math.min(this.cn(),i.cn()),Math.max(this.vn(),i.vn()))},t.prototype.wn=function(t){if(v(t)&&0!==this.on-this.an){var i=.5*(this.on+this.an),n=this.on-i,h=this.an-i;n*=t,h*=t,this.on=i+n,this.an=i+h}},t.prototype.Mn=function(t){v(t)&&(this.on+=t,this.an+=t)},t.prototype.bn=function(){return{minValue:this.an,maxValue:this.on}},t.mn=function(i){return null===i?null:new t(i.minValue,i.maxValue)},t}();function nt(t,i,n){return Math.min(Math.max(t,i),n)}function ht(t,i,n){return i-t<=n}function st(t){return t<=0?NaN:Math.log(t)/Math.log(10)}function rt(t){var i=Math.ceil(t);return i%2!=0?i-1:i}function et(t){var i=Math.ceil(t);return i%2==0?i-1:i}function ut(t,i){var n=100*(t-i)/i;return i<0?-n:n}function at(t,i){var n=ut(t.cn(),i),h=ut(t.vn(),i);return new it(n,h)}function ot(t,i){var n=100*(t-i)/i+100;return i<0?-n:n}function lt(t,i){var n=ot(t.cn(),i),h=ot(t.vn(),i);return new it(n,h)}function ft(t){var i=Math.abs(t);if(i<1e-8)return 0;var n=st(i+1e-4)+4;return t<0?-n:n}function ct(t){var i=Math.abs(t);if(i<1e-8)return 0;var n=Math.pow(10,i-4)-1e-4;return t<0?-n:n}function vt(t){if(null===t)return null;var i=ft(t.cn()),n=ft(t.vn());return new it(i,n)}var _t,dt=function(){function t(t,i){if(this.pn=t,this.gn=i,function(t){if(t<0)return!1;for(var i=t;i>1;i/=10)if(i%10!=0)return!1;return!0}(this.pn))this.yn=[2,2.5,2];else{this.yn=[];for(var n=this.pn;1!==n;){if(n%2==0)this.yn.push(2),n/=2;else{if(n%5!=0)throw new Error("unexpected base");this.yn.push(2,2.5),n/=5}if(this.yn.length>100)throw new Error("something wrong with base")}}}return t.prototype.kn=function(t,i,n){for(var h,s,r,e=0===this.pn?0:1/this.pn,u=1e-9,a=Math.pow(10,Math.max(0,Math.ceil(st(t-i)))),o=0,l=this.gn[0];;){var f=ht(a,e,u)&&a>e+u,c=ht(a,n*l,u),v=ht(a,1,u);if(!(f&&c&&v))break;a/=l,l=this.gn[++o%this.gn.length]}if(a<=e+u&&(a=e),a=Math.max(1,a),this.yn.length>0&&(h=a,s=1,r=u,Math.abs(h-s)<r))for(o=0,l=this.yn[0];ht(a,n*l,u)&&a>e+u;)a/=l,l=this.yn[++o%this.yn.length];return a},t}(),wt=function(){function t(t,i,n,h){this.xn=[],this.Qt=t,this.pn=i,this.Nn=n,this.Sn=h}return t.prototype.kn=function(t,i){if(t<i)throw new Error("high < low");var n=this.Qt.bt(),h=(t-i)*this.Cn()/n,s=new dt(this.pn,[2,2.5,2]),r=new dt(this.pn,[2,2,2.5]),e=new dt(this.pn,[2.5,2,2]),u=[];return u.push(s.kn(t,i,h),r.kn(t,i,h),e.kn(t,i,h)),function(t){if(t.length<1)throw Error("array is empty");for(var i=t[0],n=1;n<t.length;++n)t[n]<i&&(i=t[n]);return i}(u)},t.prototype.Dn=function(){var t=this.Qt,i=t.H();if(null!==i){var n=t.bt(),h=this.Nn(n-1,i),s=this.Nn(0,i),r=this.Qt.vt().entireTextOnly?this.Tn()/2:0,e=r,u=n-1-r,a=Math.max(h,s),o=Math.min(h,s);if(a!==o){for(var l=this.kn(a,o),f=a%l,c=a>=o?1:-1,v=null,_=0,d=a-(f+=f<0?l:0);d>o;d-=l){var w=this.Sn(d,i,!0);null!==v&&Math.abs(w-v)<this.Cn()||(w<e||w>u||(_<this.xn.length?(this.xn[_].An=w,this.xn[_].Ln=t.En(d)):this.xn.push({An:w,Ln:t.En(d)}),_++,v=w,t.Bn()&&(l=this.kn(d*c,o))))}this.xn.length=_}else this.xn=[]}else this.xn=[]},t.prototype.On=function(){return this.xn},t.prototype.Tn=function(){return this.Qt.zt()},t.prototype.Cn=function(){return Math.ceil(2.5*this.Tn())},t}();function Mt(t){return t.slice().sort((function(t,i){return l(t.li())-l(i.li())}))}!function(t){t[t.Normal=0]="Normal",t[t.Logarithmic=1]="Logarithmic",t[t.Percentage=2]="Percentage",t[t.IndexedTo100=3]="IndexedTo100"}(_t||(_t={}));var bt,mt,pt=new Q,gt=new G(100,1),yt=function(){function t(t,i,n,h){this.Fn=0,this.Vn=null,this.Pn=null,this.zn=null,this.Rn={In:!1,Wn:null},this.jn=0,this.Un=0,this.qn=new tt,this.Hn=new tt,this.Yn=[],this.Kn=null,this.$n=null,this.Xn=null,this.Zn=null,this.Jn=gt,this.Gn=t,this.Si=i,this.Qn=n,this.th=h,this.ih=new wt(this,100,this.nh.bind(this),this.hh.bind(this))}return t.prototype.sh=function(){return this.Gn},t.prototype.vt=function(){return this.Si},t.prototype.rh=function(t){if(c(this.Si,t),this.eh(),void 0!==t.mode&&this.uh({ah:t.mode}),void 0!==t.scaleMargins){var i=o(t.scaleMargins.top),n=o(t.scaleMargins.bottom);if(i<0||i>1)throw new Error("Invalid top margin - expect value between 0 and 1, given=".concat(i));if(n<0||n>1||i+n>1)throw new Error("Invalid bottom margin - expect value between 0 and 1, given=".concat(n));if(i+n>1)throw new Error("Invalid margins - sum of margins must be less than 1, given=".concat(i+n));this.oh(),this.$n=null}},t.prototype.lh=function(){return this.Si.autoScale},t.prototype.Bn=function(){return 1===this.Si.mode},t.prototype.fh=function(){return 2===this.Si.mode},t.prototype._h=function(){return 3===this.Si.mode},t.prototype.ah=function(){return{dh:this.Si.autoScale,wh:this.Si.invertScale,ah:this.Si.mode}},t.prototype.uh=function(t){var i=this.ah(),n=null;void 0!==t.dh&&(this.Si.autoScale=t.dh),void 0!==t.ah&&(this.Si.mode=t.ah,2!==t.ah&&3!==t.ah||(this.Si.autoScale=!0),this.Rn.In=!1),1===i.ah&&t.ah!==i.ah&&(!function(t){if(null===t)return!1;var i=ct(t.cn()),n=ct(t.vn());return isFinite(i)&&isFinite(n)}(this.Pn)?this.Si.autoScale=!0:(n=function(t){if(null===t)return null;var i=ct(t.cn()),n=ct(t.vn());return new it(i,n)}(this.Pn),null!==n&&this.Mh(n))),1===t.ah&&t.ah!==i.ah&&null!==(n=vt(this.Pn))&&this.Mh(n);var h=i.ah!==this.Si.mode;h&&(2===i.ah||this.fh())&&this.eh(),h&&(3===i.ah||this._h())&&this.eh(),void 0!==t.wh&&i.wh!==t.wh&&(this.Si.invertScale=t.wh,this.bh()),this.Hn.rn(i,this.ah())},t.prototype.mh=function(){return this.Hn},t.prototype.zt=function(){return this.Qn.fontSize},t.prototype.bt=function(){return this.Fn},t.prototype.ph=function(t){this.Fn!==t&&(this.Fn=t,this.oh(),this.$n=null)},t.prototype.gh=function(){if(this.Vn)return this.Vn;var t=this.bt()-this.yh()-this.kh();return this.Vn=t,t},t.prototype.xh=function(){return this.Nh(),this.Pn},t.prototype.Mh=function(t,i){var n=this.Pn;(i||null===n&&null!==t||null!==n&&!n.ln(t))&&(this.$n=null,this.Pn=t)},t.prototype.ii=function(){return this.Nh(),0===this.Fn||!this.Pn||this.Pn.ii()},t.prototype.Sh=function(t){return this.wh()?t:this.bt()-1-t},t.prototype.K=function(t,i){return this.fh()?t=ut(t,i):this._h()&&(t=ot(t,i)),this.hh(t,i)},t.prototype.Ch=function(t,i,n){this.Nh();for(var h=this.kh(),s=l(this.xh()),r=s.cn(),e=s.vn(),u=this.gh()-1,a=this.wh(),o=u/(e-r),f=void 0===n?0:n.from,c=void 0===n?t.length:n.to,v=this.Dh(),_=f;_<c;_++){var d=t[_],w=d.D;if(!isNaN(w)){var M=w;null!==v&&(M=v(d.D,i));var b=h+o*(M-r),m=a?b:this.Fn-1-b;d.g=m}}},t.prototype.Th=function(t,i,n){this.Nh();for(var h=this.kh(),s=l(this.xh()),r=s.cn(),e=s.vn(),u=this.gh()-1,a=this.wh(),o=u/(e-r),f=void 0===n?0:n.from,c=void 0===n?t.length:n.to,v=this.Dh(),_=f;_<c;_++){var d=t[_],w=d.open,M=d.high,b=d.low,m=d.close;null!==v&&(w=v(d.open,i),M=v(d.high,i),b=v(d.low,i),m=v(d.close,i));var p=h+o*(w-r),g=a?p:this.Fn-1-p;d.Ah=g,p=h+o*(M-r),g=a?p:this.Fn-1-p,d.Lh=g,p=h+o*(b-r),g=a?p:this.Fn-1-p,d.Eh=g,p=h+o*(m-r),g=a?p:this.Fn-1-p,d.Bh=g}},t.prototype.Ai=function(t,i){var n=this.nh(t,i);return this.Oh(n,i)},t.prototype.Oh=function(t,i){var n=t;return this.fh()?n=function(t,i){return i<0&&(t=-t),t/100*i+i}(n,i):this._h()&&(n=function(t,i){return t-=100,i<0&&(t=-t),t/100*i+i}(n,i)),n},t.prototype.Fh=function(){return this.Yn},t.prototype.Vh=function(){if(this.Kn)return this.Kn;for(var t=[],i=0;i<this.Yn.length;i++){var n=this.Yn[i];null===n.li()&&n.fi(i+1),t.push(n)}return t=Mt(t),this.Kn=t,this.Kn},t.prototype.Ph=function(t){-1===this.Yn.indexOf(t)&&(this.Yn.push(t),this.eh(),this.zh())},t.prototype.Rh=function(t){var i=this.Yn.indexOf(t);if(-1===i)throw new Error("source is not attached to scale");this.Yn.splice(i,1),0===this.Yn.length&&(this.uh({dh:!0}),this.Mh(null)),this.eh(),this.zh()},t.prototype.H=function(){for(var t=null,i=0,n=this.Yn;i<n.length;i++){var h=n[i].H();null!==h&&((null===t||h.Ih<t.Ih)&&(t=h))}return null===t?null:t.X},t.prototype.wh=function(){return this.Si.invertScale},t.prototype.On=function(){return this.$n||(this.ih.Dn(),this.$n=this.ih.On(),this.qn.rn()),this.$n},t.prototype.Wh=function(){return this.qn},t.prototype.jh=function(t){this.fh()||this._h()||null===this.Xn&&null===this.zn&&(this.ii()||(this.Xn=this.Fn-t,this.zn=l(this.xh()).fn()))},t.prototype.Uh=function(t){if(!this.fh()&&!this._h()&&null!==this.Xn){this.uh({dh:!1}),(t=this.Fn-t)<0&&(t=0);var i=(this.Xn+.2*(this.Fn-1))/(t+.2*(this.Fn-1)),n=l(this.zn).fn();i=Math.max(i,.1),n.wn(i),this.Mh(n)}},t.prototype.qh=function(){this.fh()||this._h()||(this.Xn=null,this.zn=null)},t.prototype.Hh=function(t){this.lh()||null===this.Zn&&null===this.zn&&(this.ii()||(this.Zn=t,this.zn=l(this.xh()).fn()))},t.prototype.Yh=function(t){if(!this.lh()&&null!==this.Zn){var i=l(this.xh())._n()/(this.gh()-1),n=t-this.Zn;this.wh()&&(n*=-1);var h=n*i,s=l(this.zn).fn();s.Mn(h),this.Mh(s,!0),this.$n=null}},t.prototype.Kh=function(){this.lh()||null!==this.Zn&&(this.Zn=null,this.zn=null)},t.prototype.$h=function(){return this.Jn||this.eh(),this.Jn},t.prototype.ni=function(t,i){switch(this.Si.mode){case 2:return this.$h().format(ut(t,i));case 3:return this.$h().format(ot(t,i));default:return this.Xh(t)}},t.prototype.En=function(t){switch(this.Si.mode){case 2:case 3:return this.$h().format(t);default:return this.Xh(t)}},t.prototype.Zh=function(t){return this.Xh(t,l(this.Jh()).$h())},t.prototype.Gh=function(t,i){return t=ut(t,i),pt.format(t)},t.prototype.Qh=function(){return this.Yn},t.prototype.ts=function(t){this.Rn={Wn:t,In:!1}},t.prototype.ji=function(){this.Yn.forEach((function(t){return t.ji()}))},t.prototype.eh=function(){this.$n=null;var t=this.Jh(),i=100;null!==t&&(i=Math.round(1/t.ns())),this.Jn=gt,this.fh()?(this.Jn=pt,i=100):this._h()?(this.Jn=new G(100,1),i=100):null!==t&&(this.Jn=t.$h()),this.ih=new wt(this,i,this.nh.bind(this),this.hh.bind(this)),this.ih.Dn()},t.prototype.zh=function(){this.Kn=null},t.prototype.Jh=function(){return this.Yn[0]||null},t.prototype.yh=function(){return this.wh()?this.Si.scaleMargins.bottom*this.bt()+this.Un:this.Si.scaleMargins.top*this.bt()+this.jn},t.prototype.kh=function(){return this.wh()?this.Si.scaleMargins.top*this.bt()+this.jn:this.Si.scaleMargins.bottom*this.bt()+this.Un},t.prototype.Nh=function(){this.Rn.In||(this.Rn.In=!0,this.hs())},t.prototype.oh=function(){this.Vn=null},t.prototype.hh=function(t,i){if(this.Nh(),this.ii())return 0;t=this.Bn()&&t?ft(t):t;var n=l(this.xh()),h=this.kh()+(this.gh()-1)*(t-n.cn())/n._n();return this.Sh(h)},t.prototype.nh=function(t,i){if(this.Nh(),this.ii())return 0;var n=this.Sh(t),h=l(this.xh()),s=h.cn()+h._n()*((n-this.kh())/(this.gh()-1));return this.Bn()?ct(s):s},t.prototype.bh=function(){this.$n=null,this.ih.Dn()},t.prototype.hs=function(){var t=this.Rn.Wn;if(null!==t){for(var i=null,n=0,h=0,s=0,r=this.Qh();s<r.length;s++){var e=r[s];if(e.q()){var u=e.H();if(null!==u){var a=e.ss(t.rs(),t.es()),o=a&&a.xh();if(null!==o){switch(this.Si.mode){case 1:o=vt(o);break;case 2:o=at(o,u.X);break;case 3:o=lt(o,u.X)}if(i=null===i?o:i.dn(l(o)),null!==a){var f=a.us();null!==f&&(n=Math.max(n,f.above),h=Math.max(n,f.below))}}}}}if(n===this.jn&&h===this.Un||(this.jn=n,this.Un=h,this.$n=null,this.oh()),null!==i){if(i.cn()===i.vn()){var c=this.Jh(),v=5*(null===c||this.fh()||this._h()?1:c.ns());i=new it(i.cn()-v,i.vn()+v)}this.Mh(i)}else null===this.Pn&&this.Mh(new it(-.5,.5));this.Rn.In=!0}},t.prototype.Dh=function(){return this.fh()?ut:this._h()?ot:this.Bn()?ft:null},t.prototype.Xh=function(t,i){return void 0===this.th.priceFormatter?(void 0===i&&(i=this.$h()),i.format(t)):this.th.priceFormatter(t)},t}();function kt(t){void 0!==t.borderColor&&(t.borderUpColor=t.borderColor,t.borderDownColor=t.borderColor),void 0!==t.wickColor&&(t.wickUpColor=t.wickColor,t.wickDownColor=t.wickColor)}!function(t){t[t.Disabled=0]="Disabled",t[t.Continuous=1]="Continuous",t[t.OnDataUpdate=2]="OnDataUpdate"}(bt||(bt={})),function(t){t[t.LastBar=0]="LastBar",t[t.LastVisible=1]="LastVisible"}(mt||(mt={}));var xt=function(t){return t.getUTCFullYear()};function Nt(t,i,n){return i.replace(/yyyy/g,function(t){return J(xt(t),4)}(t)).replace(/yy/g,function(t){return J(xt(t)%100,2)}(t)).replace(/MMMM/g,function(t,i){return new Date(t.getUTCFullYear(),t.getUTCMonth(),1).toLocaleString(i,{month:"long"})}(t,n)).replace(/MMM/g,function(t,i){return new Date(t.getUTCFullYear(),t.getUTCMonth(),1).toLocaleString(i,{month:"short"})}(t,n)).replace(/MM/g,function(t){return J(function(t){return t.getUTCMonth()+1}(t),2)}(t)).replace(/dd/g,function(t){return J(function(t){return t.getUTCDate()}(t),2)}(t))}var St=function(){function t(t,i){void 0===t&&(t="yyyy-MM-dd"),void 0===i&&(i="default"),this.os=t,this.ls=i}return t.prototype.fs=function(t){return Nt(t,this.os,this.ls)},t}(),Ct=function(){function t(t){this.cs=t||"%h:%m:%s"}return t.prototype.fs=function(t){return this.cs.replace("%h",J(t.getUTCHours(),2)).replace("%m",J(t.getUTCMinutes(),2)).replace("%s",J(t.getUTCSeconds(),2))},t}(),Dt={vs:"yyyy-MM-dd",_s:"%h:%m:%s",ds:" ",ws:"default"},Tt=function(){function t(t){void 0===t&&(t={});var i=e(e({},Dt),t);this.Ms=new St(i.vs,i.ws),this.bs=new Ct(i._s),this.ps=i.ds}return t.prototype.fs=function(t){return"".concat(this.Ms.fs(t)).concat(this.ps).concat(this.bs.fs(t))},t}();var At=function(){function t(t,i){void 0===i&&(i=50),this.gs=0,this.ys=1,this.ks=1,this.xs=new Map,this.Ns=new Map,this.Ss=t,this.Cs=i}return t.prototype.fs=function(t){var i=void 0===t.Ds?new Date(1e3*t.Ts).getTime():new Date(Date.UTC(t.Ds.year,t.Ds.month-1,t.Ds.day)).getTime(),n=this.xs.get(i);if(void 0!==n)return n.As;if(this.gs===this.Cs){var h=this.Ns.get(this.ks);this.Ns.delete(this.ks),this.xs.delete(o(h)),this.ks++,this.gs--}var s=this.Ss(t);return this.xs.set(i,{As:s,Ls:this.ys}),this.Ns.set(this.ys,i),this.gs++,this.ys++,s},t}(),Lt=function(){function t(t,i){a(t<=i,"right should be >= left"),this.Es=t,this.Bs=i}return t.prototype.rs=function(){return this.Es},t.prototype.es=function(){return this.Bs},t.prototype.Os=function(){return this.Bs-this.Es+1},t.prototype.Fs=function(t){return this.Es<=t&&t<=this.Bs},t.prototype.ln=function(t){return this.Es===t.rs()&&this.Bs===t.es()},t}();function Et(t,i){return null===t||null===i?t===i:t.ln(i)}var Bt,Ot=function(){function t(){this.Vs=new Map,this.xs=null}return t.prototype.Ps=function(t){var i=this;this.xs=null,this.Vs.clear(),t.forEach((function(t,n){var h=i.Vs.get(t.zs);void 0===h&&(h=[],i.Vs.set(t.zs,h)),h.push({Rs:n,C:t.C,Is:t.zs})}))},t.prototype.Ws=function(t,i){var n=Math.ceil(i/t);return null!==this.xs&&this.xs.js===n||(this.xs={On:this.Us(n),js:n}),this.xs.On},t.prototype.Us=function(t){for(var i=[],n=0,h=Array.from(this.Vs.keys()).sort((function(t,i){return i-t}));n<h.length;n++){var s=h[n];if(this.Vs.get(s)){var r=i;i=[];for(var e=r.length,u=0,a=o(this.Vs.get(s)),l=a.length,f=1/0,c=-1/0,v=0;v<l;v++){for(var _=a[v],d=_.Rs;u<e;){var w=r[u],M=w.Rs;if(!(M<d)){f=M;break}u++,i.push(w),c=M,f=1/0}f-d>=t&&d-c>=t&&(i.push(_),c=d)}for(;u<e;u++)i.push(r[u])}}return i},t}(),Ft=function(){function t(t){this.qs=t}return t.prototype.Hs=function(){return null===this.qs?null:new Lt(Math.floor(this.qs.rs()),Math.ceil(this.qs.es()))},t.prototype.Ys=function(){return this.qs},t.Ks=function(){return new t(null)},t}();!function(t){t[t.Year=0]="Year",t[t.Month=1]="Month",t[t.DayOfMonth=2]="DayOfMonth",t[t.Time=3]="Time",t[t.TimeWithSeconds=4]="TimeWithSeconds"}(Bt||(Bt={}));var Vt,Pt=function(){function t(t,i,n){this.$s=0,this.Xs=null,this.Zs=[],this.Zn=null,this.Xn=null,this.Js=new Ot,this.Gs=new Map,this.Qs=Ft.Ks(),this.tr=!0,this.ir=new tt,this.nr=new tt,this.hr=new tt,this.sr=null,this.rr=null,this.er=[],this.Si=i,this.th=n,this.ur=i.rightOffset,this.ar=i.barSpacing,this.ri=t,this.lr()}return t.prototype.vt=function(){return this.Si},t.prototype.cr=function(t){c(this.th,t),this.vr(),this.lr()},t.prototype.rh=function(t,i){var n;c(this.Si,t),this.Si.fixLeftEdge&&this._r(),this.Si.fixRightEdge&&this.dr(),void 0!==t.barSpacing&&this.ri.wr(t.barSpacing),void 0!==t.rightOffset&&this.ri.Mr(t.rightOffset),void 0!==t.minBarSpacing&&this.ri.wr(null!==(n=t.barSpacing)&&void 0!==n?n:this.ar),this.vr(),this.lr(),this.hr.rn()},t.prototype.ei=function(t){var i;return(null===(i=this.Zs[t])||void 0===i?void 0:i.C)||null},t.prototype.br=function(t,i){if(this.Zs.length<1)return null;if(t.Ts>this.Zs[this.Zs.length-1].C.Ts)return i?this.Zs.length-1:null;for(var n=0;n<this.Zs.length;++n){if(t.Ts===this.Zs[n].C.Ts)return n;if(t.Ts<this.Zs[n].C.Ts)return i?n:null}return null},t.prototype.ii=function(){return 0===this.$s||0===this.Zs.length},t.prototype.mr=function(){return this.pr(),this.Qs.Hs()},t.prototype.gr=function(){return this.pr(),this.Qs.Ys()},t.prototype.yr=function(){var t=this.mr();if(null===t)return null;var i={from:t.rs(),to:t.es()};return this.kr(i)},t.prototype.kr=function(t){var i=Math.round(t.from),n=Math.round(t.to),h=l(this.Nr()),s=l(this.Sr());return{from:l(this.ei(Math.max(h,i))),to:l(this.ei(Math.min(s,n)))}},t.prototype.Cr=function(t){return{from:l(this.br(t.from,!0)),to:l(this.br(t.to,!0))}},t.prototype.Dr=function(){return this.Js},t.prototype.Mt=function(){return this.$s},t.prototype.Tr=function(t){if(isFinite(t)&&!(t<=0)&&this.$s!==t){if(this.Si.lockVisibleTimeRangeOnResize&&this.$s){var i=this.ar*t/this.$s;this.ar=i}if(this.Si.fixLeftEdge){var n=this.mr();if(null!==n)if(n.rs()<=0){var h=this.$s-t;this.ur-=Math.round(h/this.ar)+1}}this.$s=t,this.tr=!0,this.Ar(),this.Lr()}},t.prototype.G=function(t){if(this.ii()||!_(t))return 0;var i=this.Er()+this.ur-t;return this.$s-(i+.5)*this.ar-1},t.prototype.Br=function(t,i){for(var n=this.Er(),h=void 0===i?0:i.from,s=void 0===i?t.length:i.to,r=h;r<s;r++){var e=t[r].C,u=n+this.ur-e,a=this.$s-(u+.5)*this.ar-1;t[r].p=a}},t.prototype.Or=function(t){return Math.ceil(this.Fr(t))},t.prototype.Mr=function(t){this.tr=!0,this.ur=t,this.Lr(),this.ri.Vr(),this.ri.Pr()},t.prototype.zr=function(){return this.ar},t.prototype.wr=function(t){this.Rr(t),this.Lr(),this.ri.Vr(),this.ri.Pr()},t.prototype.Ir=function(){return this.ur},t.prototype.On=function(){if(this.ii())return null;if(null!==this.rr)return this.rr;for(var t=this.ar,i=5*(this.ri.vt().layout.fontSize+4),n=Math.round(i/t),h=l(this.mr()),s=Math.max(h.rs(),h.rs()-n),r=Math.max(h.es(),h.es()-n),e=this.Js.Ws(t,i),u=this.Nr()+n,a=this.Sr()-n,o=0,f=0,c=e;f<c.length;f++){var v=c[f];if(s<=v.Rs&&v.Rs<=r){var _=this.ei(v.Rs);if(null!==_){var d=void 0;o<this.er.length?((d=this.er[o]).An=this.G(v.Rs),d.Ln=this.Wr(_,v.Is),d.Is=v.Is):(d={jr:!1,An:this.G(v.Rs),Ln:this.Wr(_,v.Is),Is:v.Is},this.er.push(d)),this.ar>i/2?d.jr=!1:d.jr=this.Si.fixLeftEdge&&v.Rs<=u||this.Si.fixRightEdge&&v.Rs>=a,o++}}}return this.er.length=o,this.rr=this.er,this.er},t.prototype.Ur=function(){this.tr=!0,this.wr(this.Si.barSpacing),this.Mr(this.Si.rightOffset)},t.prototype.qr=function(t){this.tr=!0,this.Xs=t,this.Lr(),this._r()},t.prototype.Hr=function(t,i){var n=this.Fr(t),h=this.zr(),s=h+i*(h/10);this.wr(s),this.Si.rightBarStaysOnScroll||this.Mr(this.Ir()+(n-this.Fr(t)))},t.prototype.jh=function(t){this.Zn&&this.Kh(),null===this.Xn&&null===this.sr&&(this.ii()||(this.Xn=t,this.Yr()))},t.prototype.Uh=function(t){if(null!==this.sr){var i=nt(this.$s-t,0,this.$s),n=nt(this.$s-l(this.Xn),0,this.$s);0!==i&&0!==n&&this.wr(this.sr.zr*i/n)}},t.prototype.qh=function(){null!==this.Xn&&(this.Xn=null,this.Kr())},t.prototype.Hh=function(t){null===this.Zn&&null===this.sr&&(this.ii()||(this.Zn=t,this.Yr()))},t.prototype.Yh=function(t){if(null!==this.Zn){var i=(this.Zn-t)/this.zr();this.ur=l(this.sr).Ir+i,this.tr=!0,this.Lr()}},t.prototype.Kh=function(){null!==this.Zn&&(this.Zn=null,this.Kr())},t.prototype.$r=function(){this.Xr(this.Si.rightOffset)},t.prototype.Xr=function(t,i){var n=this;if(void 0===i&&(i=400),!isFinite(t))throw new RangeError("offset is required and must be finite number");if(!isFinite(i)||i<=0)throw new RangeError("animationDuration (optional) must be finite positive number");var h=this.ur,s=performance.now(),r=function(){var e=(performance.now()-s)/i,u=e>=1,a=u?t:h+(t-h)*e;n.Mr(a),u||setTimeout(r,20)};r()},t.prototype.V=function(t){this.tr=!0,this.Zs=t,this.Js.Ps(t),this.Lr()},t.prototype.Zr=function(){return this.ir},t.prototype.Jr=function(){return this.nr},t.prototype.Gr=function(){return this.hr},t.prototype.Er=function(){return this.Xs||0},t.prototype.Qr=function(t){var i=t.Os();this.Rr(this.$s/i),this.ur=t.es()-this.Er(),this.Lr(),this.tr=!0,this.ri.Vr(),this.ri.Pr()},t.prototype.te=function(){var t=this.Nr(),i=this.Sr();null!==t&&null!==i&&this.Qr(new Lt(t,i+this.Si.rightOffset))},t.prototype.ie=function(t){var i=new Lt(t.from,t.to);this.Qr(i)},t.prototype.ui=function(t){return void 0!==this.th.timeFormatter?this.th.timeFormatter(t.Ds||t.Ts):this.ne.fs(new Date(1e3*t.Ts))},t.prototype.Nr=function(){return 0===this.Zs.length?null:0},t.prototype.Sr=function(){return 0===this.Zs.length?null:this.Zs.length-1},t.prototype.he=function(t){return(this.$s-1-t)/this.ar},t.prototype.Fr=function(t){var i=this.he(t),n=this.Er()+this.ur-i;return Math.round(1e6*n)/1e6},t.prototype.Rr=function(t){var i=this.ar;this.ar=t,this.Ar(),i!==this.ar&&(this.tr=!0,this.se())},t.prototype.pr=function(){if(this.tr)if(this.tr=!1,this.ii())this.re(Ft.Ks());else{var t=this.Er(),i=this.$s/this.ar,n=this.ur+t,h=new Lt(n-i+1,n);this.re(new Ft(h))}},t.prototype.Ar=function(){var t=this.ee();if(this.ar<t&&(this.ar=t,this.tr=!0),0!==this.$s){var i=.5*this.$s;this.ar>i&&(this.ar=i,this.tr=!0)}},t.prototype.ee=function(){return this.Si.fixLeftEdge&&this.Si.fixRightEdge&&0!==this.Zs.length?this.$s/this.Zs.length:this.Si.minBarSpacing},t.prototype.Lr=function(){var t=this.ue();this.ur>t&&(this.ur=t,this.tr=!0);var i=this.ae();null!==i&&this.ur<i&&(this.ur=i,this.tr=!0)},t.prototype.ae=function(){var t=this.Nr(),i=this.Xs;return null===t||null===i?null:t-i-1+(this.Si.fixLeftEdge?this.$s/this.ar:Math.min(2,this.Zs.length))},t.prototype.ue=function(){return this.Si.fixRightEdge?0:this.$s/this.ar-Math.min(2,this.Zs.length)},t.prototype.Yr=function(){this.sr={zr:this.zr(),Ir:this.Ir()}},t.prototype.Kr=function(){this.sr=null},t.prototype.Wr=function(t,i){var n=this,h=this.Gs.get(i);return void 0===h&&(h=new At((function(t){return n.oe(t,i)})),this.Gs.set(i,h)),h.fs(t)},t.prototype.oe=function(t,i){var n,h,s=this.Si.timeVisible;return h=i<20&&s?this.Si.secondsVisible?4:3:i<40&&s?3:i<50||i<60?2:i<70?1:0,void 0!==this.Si.tickMarkFormatter?this.Si.tickMarkFormatter(null!==(n=t.Ds)&&void 0!==n?n:t.Ts,h,this.th.locale):function(t,i,n){var h={};switch(i){case 0:h.year="numeric";break;case 1:h.month="short";break;case 2:h.day="numeric";break;case 3:h.hour12=!1,h.hour="2-digit",h.minute="2-digit";break;case 4:h.hour12=!1,h.hour="2-digit",h.minute="2-digit",h.second="2-digit"}var s=void 0===t.Ds?new Date(1e3*t.Ts):new Date(Date.UTC(t.Ds.year,t.Ds.month-1,t.Ds.day));return new Date(s.getUTCFullYear(),s.getUTCMonth(),s.getUTCDate(),s.getUTCHours(),s.getUTCMinutes(),s.getUTCSeconds(),s.getUTCMilliseconds()).toLocaleString(n,h)}(t,h,this.th.locale)},t.prototype.re=function(t){var i=this.Qs;this.Qs=t,Et(i.Hs(),this.Qs.Hs())||this.ir.rn(),Et(i.Ys(),this.Qs.Ys())||this.nr.rn(),this.se()},t.prototype.se=function(){this.rr=null},t.prototype.vr=function(){this.se(),this.Gs.clear()},t.prototype.lr=function(){var t=this.th.dateFormat;this.Si.timeVisible?this.ne=new Tt({vs:t,_s:this.Si.secondsVisible?"%h:%m:%s":"%h:%m",ds:"   ",ws:this.th.locale}):this.ne=new St(t,this.th.locale)},t.prototype._r=function(){if(this.Si.fixLeftEdge){var t=this.Nr();if(null!==t){var i=this.mr();if(null!==i){var n=i.rs()-t;if(n<0){var h=this.ur-n-1;this.Mr(h)}this.Ar()}}}},t.prototype.dr=function(){this.Lr(),this.Ar()},t}();function zt(t){return!v(t)&&!d(t)}function Rt(t){return v(t)}!function(t){t.Solid="solid",t.VerticalGradient="gradient"}(Vt||(Vt={}));var It="'Trebuchet MS', Roboto, Ubuntu, sans-serif";function Wt(t,i,n){return n=void 0!==n?"".concat(n," "):"",void 0===i&&(i=It),"".concat(n).concat(t,"px ").concat(i)}var jt=function(){function t(t){this.le={At:1,Tt:4,zt:NaN,St:"",fe:"",et:"",Et:0,Bt:0,Ot:0,Lt:0,Pt:0},this.O=t}return t.prototype.vt=function(){var t=this.le,i=this.ce(),n=this.ve();return t.zt===i&&t.fe===n||(t.zt=i,t.fe=n,t.St=Wt(i,n),t.Lt=Math.floor(i/3.5),t.Et=t.Lt,t.Bt=Math.max(Math.ceil(i/2-t.Tt/2),0),t.Ot=Math.ceil(i/2+t.Tt/2),t.Pt=Math.round(i/10)),t.et=this._e(),this.le},t.prototype._e=function(){return this.O.vt().layout.textColor},t.prototype.ce=function(){return this.O.vt().layout.fontSize},t.prototype.ve=function(){return this.O.vt().layout.fontFamily},t}();function Ut(t){return"left"===t||"right"===t}var qt=function(){function t(t){this.de=new Map,this.we=!1,this.Me=[],this.be=t}return t.prototype.me=function(t,i){var n=function(t,i){return void 0===t?i:{pe:Math.max(t.pe,i.pe),dh:t.dh||i.dh}}(this.de.get(t),i);this.de.set(t,n)},t.prototype.ge=function(){return this.be},t.prototype.ye=function(t){var i=this.de.get(t);return void 0===i?{pe:this.be}:{pe:Math.max(this.be,i.pe),dh:i.dh}},t.prototype.ke=function(){this.Me=[{xe:0}]},t.prototype.Ne=function(t){this.Me=[{xe:1,X:t}]},t.prototype.Se=function(){this.Me=[{xe:4}]},t.prototype.wr=function(t){this.Me.push({xe:2,X:t})},t.prototype.Mr=function(t){this.Me.push({xe:3,X:t})},t.prototype.Ce=function(){return this.Me},t.prototype.dn=function(t){var i=this;this.we=this.we||t.we,this.Me=this.Me.concat(t.Me);for(var n=0,h=t.Me;n<h.length;n++){var s=h[n];this.De(s)}this.be=Math.max(this.be,t.be),t.de.forEach((function(t,n){i.me(n,t)}))},t.prototype.De=function(t){switch(t.xe){case 0:this.ke();break;case 1:this.Ne(t.X);break;case 2:this.wr(t.X);break;case 3:this.Mr(t.X);break;case 4:this.Se()}},t}(),Ht=function(){function t(t){this.Te=t}return t.prototype.format=function(t){var i="";return t<0&&(i="-",t=-t),t<995?i+this.Ae(t):t<999995?i+this.Ae(t/1e3)+"K":t<999999995?(t=1e3*Math.round(t/1e3),i+this.Ae(t/1e6)+"M"):(t=1e6*Math.round(t/1e6),i+this.Ae(t/1e9)+"B")},t.prototype.Ae=function(t){var i=Math.pow(10,this.Te);return((t=Math.round(t*i)/i)>=1e-15&&t<1?t.toFixed(this.Te).replace(/\.?0+$/,""):String(t)).replace(/(\.[1-9]*)0+$/,(function(t,i){return i}))},t}();function Yt(t,i,n,h){if(0!==i.length){var s=i[h.from].p,r=i[h.from].g;t.moveTo(s,r);for(var e=h.from+1;e<h.to;++e){var u=i[e];if(1===n){var a=i[e-1].g,o=u.p;t.lineTo(o,a)}t.lineTo(u.p,u.g)}}}var Kt=function(t){function i(){var i=null!==t&&t.apply(this,arguments)||this;return i.v=null,i}return r(i,t),i.prototype._=function(t){this.v=t},i.prototype.u=function(t){if(null!==this.v&&0!==this.v.m.length&&null!==this.v.M){if(t.lineCap="butt",t.lineJoin="round",t.strokeStyle=this.v.S,t.lineWidth=this.v.rt,n(t,this.v.ut),t.lineWidth=1,t.beginPath(),1===this.v.m.length){var i=this.v.m[0],h=this.v.Le/2;t.moveTo(i.p-h,this.v.Ee),t.lineTo(i.p-h,i.g),t.lineTo(i.p+h,i.g),t.lineTo(i.p+h,this.v.Ee)}else t.moveTo(this.v.m[this.v.M.from].p,this.v.Ee),t.lineTo(this.v.m[this.v.M.from].p,this.v.m[this.v.M.from].g),Yt(t,this.v.m,this.v.Be,this.v.M),this.v.M.to>this.v.M.from&&(t.lineTo(this.v.m[this.v.M.to-1].p,this.v.Ee),t.lineTo(this.v.m[this.v.M.from].p,this.v.Ee));t.closePath();var s=t.createLinearGradient(0,0,0,this.v.Ee);s.addColorStop(0,this.v.Oe),s.addColorStop(1,this.v.Fe),t.fillStyle=s,t.fill()}},i}(g),$t=function(t){function i(){var i=null!==t&&t.apply(this,arguments)||this;return i.v=null,i}return r(i,t),i.prototype._=function(t){this.v=t},i.prototype.u=function(t){if(null!==this.v&&0!==this.v.m.length&&null!==this.v.M){if(t.lineCap="butt",t.lineWidth=this.v.rt,n(t,this.v.ut),t.strokeStyle=this.v.S,t.lineJoin="round",t.beginPath(),1===this.v.m.length){var i=this.v.m[0];t.moveTo(i.p-this.v.Le/2,i.g),t.lineTo(i.p+this.v.Le/2,i.g)}else Yt(t,this.v.m,this.v.Be,this.v.M);t.stroke()}},i}(g);function Xt(t,i,n,h,s){void 0===h&&(h=0),void 0===s&&(s=t.length);for(var r=s-h;0<r;){var e=r>>1,u=h+e;n(t[u],i)?(h=u+1,r-=e+1):r=e}return h}function Zt(t,i,n,h,s){void 0===h&&(h=0),void 0===s&&(s=t.length);for(var r=s-h;0<r;){var e=r>>1,u=h+e;n(i,t[u])?r=e:(h=u+1,r-=e+1)}return h}function Jt(t,i){return t.C<i}function Gt(t,i){return t<i.C}function Qt(t,i,n){var h=i.rs(),s=i.es(),r=Xt(t,h,Jt),e=Zt(t,s,Gt);if(!n)return{from:r,to:e};var u=r,a=e;return r>0&&r<t.length&&t[r].C>=h&&(u=r-1),e>0&&e<t.length&&t[e-1].C<=s&&(a=e+1),{from:u,to:a}}var ti=function(){function t(t,i,n){this.Ve=!0,this.Pe=!0,this.ze=!0,this.Re=[],this.Ie=null,this.We=t,this.je=i,this.Ue=n}return t.prototype.V=function(t){this.Ve=!0,"data"===t&&(this.Pe=!0),"options"===t&&(this.ze=!0)},t.prototype.qe=function(){this.Pe&&(this.He(),this.Pe=!1),this.Ve&&(this.Ye(),this.Ve=!1),this.ze&&(this.Ke(),this.ze=!1)},t.prototype.$e=function(){this.Ie=null},t.prototype.Ye=function(){var t=this.We.$(),i=this.je.j();if(this.$e(),!i.ii()&&!t.ii()){var n=i.mr();if(null!==n&&0!==this.We.Yi().Xe()){var h=this.We.H();null!==h&&(this.Ie=Qt(this.Re,n,this.Ue),this.Ze(t,i,h.X))}}},t}(),ii=function(t){function i(i,n){return t.call(this,i,n,!0)||this}return r(i,t),i.prototype.Ze=function(t,i,n){i.Br(this.Re,m(this.Ie)),t.Ch(this.Re,n,m(this.Ie))},i.prototype.Je=function(t,i){return{C:t,D:i,p:NaN,g:NaN}},i.prototype.Ke=function(){},i.prototype.He=function(){var t=this,i=this.We.Ge();this.Re=this.We.Yi().Qe().map((function(n){var h=n.X[3];return t.tu(n.Rs,h,i)}))},i}(ti),ni=function(t){function i(i,n){var h=t.call(this,i,n)||this;return h.lt=new p,h.iu=new Kt,h.nu=new $t,h.lt.i([h.iu,h.nu]),h}return r(i,t),i.prototype.R=function(t,i){if(!this.We.q())return null;var n=this.We.vt();this.qe();var h={Be:n.lineType,m:this.Re,S:n.lineColor,ut:n.lineStyle,rt:n.lineWidth,Oe:n.topColor,Fe:n.bottomColor,Ee:t,M:this.Ie,Le:this.je.j().zr()};return this.iu._(h),this.nu._(h),this.lt},i.prototype.tu=function(t,i){return this.Je(t,i)},i}(ii);var hi=function(){function t(){this.tt=null,this.hu=0,this.su=0}return t.prototype._=function(t){this.tt=t},t.prototype.h=function(t,i,n,h){if(null!==this.tt&&0!==this.tt.Yi.length&&null!==this.tt.M){if(this.hu=this.ru(i),this.hu>=2)Math.max(1,Math.floor(i))%2!=this.hu%2&&this.hu--;this.su=this.tt.eu?Math.min(this.hu,Math.floor(i)):this.hu;for(var s=null,r=this.su<=this.hu&&this.tt.zr>=Math.floor(1.5*i),e=this.tt.M.from;e<this.tt.M.to;++e){var u=this.tt.Yi[e];s!==u.et&&(t.fillStyle=u.et,s=u.et);var a=Math.floor(.5*this.su),o=Math.round(u.p*i),l=o-a,f=this.su,c=l+f-1,v=Math.min(u.Lh,u.Eh),_=Math.max(u.Lh,u.Eh),d=Math.round(v*i)-a,w=Math.round(_*i)+a,M=Math.max(w-d,this.su);t.fillRect(l,d,f,M);var b=Math.ceil(1.5*this.hu);if(r){if(this.tt.uu){var m=o-b,p=Math.max(d,Math.round(u.Ah*i)-a),g=p+f-1;g>d+M-1&&(p=(g=d+M-1)-f+1),t.fillRect(m,p,l-m,g-p+1)}var y=o+b,k=Math.max(d,Math.round(u.Bh*i)-a),x=k+f-1;x>d+M-1&&(k=(x=d+M-1)-f+1),t.fillRect(c+1,k,y-c,x-k+1)}}}},t.prototype.ru=function(t){var i=Math.floor(t);return Math.max(i,Math.floor(function(t,i){return Math.floor(.3*t*i)}(l(this.tt).zr,t)))},t}(),si=function(t){function i(i,n){return t.call(this,i,n,!1)||this}return r(i,t),i.prototype.Ze=function(t,i,n){i.Br(this.Re,m(this.Ie)),t.Th(this.Re,n,m(this.Ie))},i.prototype.au=function(t,i,n){return{C:t,open:i.X[0],high:i.X[1],low:i.X[2],close:i.X[3],p:NaN,Ah:NaN,Lh:NaN,Eh:NaN,Bh:NaN}},i.prototype.He=function(){var t=this,i=this.We.Ge();this.Re=this.We.Yi().Qe().map((function(n){return t.tu(n.Rs,n,i)}))},i}(ti),ri=function(t){function i(){var i=null!==t&&t.apply(this,arguments)||this;return i.lt=new hi,i}return r(i,t),i.prototype.R=function(t,i){if(!this.We.q())return null;var n=this.We.vt();this.qe();var h={Yi:this.Re,zr:this.je.j().zr(),uu:n.openVisible,eu:n.thinBars,M:this.Ie};return this.lt._(h),this.lt},i.prototype.Ke=function(){var t=this;this.Re.forEach((function(i){i.et=t.We.Ge().lu(i.C).ou}))},i.prototype.tu=function(t,i,n){return e(e({},this.au(t,i,n)),{et:n.lu(t).ou})},i}(si),ei=function(){function t(){this.tt=null,this.hu=0}return t.prototype._=function(t){this.tt=t},t.prototype.h=function(t,i,n,h){if(null!==this.tt&&0!==this.tt.Yi.length&&null!==this.tt.M){if(this.hu=function(t,i){if(t>=2.5&&t<=4)return Math.floor(3*i);var n=1-.2*Math.atan(Math.max(4,t)-4)/(.5*Math.PI),h=Math.floor(t*n*i),s=Math.floor(t*i),r=Math.min(h,s);return Math.max(Math.floor(i),r)}(this.tt.zr,i),this.hu>=2)Math.floor(i)%2!=this.hu%2&&this.hu--;var s=this.tt.Yi;this.tt.fu&&this.cu(t,s,this.tt.M,i),this.tt.vu&&this._u(t,s,this.tt.M,this.tt.zr,i);var r=this.du(i);(!this.tt.vu||this.hu>2*r)&&this.wu(t,s,this.tt.M,i)}},t.prototype.cu=function(t,i,n,h){if(null!==this.tt){var s="",r=Math.min(Math.floor(h),Math.floor(this.tt.zr*h));r=Math.max(Math.floor(h),Math.min(r,this.hu));for(var e=Math.floor(.5*r),u=null,a=n.from;a<n.to;a++){var o=i[a];o.Mu!==s&&(t.fillStyle=o.Mu,s=o.Mu);var l=Math.round(Math.min(o.Ah,o.Bh)*h),f=Math.round(Math.max(o.Ah,o.Bh)*h),c=Math.round(o.Lh*h),v=Math.round(o.Eh*h),_=Math.round(h*o.p)-e,d=_+r-1;null!==u&&(_=Math.max(u+1,_),_=Math.min(_,d));var w=d-_+1;t.fillRect(_,c,w,l-c),t.fillRect(_,f+1,w,v-f),u=d}}},t.prototype.du=function(t){var i=Math.floor(1*t);this.hu<=2*i&&(i=Math.floor(.5*(this.hu-1)));var n=Math.max(Math.floor(t),i);return this.hu<=2*n?Math.max(Math.floor(t),Math.floor(1*t)):n},t.prototype._u=function(t,i,n,h,s){if(null!==this.tt)for(var r="",e=this.du(s),u=null,a=n.from;a<n.to;a++){var o=i[a];o.Z!==r&&(t.fillStyle=o.Z,r=o.Z);var l=Math.round(o.p*s)-Math.floor(.5*this.hu),f=l+this.hu-1,c=Math.round(Math.min(o.Ah,o.Bh)*s),v=Math.round(Math.max(o.Ah,o.Bh)*s);if(null!==u&&(l=Math.max(u+1,l),l=Math.min(l,f)),this.tt.zr*s>2*e)P(t,l,c,f-l+1,v-c+1,e);else{var _=f-l+1;t.fillRect(l,c,_,v-c+1)}u=f}},t.prototype.wu=function(t,i,n,h){if(null!==this.tt)for(var s="",r=this.du(h),e=n.from;e<n.to;e++){var u=i[e],a=Math.round(Math.min(u.Ah,u.Bh)*h),o=Math.round(Math.max(u.Ah,u.Bh)*h),l=Math.round(u.p*h)-Math.floor(.5*this.hu),f=l+this.hu-1;if(u.et!==s){var c=u.et;t.fillStyle=c,s=c}this.tt.vu&&(l+=r,a+=r,f-=r,o-=r),a>o||t.fillRect(l,a,f-l+1,o-a+1)}},t}(),ui=function(t){function i(){var i=null!==t&&t.apply(this,arguments)||this;return i.lt=new ei,i}return r(i,t),i.prototype.R=function(t,i){if(!this.We.q())return null;var n=this.We.vt();this.qe();var h={Yi:this.Re,zr:this.je.j().zr(),fu:n.wickVisible,vu:n.borderVisible,M:this.Ie};return this.lt._(h),this.lt},i.prototype.Ke=function(){var t=this;this.Re.forEach((function(i){var n=t.We.Ge().lu(i.C);i.et=n.ou,i.Mu=n.bu,i.Z=n.mu}))},i.prototype.tu=function(t,i,n){var h=n.lu(t);return e(e({},this.au(t,i,n)),{et:h.ou,Mu:h.bu,Z:h.mu})},i}(si),ai=function(){function t(){this.tt=null,this.pu=[]}return t.prototype._=function(t){this.tt=t,this.pu=[]},t.prototype.h=function(t,i,n,h){if(null!==this.tt&&0!==this.tt.m.length&&null!==this.tt.M){this.pu.length||this.gu(i);for(var s=Math.max(1,Math.floor(i)),r=Math.round(this.tt.yu*i)-Math.floor(s/2),e=r+s,u=this.tt.M.from;u<this.tt.M.to;u++){var a=this.tt.m[u],o=this.pu[u-this.tt.M.from],l=Math.round(a.g*i);t.fillStyle=a.et;var f=void 0,c=void 0;l<=r?(f=l,c=e):(f=r,c=l-Math.floor(s/2)+s),t.fillRect(o.rs,f,o.es-o.rs+1,c-f)}}},t.prototype.gu=function(t){if(null!==this.tt&&0!==this.tt.m.length&&null!==this.tt.M){var i=Math.ceil(this.tt.zr*t)<=1?0:Math.max(1,Math.floor(t)),n=Math.round(this.tt.zr*t)-i;this.pu=new Array(this.tt.M.to-this.tt.M.from);for(var h=this.tt.M.from;h<this.tt.M.to;h++){var s,r=this.tt.m[h],e=Math.round(r.p*t),u=void 0,a=void 0;if(n%2)u=e-(s=(n-1)/2),a=e+s;else u=e-(s=n/2),a=e+s-1;this.pu[h-this.tt.M.from]={rs:u,es:a,ku:e,xu:r.p*t,C:r.C}}for(h=this.tt.M.from+1;h<this.tt.M.to;h++){var o=this.pu[h-this.tt.M.from],l=this.pu[h-this.tt.M.from-1];o.C===l.C+1&&(o.rs-l.es!==i+1&&(l.ku>l.xu?l.es=o.rs-i-1:o.rs=l.es+i+1))}var f=Math.ceil(this.tt.zr*t);for(h=this.tt.M.from;h<this.tt.M.to;h++){(o=this.pu[h-this.tt.M.from]).es<o.rs&&(o.es=o.rs);var c=o.es-o.rs+1;f=Math.min(c,f)}if(i>0&&f<4)for(h=this.tt.M.from;h<this.tt.M.to;h++){(c=(o=this.pu[h-this.tt.M.from]).es-o.rs+1)>f&&(o.ku>o.xu?o.es-=1:o.rs+=1)}}else this.pu=[]},t}();function oi(t){return{m:[],zr:t,yu:NaN,M:null}}function li(t,i,n){return{C:t,D:i,p:NaN,g:NaN,et:n}}var fi=function(t){function i(i,n){var h=t.call(this,i,n,!1)||this;return h.T=new p,h.Nu=oi(0),h.lt=new ai,h}return r(i,t),i.prototype.R=function(t,i){return this.We.q()?(this.qe(),this.T):null},i.prototype.He=function(){var t=this.je.j().zr();this.Nu=oi(t);for(var i=0,n=0,h=this.We.vt().color,s=0,r=this.We.Yi().Qe();s<r.length;s++){var e=r[s],u=e.X[3],a=void 0!==e.et?e.et:h,o=li(e.Rs,u,a);++i<this.Nu.m.length?this.Nu.m[i]=o:this.Nu.m.push(o),this.Re[n++]={C:e.Rs,p:0}}this.lt._(this.Nu),this.T.i([this.lt])},i.prototype.Ke=function(){},i.prototype.$e=function(){t.prototype.$e.call(this),this.Nu.M=null},i.prototype.Ze=function(t,i,n){if(null!==this.Ie){var h=i.zr(),s=l(i.mr()),r=t.K(this.We.vt().base,n);i.Br(this.Nu.m),t.Ch(this.Nu.m,n),this.Nu.yu=r,this.Nu.M=Qt(this.Nu.m,s,!1),this.Nu.zr=h,this.lt._(this.Nu)}},i}(ti),ci=function(t){function i(i,n){var h=t.call(this,i,n)||this;return h.nu=new $t,h}return r(i,t),i.prototype.R=function(t,i){if(!this.We.q())return null;var n=this.We.vt();this.qe();var h={m:this.Re,S:n.color,ut:n.lineStyle,Be:n.lineType,rt:n.lineWidth,M:this.Ie,Le:this.je.j().zr()};return this.nu._(h),this.nu},i.prototype.tu=function(t,i){return this.Je(t,i)},i}(ii),vi=/[2-9]/g,_i=function(){function t(t){void 0===t&&(t=50),this.xs=new Map,this.Su=0,this.Cu=Array.from(new Array(t))}return t.prototype.Du=function(){this.xs.clear(),this.Cu.fill(void 0)},t.prototype.Vt=function(t,i,n){var h=n||vi,s=String(i).replace(h,"0"),r=this.xs.get(s);if(void 0===r){if(0===(r=t.measureText(s).width)&&0!==i.length)return 0;var e=this.Cu[this.Su];void 0!==e&&this.xs.delete(e),this.Cu[this.Su]=s,this.Su=(this.Su+1)%this.Cu.length,this.xs.set(s,r)}return r},t}(),di=function(){function t(t){this.Tu=null,this.le=null,this.Au="right",this.$s=0,this.Lu=t}return t.prototype.Eu=function(t,i,n,h){this.Tu=t,this.le=i,this.$s=n,this.Au=h},t.prototype.h=function(t,i){null!==this.le&&null!==this.Tu&&this.Tu.h(t,this.le,this.Lu,this.$s,this.Au,i)},t}(),wi=function(){function t(t,i,n){this.Bu=t,this.Lu=new _i(50),this.Ou=i,this.O=n,this.ce=-1,this.lt=new di(this.Lu)}return t.prototype.R=function(t,i){var n=this.O.Fu(this.Ou);if(null===n)return null;var h=n.Vu(this.Ou)?n.Ti():this.Ou.$();if(null===h)return null;var s=n.Pu(h);if("overlay"===s)return null;var r=this.O.zu();return r.zt!==this.ce&&(this.ce=r.zt,this.Lu.Du()),this.lt.Eu(this.Bu.Jt(),r,i,s),this.lt},t}(),Mi=function(){function t(){this.tt=null}return t.prototype._=function(t){this.tt=t},t.prototype.h=function(t,i,s,r){if(null!==this.tt&&!1!==this.tt.q){var e=Math.round(this.tt.g*i);if(!(e<0||e>Math.ceil(this.tt.bt*i))){var u=Math.ceil(this.tt.Mt*i);t.lineCap="butt",t.strokeStyle=this.tt.et,t.lineWidth=Math.floor(this.tt.rt*i),n(t,this.tt.ut),h(t,e,0,u)}}},t}(),bi=function(){function t(t){this.Ru={Mt:0,bt:0,g:0,et:"rgba(0, 0, 0, 0)",rt:1,ut:0,q:!1},this.Iu=new Mi,this.B=!0,this.We=t,this.je=t._t(),this.Iu._(this.Ru)}return t.prototype.V=function(){this.B=!0},t.prototype.R=function(t,i){return this.We.q()?(this.B&&(this.Wu(t,i),this.B=!1),this.Iu):null},t}(),mi=function(t){function i(i){return t.call(this,i)||this}return r(i,t),i.prototype.Wu=function(t,i){this.Ru.q=!1;var n=this.We.$(),h=n.ah().ah;if(2===h||3===h){var s=this.We.vt();if(s.baseLineVisible&&this.We.q()){var r=this.We.H();null!==r&&(this.Ru.q=!0,this.Ru.g=n.K(r.X,r.X),this.Ru.Mt=i,this.Ru.bt=t,this.Ru.et=s.baseLineColor,this.Ru.rt=s.baseLineWidth,this.Ru.ut=s.baseLineStyle)}}},i}(bi),pi=function(){function t(){this.tt=null}return t.prototype._=function(t){this.tt=t},t.prototype.ju=function(){return this.tt},t.prototype.h=function(t,i,n,h){var s=this.tt;if(null!==s){t.save();var r=Math.max(1,Math.floor(i)),e=r%2/2,u=Math.round(s.xu.x*i)+e,a=s.xu.y*i;t.fillStyle=s.Uu,t.beginPath();var o=Math.max(2,1.5*s.qu)*i;t.arc(u,a,o,0,2*Math.PI,!1),t.fill(),t.fillStyle=s.Hu,t.beginPath(),t.arc(u,a,s.N*i,0,2*Math.PI,!1),t.fill(),t.lineWidth=r,t.strokeStyle=s.Yu,t.beginPath(),t.arc(u,a,s.N*i+r/2,0,2*Math.PI,!1),t.stroke(),t.restore()}},t}(),gi=[{Ku:0,$u:.25,Xu:4,Zu:10,Ju:.25,Gu:0,Qu:.4,ta:.8},{Ku:.25,$u:.525,Xu:10,Zu:14,Ju:0,Gu:0,Qu:.8,ta:0},{Ku:.525,$u:1,Xu:14,Zu:14,Ju:0,Gu:0,Qu:0,ta:0}];function yi(t,i,n,h){return function(t,i){if("transparent"===t)return t;var n=F(t),h=n[3];return"rgba(".concat(n[0],", ").concat(n[1],", ").concat(n[2],", ").concat(i*h,")")}(t,n+(h-n)*i)}function ki(t,i){for(var n,h=t%2600/2600,s=0,r=gi;s<r.length;s++){var e=r[s];if(h>=e.Ku&&h<=e.$u){n=e;break}}a(void 0!==n,"Last price animation internal logic error");var u,o,l,f=(h-n.Ku)/(n.$u-n.Ku);return{Hu:yi(i,f,n.Ju,n.Gu),Yu:yi(i,f,n.Qu,n.ta),N:(u=f,o=n.Xu,l=n.Zu,o+(l-o)*u)}}var xi=function(){function t(t){this.lt=new pi,this.B=!0,this.ia=!0,this.na=performance.now(),this.ha=this.na-1,this.sa=t}return t.prototype.V=function(t){if(this.B=!0,"data"===t&&2===this.sa.vt().lastPriceAnimation){var i=performance.now(),n=this.ha-i;if(n>0)return void(n<650&&(this.ha+=2600));this.na=i,this.ha=i+2600}},t.prototype.ra=function(){this.ia=!0},t.prototype.q=function(){return 0!==this.sa.vt().lastPriceAnimation},t.prototype.ea=function(){switch(this.sa.vt().lastPriceAnimation){case 0:return!1;case 1:return!0;case 2:return performance.now()<=this.ha}},t.prototype.R=function(t,i){return this.B?(this.I(t,i),this.B=!1,this.ia=!1):this.ia&&(this.ua(),this.ia=!1),this.lt},t.prototype.I=function(t,i){this.lt._(null);var n=this.sa._t().j(),h=n.mr(),s=this.sa.H();if(null!==h&&null!==s){var r=this.sa.aa(!0,!0);if(h.Fs(r.Rs)){var e={x:n.G(r.Rs),y:this.sa.$().K(r.D,s.X)},u=r.et,a=this.sa.vt().lineWidth,o=ki(this.oa(),u);this.lt._({Uu:u,qu:a,Hu:o.Hu,Yu:o.Yu,N:o.N,xu:e})}}},t.prototype.ua=function(){var t=this.lt.ju();if(null!==t){var i=ki(this.oa(),t.Uu);t.Hu=i.Hu,t.Yu=i.Yu,t.N=i.N}},t.prototype.oa=function(){return this.ea()?performance.now()-this.na:2599},t}();function Ni(t,i){return et(Math.min(Math.max(t,12),30)*i)}function Si(t,i){switch(t){case"arrowDown":case"arrowUp":return Ni(i,1);case"circle":return Ni(i,.8);case"square":return Ni(i,.7)}}function Ci(t){return rt(Ni(t,1))}function Di(t){return Math.max(Ni(t,.1),3)}function Ti(t,i,n,h,s){var r=Si("square",n),e=(r-1)/2,u=t-e,a=i-e;return h>=u&&h<=u+r&&s>=a&&s<=a+r}function Ai(t,i,n,h,s){var r=(Si("arrowUp",s)-1)/2,e=(et(s/2)-1)/2;i.beginPath(),t?(i.moveTo(n-r,h),i.lineTo(n,h-r),i.lineTo(n+r,h),i.lineTo(n+e,h),i.lineTo(n+e,h+r),i.lineTo(n-e,h+r),i.lineTo(n-e,h)):(i.moveTo(n-r,h),i.lineTo(n,h+r),i.lineTo(n+r,h),i.lineTo(n+e,h),i.lineTo(n+e,h-r),i.lineTo(n-e,h-r),i.lineTo(n-e,h)),i.fill()}function Li(t,i,n,h,s,r){return Ti(i,n,h,s,r)}var Ei=function(t){function i(){var i=null!==t&&t.apply(this,arguments)||this;return i.tt=null,i.Lu=new _i,i.ce=-1,i.ve="",i.la="",i}return r(i,t),i.prototype._=function(t){this.tt=t},i.prototype.Eu=function(t,i){this.ce===t&&this.ve===i||(this.ce=t,this.ve=i,this.la=Wt(t,i),this.Lu.Du())},i.prototype.fa=function(t,i){if(null===this.tt||null===this.tt.M)return null;for(var n=this.tt.M.from;n<this.tt.M.to;n++){var h=this.tt.m[n];if(Oi(h,t,i))return{ca:h.va,_a:h._a}}return null},i.prototype.u=function(t,i,n){if(null!==this.tt&&null!==this.tt.M){t.textBaseline="middle",t.font=this.la;for(var h=this.tt.M.from;h<this.tt.M.to;h++){var s=this.tt.m[h];void 0!==s.Ft&&(s.Ft.Mt=this.Lu.Vt(t,s.Ft.da),s.Ft.bt=this.ce),Bi(s,t)}}},i}(g);function Bi(t,i){i.fillStyle=t.et,void 0!==t.Ft&&function(t,i,n,h){t.fillText(i,n,h)}(i,t.Ft.da,t.p-t.Ft.Mt/2,t.Ft.g),function(t,i){if(0===t.Xe)return;switch(t.wa){case"arrowDown":return void Ai(!1,i,t.p,t.g,t.Xe);case"arrowUp":return void Ai(!0,i,t.p,t.g,t.Xe);case"circle":return void function(t,i,n,h){var s=(Si("circle",h)-1)/2;t.beginPath(),t.arc(i,n,s,0,2*Math.PI,!1),t.fill()}(i,t.p,t.g,t.Xe);case"square":return void function(t,i,n,h){var s=Si("square",h),r=(s-1)/2,e=i-r,u=n-r;t.fillRect(e,u,s,s)}(i,t.p,t.g,t.Xe)}t.wa}(t,i)}function Oi(t,i,n){return!(void 0===t.Ft||!function(t,i,n,h,s,r){var e=h/2;return s>=t&&s<=t+n&&r>=i-e&&r<=i+e}(t.p,t.Ft.g,t.Ft.Mt,t.Ft.bt,i,n))||function(t,i,n){if(0===t.Xe)return!1;switch(t.wa){case"arrowDown":case"arrowUp":return Li(0,t.p,t.g,t.Xe,i,n);case"circle":return function(t,i,n,h,s){var r=2+Si("circle",n)/2,e=t-h,u=i-s;return Math.sqrt(e*e+u*u)<=r}(t.p,t.g,t.Xe,i,n);case"square":return Ti(t.p,t.g,t.Xe,i,n)}t.wa}(t,i,n)}function Fi(t,i,n,h,s,r,e,u,a){var o=v(n)?n:n.close,l=v(n)?n:n.high,f=v(n)?n:n.low,c=v(i.size)?Math.max(i.size,0):1,_=Ci(u.zr())*c,d=_/2;switch(t.Xe=_,i.position){case"inBar":return t.g=e.K(o,a),void(void 0!==t.Ft&&(t.Ft.g=t.g+d+r+.6*s));case"aboveBar":return t.g=e.K(l,a)-d-h.Ma,void 0!==t.Ft&&(t.Ft.g=t.g-d-.6*s,h.Ma+=1.2*s),void(h.Ma+=_+r);case"belowBar":return t.g=e.K(f,a)+d+h.ba,void 0!==t.Ft&&(t.Ft.g=t.g+d+r+.6*s,h.ba+=1.2*s),void(h.ba+=_+r)}i.position}var Vi=function(){function t(t,i){this.B=!0,this.ma=!0,this.pa=!0,this.ga=null,this.lt=new Ei,this.sa=t,this.ri=i,this.tt={m:[],M:null}}return t.prototype.V=function(t){this.B=!0,this.pa=!0,"data"===t&&(this.ma=!0)},t.prototype.R=function(t,i,n){if(!this.sa.q())return null;this.B&&this.qe();var h=this.ri.vt().layout;return this.lt.Eu(h.fontSize,h.fontFamily),this.lt._(this.tt),this.lt},t.prototype.ya=function(){if(this.pa){if(this.sa.ka().length>0){var t=this.ri.j().zr(),i=Di(t),n=1.5*Ci(t)+2*i;this.ga={above:n,below:n}}else this.ga=null;this.pa=!1}return this.ga},t.prototype.qe=function(){var t=this.sa.$(),i=this.ri.j(),n=this.sa.ka();this.ma&&(this.tt.m=n.map((function(t){return{C:t.time,p:0,g:0,Xe:0,wa:t.shape,et:t.color,va:t.va,_a:t.id,Ft:void 0}})),this.ma=!1);var h=this.ri.vt().layout;this.tt.M=null;var s=i.mr();if(null!==s){var r=this.sa.H();if(null!==r&&0!==this.tt.m.length){var e=NaN,u=Di(i.zr()),a={Ma:u,ba:u};this.tt.M=Qt(this.tt.m,s,!0);for(var o=this.tt.M.from;o<this.tt.M.to;o++){var l=n[o];l.time!==e&&(a.Ma=u,a.ba=u,e=l.time);var f=this.tt.m[o];f.p=i.G(l.time),void 0!==l.text&&l.text.length>0&&(f.Ft={da:l.text,g:0,Mt:0,bt:0});var c=this.sa.xa(l.time);null!==c&&Fi(f,l,c,a,h.fontSize,u,t,i,r.X)}this.B=!1}}},t}(),Pi=function(t){function i(i){return t.call(this,i)||this}return r(i,t),i.prototype.Wu=function(t,i){var n=this.Ru;n.q=!1;var h=this.We.vt();if(h.priceLineVisible&&this.We.q()){var s=this.We.aa(0===h.priceLineSource);s.Na||(n.q=!0,n.g=s.Rt,n.et=this.We.Sa(s.et),n.Mt=i,n.bt=t,n.rt=h.priceLineWidth,n.ut=h.priceLineStyle)}},i}(bi),zi=function(t){function i(i){var n=t.call(this)||this;return n.ft=i,n}return r(i,t),i.prototype.Gt=function(t,i,n){t.q=!1,i.q=!1;var h=this.ft;if(h.q()){var s=h.vt(),r=s.lastValueVisible,e=""!==h.Ca(),u=0===s.seriesLastValueMode,a=h.aa(!1);if(!a.Na){r&&(t.Ft=this.Da(a,r,u),t.q=0!==t.Ft.length),(e||u)&&(i.Ft=this.Ta(a,r,e,u),i.q=i.Ft.length>0);var o=h.Sa(a.et),l=V(o);n.kt=l.kt,n.et=l.xt,n.Rt=a.Rt,i.Z=h._t().J(a.Rt/h.$().bt()),t.Z=o}}},i.prototype.Ta=function(t,i,n,h){var s="",r=this.ft.Ca();return n&&0!==r.length&&(s+="".concat(r," ")),i&&h&&(s+=this.ft.$().fh()?t.Aa:t.La),s.trim()},i.prototype.Da=function(t,i,n){return i?n?this.ft.$().fh()?t.La:t.Aa:t.Ft:""},i}(U),Ri=function(){function t(t,i){this.Pn=t,this.Ea=i||null}return t.prototype.xh=function(){return this.Pn},t.prototype.us=function(){return this.Ea},t.prototype.bn=function(){return null===this.Pn?null:{priceRange:this.Pn.bn(),margins:this.Ea||void 0}},t.mn=function(i){return null===i?null:new t(it.mn(i.priceRange),i.margins)},t}(),Ii=function(t){function i(i,n){var h=t.call(this,i)||this;return h.Ba=n,h}return r(i,t),i.prototype.Wu=function(t,i){var n=this.Ru;if(n.q=!1,this.We.q()){var h=this.Ba.Oa();if(null!==h){var s=this.Ba.vt();n.q=!0,n.g=h,n.et=s.color,n.Mt=i,n.bt=t,n.rt=s.lineWidth,n.ut=s.lineStyle}}},i}(bi),Wi=function(t){function i(i,n){var h=t.call(this)||this;return h.sa=i,h.Ba=n,h}return r(i,t),i.prototype.Gt=function(t,i,n){t.q=!1,i.q=!1;var h=this.Ba.vt(),s=h.axisLabelVisible,r=""!==h.title,e=this.sa;if(s&&e.q()){var u=this.Ba.Oa();if(null!==u){r&&(i.Ft=h.title,i.q=!0),i.Z=e._t().J(u/e.$().bt()),t.Ft=e.$().Zh(h.price),t.q=!0;var a=V(h.color);n.kt=a.kt,n.et=a.xt,n.Rt=u}}},i}(U),ji=function(){function t(t,i){this.sa=t,this.Si=i,this.Fa=new Ii(t,this),this.Bu=new Wi(t,this),this.Va=new wi(this.Bu,t,t._t())}return t.prototype.rh=function(t){c(this.Si,t),this.V(),this.sa._t().Pr()},t.prototype.vt=function(){return this.Si},t.prototype._i=function(){return[this.Fa,this.Va]},t.prototype.Pa=function(){return this.Bu},t.prototype.V=function(){this.Fa.V(),this.Bu.V()},t.prototype.Oa=function(){var t=this.sa,i=t.$();if(t._t().j().ii()||i.ii())return null;var n=t.H();return null===n?null:i.K(this.Si.price,n.X)},t}(),Ui=function(t){function i(i){var n=t.call(this)||this;return n.ri=i,n}return r(i,t),i.prototype._t=function(){return this.ri},i}($),qi={ou:"",mu:"",bu:""},Hi=function(){function t(t){this.sa=t}return t.prototype.lu=function(t,i){var n=this.sa.za(),h=this.sa.vt();switch(n){case"Line":return this.Ra(h);case"Area":return this.Ia(h);case"Bar":return this.Wa(h,t,i);case"Candlestick":return this.ja(h,t,i);case"Histogram":return this.Ua(h,t,i)}throw new Error("Unknown chart style")},t.prototype.Wa=function(t,i,n){var h=e({},qi),s=t.upColor,r=t.downColor,u=s,a=r,o=l(this.qa(i,n)),c=f(o.X[0])<=f(o.X[3]);return h.ou=c?s:r,h.mu=c?u:a,h},t.prototype.ja=function(t,i,n){var h=e({},qi),s=t.upColor,r=t.downColor,u=t.borderUpColor,a=t.borderDownColor,o=t.wickUpColor,c=t.wickDownColor,v=l(this.qa(i,n)),_=f(v.X[0])<=f(v.X[3]);return h.ou=_?s:r,h.mu=_?u:a,h.bu=_?o:c,h},t.prototype.Ia=function(t){return e(e({},qi),{ou:t.lineColor})},t.prototype.Ra=function(t){return e(e({},qi),{ou:t.color})},t.prototype.Ua=function(t,i,n){var h=e({},qi),s=l(this.qa(i,n));return h.ou=void 0!==s.et?s.et:t.color,h},t.prototype.qa=function(t,i){return void 0!==i?i.X:this.sa.Yi().Ha(t)},t}(),Yi=30,Ki=function(){function t(){this.Ya=[],this.Ka=new Map,this.$a=new Map}return t.prototype.Xa=function(){this.Ya=[],this.Ka.clear(),this.$a.clear()},t.prototype.Za=function(){return this.Xe()>0?this.Ya[this.Ya.length-1]:null},t.prototype.Ja=function(){return this.Xe()>0?this.Ga(0):null},t.prototype.Hi=function(){return this.Xe()>0?this.Ga(this.Ya.length-1):null},t.prototype.Xe=function(){return this.Ya.length},t.prototype.ii=function(){return 0===this.Xe()},t.prototype.Fs=function(t){return null!==this.Qa(t,0)},t.prototype.Ha=function(t){return this.io(t)},t.prototype.io=function(t,i){void 0===i&&(i=0);var n=this.Qa(t,i);return null===n?null:e(e({},this.no(n)),{Rs:this.Ga(n)})},t.prototype.Qe=function(){return this.Ya},t.prototype.ho=function(t,i,n){if(this.ii())return null;for(var h=null,s=0,r=n;s<r.length;s++){var e=r[s];h=$i(h,this.so(t,i,e))}return h},t.prototype.dn=function(t){0!==t.length&&(this.ii()||t[t.length-1].Rs<this.Ya[0].Rs?this.ro(t):t[0].Rs>this.Ya[this.Ya.length-1].Rs?this.eo(t):1!==t.length||t[0].Rs!==this.Ya[this.Ya.length-1].Rs?this.uo(t):this.ao(t[0]))},t.prototype.Ga=function(t){return this.Ya[t].Rs},t.prototype.no=function(t){return this.Ya[t]},t.prototype.Qa=function(t,i){var n=this.oo(t);if(null===n&&0!==i)switch(i){case-1:return this.lo(t);case 1:return this.fo(t);default:throw new TypeError("Unknown search mode")}return n},t.prototype.lo=function(t){var i=this.co(t);return i>0&&(i-=1),i!==this.Ya.length&&this.Ga(i)<t?i:null},t.prototype.fo=function(t){var i=this.vo(t);return i!==this.Ya.length&&t<this.Ga(i)?i:null},t.prototype.oo=function(t){var i=this.co(t);return i===this.Ya.length||t<this.Ya[i].Rs?null:i},t.prototype.co=function(t){return Xt(this.Ya,t,(function(t,i){return t.Rs<i}))},t.prototype.vo=function(t){return Zt(this.Ya,t,(function(t,i){return i.Rs>t}))},t.prototype._o=function(t,i,n){for(var h=null,s=t;s<i;s++){var r=this.Ya[s].X[n];Number.isNaN(r)||(null===h?h={do:r,wo:r}:(r<h.do&&(h.do=r),r>h.wo&&(h.wo=r)))}return h},t.prototype.Mo=function(t){var i=Math.floor(t.Rs/Yi);this.Ka.forEach((function(t){return t.delete(i)}))},t.prototype.ro=function(t){a(0!==t.length,"plotRows should not be empty"),this.$a.clear(),this.Ka.clear(),this.Ya=t.concat(this.Ya)},t.prototype.eo=function(t){a(0!==t.length,"plotRows should not be empty"),this.$a.clear(),this.Ka.clear(),this.Ya=this.Ya.concat(t)},t.prototype.ao=function(t){a(!this.ii(),"plot list should not be empty"),a(this.Ya[this.Ya.length-1].Rs===t.Rs,"last row index should match new row index"),this.Mo(t),this.$a.delete(t.Rs),this.Ya[this.Ya.length-1]=t},t.prototype.uo=function(t){a(0!==t.length,"plot rows should not be empty"),this.$a.clear(),this.Ka.clear(),this.Ya=function(t,i){var n=function(t,i){var n=t.length,h=i.length,s=n+h,r=0,e=0;for(;r<n&&e<h;)t[r].Rs<i[e].Rs?r++:t[r].Rs>i[e].Rs?e++:(r++,e++,s--);return s}(t,i),h=new Array(n),s=0,r=0,e=t.length,u=i.length,a=0;for(;s<e&&r<u;)t[s].Rs<i[r].Rs?(h[a]=t[s],s++):t[s].Rs>i[r].Rs?(h[a]=i[r],r++):(h[a]=i[r],s++,r++),a++;for(;s<e;)h[a]=t[s],s++,a++;for(;r<u;)h[a]=i[r],r++,a++;return h}(this.Ya,t)},t.prototype.so=function(t,i,n){if(this.ii())return null;var h=null,s=l(this.Ja()),r=l(this.Hi()),e=Math.max(t,s),u=Math.min(i,r),a=Math.ceil(e/Yi)*Yi,o=Math.max(a,Math.floor(u/Yi)*Yi),f=this.co(e),c=this.vo(Math.min(u,a,i));h=$i(h,this._o(f,c,n));var v=this.Ka.get(n);void 0===v&&(v=new Map,this.Ka.set(n,v));for(var _=Math.max(a+1,e);_<o;_+=Yi){var d=Math.floor(_/Yi),w=v.get(d);if(void 0===w){var M=this.co(d*Yi),b=this.vo((d+1)*Yi-1);w=this._o(M,b,n),v.set(d,w)}h=$i(h,w)}f=this.co(o),c=this.vo(u);return h=$i(h,this._o(f,c,n))},t}();function $i(t,i){return null===t?i:null===i?t:{do:Math.min(t.do,i.do),wo:Math.max(t.wo,i.wo)}}var Xi=function(t){function i(i,n,h){var s=t.call(this,i)||this;s.tt=new Ki,s.Fa=new Pi(s),s.bo=[],s.mo=new mi(s),s.po=null,s.yo=null,s.ko=[],s.xo=[],s.No=null,s.Si=n,s.So=h;var r=new zi(s);return s.pi=[r],s.Va=new wi(r,s,i),"Area"!==h&&"Line"!==h||(s.po=new xi(s)),s.Co(),s.Do(),s}return r(i,t),i.prototype.un=function(){null!==this.No&&clearTimeout(this.No)},i.prototype.Sa=function(t){return this.Si.priceLineColor||t},i.prototype.aa=function(t,i){var n={Na:!0},h=this.$();if(this._t().j().ii()||h.ii()||this.tt.ii())return n;var s,r,e=this._t().j().mr(),u=this.H();if(null===e||null===u)return n;if(t){var a=this.tt.Za();if(null===a)return n;s=a,r=a.Rs}else{var o=this.tt.io(e.es(),-1);if(null===o)return n;if(null===(s=this.tt.Ha(o.Rs)))return n;r=o.Rs}var l=s.X[3],f=this.Ge().lu(r,{X:s}),c=h.K(l,u.X);return{Na:!1,D:i?l:void 0,Ft:h.ni(l,u.X),Aa:h.Zh(l),La:h.Gh(l,u.X),et:f.ou,Rt:c,Rs:r}},i.prototype.Ge=function(){return null!==this.yo||(this.yo=new Hi(this)),this.yo},i.prototype.vt=function(){return this.Si},i.prototype.rh=function(t){var i=t.priceScaleId;void 0!==i&&i!==this.Si.priceScaleId&&this._t().To(this,i),c(this.Si,t),null!==this.ai&&void 0!==t.scaleMargins&&this.ai.rh({scaleMargins:t.scaleMargins}),void 0!==t.priceFormat&&this.Co(),this._t().Ao(this),this._t().Lo(),this.Ei.V("options")},i.prototype.Eo=function(){this.tt.Xa(),this.Do()},i.prototype.Bo=function(t,i){var n;i&&this.tt.Xa(),this.tt.dn(t),this.Oo(),this.Ei.V("data"),this.Ci.V("data"),null===(n=this.po)||void 0===n||n.V("data");var h=this._t().Fu(this);this._t().Fo(h),this._t().Ao(this),this._t().Lo(),this._t().Pr()},i.prototype.Vo=function(t){this.ko=t.map((function(t){return e({},t)})),this.Oo();var i=this._t().Fu(this);this.Ci.V("data"),this._t().Fo(i),this._t().Ao(this),this._t().Lo(),this._t().Pr()},i.prototype.ka=function(){return this.xo},i.prototype.Po=function(t){var i=new ji(this,t);return this.bo.push(i),this._t().Ao(this),i},i.prototype.zo=function(t){var i=this.bo.indexOf(t);-1!==i&&this.bo.splice(i,1),this._t().Ao(this)},i.prototype.za=function(){return this.So},i.prototype.H=function(){var t=this.Ro();return null===t?null:{X:t.X[3],Ih:t.C}},i.prototype.Ro=function(){var t=this._t().j().mr();if(null===t)return null;var i=t.rs();return this.tt.io(i,1)},i.prototype.Yi=function(){return this.tt},i.prototype.xa=function(t){var i=this.tt.Ha(t);return null===i?null:"Bar"===this.So||"Candlestick"===this.So?{open:i.X[0],high:i.X[1],low:i.X[2],close:i.X[3]}:i.X[3]},i.prototype.Io=function(t){var i=this,n=this.po;return null!==n&&n.q()?(null===this.No&&n.ea()&&(this.No=setTimeout((function(){i.No=null,i._t().Wo()}),0)),n.ra(),[n]):[]},i.prototype._i=function(){var t=[];this.jo()||t.push(this.mo);for(var i=0,n=this.bo;i<n.length;i++){var h=n[i];t.push.apply(t,h._i())}return t.push(this.Ei,this.Fa,this.Va,this.Ci),t},i.prototype.vi=function(t,i){if(i!==this.ai&&!this.jo())return[];for(var n=u([],this.pi,!0),h=0,s=this.bo;h<s.length;h++){var r=s[h];n.push(r.Pa())}return n},i.prototype.ss=function(t,i){var n=this;if(void 0!==this.Si.autoscaleInfoProvider){var h=this.Si.autoscaleInfoProvider((function(){var h=n.Uo(t,i);return null===h?null:h.bn()}));return Ri.mn(h)}return this.Uo(t,i)},i.prototype.ns=function(){return this.Si.priceFormat.minMove},i.prototype.$h=function(){return this.Jn},i.prototype.ji=function(){var t;this.Ei.V(),this.Ci.V();for(var i=0,n=this.pi;i<n.length;i++){n[i].V()}for(var h=0,s=this.bo;h<s.length;h++){s[h].V()}this.Fa.V(),this.mo.V(),null===(t=this.po)||void 0===t||t.V()},i.prototype.$=function(){return l(this.ai)},i.prototype.U=function(t){if(!(("Line"===this.So||"Area"===this.So)&&this.Si.crosshairMarkerVisible))return null;var i=this.tt.Ha(t);return null===i?null:{D:i.X[3],N:this.qo(),Z:this.Ho(),Y:this.Yo(t)}},i.prototype.Ca=function(){return this.Si.title},i.prototype.q=function(){return this.Si.visible},i.prototype.jo=function(){return!Ut(this.$().sh())},i.prototype.Uo=function(t,i){if(!_(t)||!_(i)||this.tt.ii())return null;var n="Line"===this.So||"Area"===this.So||"Histogram"===this.So?[3]:[2,1],h=this.tt.ho(t,i,n),s=null!==h?new it(h.do,h.wo):null;if("Histogram"===this.za()){var r=this.Si.base,e=new it(r,r);s=null!==s?s.dn(e):e}return new Ri(s,this.Ci.ya())},i.prototype.qo=function(){switch(this.So){case"Line":case"Area":return this.Si.crosshairMarkerRadius}return 0},i.prototype.Ho=function(){switch(this.So){case"Line":case"Area":var t=this.Si.crosshairMarkerBorderColor;if(0!==t.length)return t}return null},i.prototype.Yo=function(t){switch(this.So){case"Line":case"Area":var i=this.Si.crosshairMarkerBackgroundColor;if(0!==i.length)return i}return this.Ge().lu(t).ou},i.prototype.Co=function(){switch(this.Si.priceFormat.type){case"custom":this.Jn={format:this.Si.priceFormat.formatter};break;case"volume":this.Jn=new Ht(this.Si.priceFormat.precision);break;case"percent":this.Jn=new Q(this.Si.priceFormat.precision);break;default:var t=Math.pow(10,this.Si.priceFormat.precision);this.Jn=new G(t,this.Si.priceFormat.minMove*t)}null!==this.ai&&this.ai.eh()},i.prototype.Oo=function(){var t=this,i=this._t().j();if(i.ii()||0===this.tt.Xe())this.xo=[];else{var n=l(this.tt.Ja());this.xo=this.ko.map((function(h,s){var r=l(i.br(h.time,!0)),e=r<n?1:-1;return{time:l(t.tt.io(r,e)).Rs,position:h.position,shape:h.shape,color:h.color,id:h.id,va:s,text:h.text,size:h.size}}))}},i.prototype.Do=function(){switch(this.Ci=new Vi(this,this._t()),this.So){case"Bar":this.Ei=new ri(this,this._t());break;case"Candlestick":this.Ei=new ui(this,this._t());break;case"Line":this.Ei=new ci(this,this._t());break;case"Area":this.Ei=new ni(this,this._t());break;case"Histogram":this.Ei=new fi(this,this._t());break;default:throw Error("Unknown chart style assigned: "+this.So)}},i}(Ui),Zi=function(){function t(t){this.Si=t}return t.prototype.Ko=function(t,i,n){var h=t;if(0===this.Si.mode)return h;var s=n.Ti(),r=s.H();if(null===r)return h;var e=s.K(t,r),u=n.Fh().filter((function(t){return t instanceof Xi})).reduce((function(t,h){if(n.Vu(h)||!h.q())return t;var s=h.$(),r=h.Yi();if(s.ii()||!r.Fs(i))return t;var e=r.Ha(i);if(null===e)return t;var u=f(h.H());return t.concat([s.K(e.X[3],u.X)])}),[]);if(0===u.length)return h;u.sort((function(t,i){return Math.abs(t-e)-Math.abs(i-e)}));var a=u[0];return h=s.Ai(a,r)},t}(),Ji=function(){function t(){this.tt=null}return t.prototype._=function(t){this.tt=t},t.prototype.h=function(t,i,h,s){var r=this;if(null!==this.tt){var e=Math.max(1,Math.floor(i));t.lineWidth=e;var u=Math.ceil(this.tt.st*i),a=Math.ceil(this.tt.ht*i);!function(t,i){t.save(),t.lineWidth%2&&t.translate(.5,.5),i(),t.restore()}(t,(function(){var h=l(r.tt);if(h.$o){t.strokeStyle=h.Xo,n(t,h.Zo),t.beginPath();for(var s=0,o=h.Jo;s<o.length;s++){var f=o[s],c=Math.round(f.An*i);t.moveTo(c,-e),t.lineTo(c,u+e)}t.stroke()}if(h.Go){t.strokeStyle=h.Qo,n(t,h.tl),t.beginPath();for(var v=0,_=h.il;v<_.length;v++){var d=_[v],w=Math.round(d.An*i);t.moveTo(-e,w),t.lineTo(a+e,w)}t.stroke()}}))}},t}(),Gi=function(){function t(t){this.lt=new Ji,this.B=!0,this.wi=t}return t.prototype.V=function(){this.B=!0},t.prototype.R=function(t,i){if(this.B){var n=this.wi._t().vt().grid,h={st:t,ht:i,Go:n.horzLines.visible,$o:n.vertLines.visible,Qo:n.horzLines.color,Xo:n.vertLines.color,tl:n.horzLines.style,Zo:n.vertLines.style,il:this.wi.Ti().On(),Jo:this.wi._t().j().On()||[]};this.lt._(h),this.B=!1}return this.lt},t}(),Qi=function(){function t(t){this.Ei=new Gi(t)}return t.prototype.nl=function(){return this.Ei},t}(),tn=function(){function t(t,i){this.Yn=[],this.hl=new Map,this.Fn=0,this.$s=0,this.sl=1e3,this.Kn=null,this.rl=new tt,this.el=t,this.ri=i,this.ul=new Qi(this);var n=i.vt();this.al=this.ol("left",n.leftPriceScale),this.ll=this.ol("right",n.rightPriceScale),this.al.mh().Gi(this.fl.bind(this,this.al),this),this.ll.mh().Gi(this.fl.bind(this,this.al),this),this.cl(n)}return t.prototype.cl=function(t){if(t.leftPriceScale&&this.al.rh(t.leftPriceScale),t.rightPriceScale&&this.ll.rh(t.rightPriceScale),t.localization&&(this.al.eh(),this.ll.eh()),t.overlayPriceScales)for(var i=0,n=Array.from(this.hl.values());i<n.length;i++){var h=l(n[i][0].$());h.rh(t.overlayPriceScales),t.localization&&h.eh()}},t.prototype.vl=function(t){switch(t){case"left":return this.al;case"right":return this.ll}return this.hl.has(t)?o(this.hl.get(t))[0].$():null},t.prototype.un=function(){this._t()._l().sn(this),this.al.mh().sn(this),this.ll.mh().sn(this),this.Yn.forEach((function(t){t.un&&t.un()})),this.rl.rn()},t.prototype.dl=function(){return this.sl},t.prototype.wl=function(t){this.sl=t},t.prototype._t=function(){return this.ri},t.prototype.Mt=function(){return this.$s},t.prototype.bt=function(){return this.Fn},t.prototype.Tr=function(t){this.$s=t,this.Ml()},t.prototype.ph=function(t){var i=this;this.Fn=t,this.al.ph(t),this.ll.ph(t),this.Yn.forEach((function(n){if(i.Vu(n)){var h=n.$();null!==h&&h.ph(t)}})),this.Ml()},t.prototype.Fh=function(){return this.Yn},t.prototype.Vu=function(t){var i=t.$();return null===i||this.al!==i&&this.ll!==i},t.prototype.Ph=function(t,i,n){var h=void 0!==n?n:this.ml().bl+1;this.pl(t,i,h)},t.prototype.Rh=function(t){var i=this.Yn.indexOf(t);a(-1!==i,"removeDataSource: invalid data source"),this.Yn.splice(i,1);var n=l(t.$()).sh();if(this.hl.has(n)){var h=o(this.hl.get(n)),s=h.indexOf(t);-1!==s&&(h.splice(s,1),0===h.length&&this.hl.delete(n))}var r=t.$();r&&r.Fh().indexOf(t)>=0&&r.Rh(t),null!==r&&(r.zh(),this.gl(r)),this.Kn=null},t.prototype.Pu=function(t){return t===this.al?"left":t===this.ll?"right":"overlay"},t.prototype.yl=function(){return this.al},t.prototype.kl=function(){return this.ll},t.prototype.xl=function(t,i){t.jh(i)},t.prototype.Nl=function(t,i){t.Uh(i),this.Ml()},t.prototype.Sl=function(t){t.qh()},t.prototype.Cl=function(t,i){t.Hh(i)},t.prototype.Dl=function(t,i){t.Yh(i),this.Ml()},t.prototype.Tl=function(t){t.Kh()},t.prototype.Ml=function(){this.Yn.forEach((function(t){t.ji()}))},t.prototype.Ti=function(){var t=null;return this.ri.vt().rightPriceScale.visible&&0!==this.ll.Fh().length?t=this.ll:this.ri.vt().leftPriceScale.visible&&0!==this.al.Fh().length?t=this.al:0!==this.Yn.length&&(t=this.Yn[0].$()),null===t&&(t=this.ll),t},t.prototype.gl=function(t){null!==t&&t.lh()&&this.Al(t)},t.prototype.Ll=function(t){var i=this.el.mr();t.uh({dh:!0}),null!==i&&t.ts(i),this.Ml()},t.prototype.El=function(){this.Al(this.al),this.Al(this.ll)},t.prototype.Bl=function(){var t=this;this.gl(this.al),this.gl(this.ll),this.Yn.forEach((function(i){t.Vu(i)&&t.gl(i.$())})),this.Ml(),this.ri.Pr()},t.prototype.Vh=function(){return null===this.Kn&&(this.Kn=Mt(this.Yn)),this.Kn},t.prototype.Ol=function(){return this.rl},t.prototype.Fl=function(){return this.ul},t.prototype.Al=function(t){var i=t.Qh();if(i&&i.length>0&&!this.el.ii()){var n=this.el.mr();null!==n&&t.ts(n)}t.ji()},t.prototype.ml=function(){var t=this.Vh();if(0===t.length)return{Vl:0,bl:0};for(var i=0,n=0,h=0;h<t.length;h++){var s=t[h].li();null!==s&&(s<i&&(i=s),s>n&&(n=s))}return{Vl:i,bl:n}},t.prototype.pl=function(t,i,n){var h=this.vl(i);if(null===h&&(h=this.ol(i,this.ri.vt().overlayPriceScales)),this.Yn.push(t),!Ut(i)){var s=this.hl.get(i)||[];s.push(t),this.hl.set(i,s)}h.Ph(t),t.ci(h),t.fi(n),this.gl(h),this.Kn=null},t.prototype.fl=function(t,i,n){i.ah!==n.ah&&this.Al(t)},t.prototype.ol=function(t,i){var n=e({visible:!0,autoScale:!0},M(i)),h=new yt(t,n,this.ri.vt().layout,this.ri.vt().localization);return h.ph(this.bt()),h},t}(),nn=function(t){function i(i){var n=t.call(this)||this;return n.Pl=new Map,n.tt=i,n}return r(i,t),i.prototype.u=function(t){},i.prototype.l=function(t){if(this.tt.q){t.save();for(var i=0,n=0,h=this.tt.zl;n<h.length;n++){if(0!==(a=h[n]).Ft.length){t.font=a.St;var s=this.Rl(t,a.Ft);s>this.tt.Mt?a.Hr=this.tt.Mt/s:a.Hr=1,i+=a.Il*a.Hr}}var r=0;switch(this.tt.Wl){case"top":r=0;break;case"center":r=Math.max((this.tt.bt-i)/2,0);break;case"bottom":r=Math.max(this.tt.bt-i,0)}t.fillStyle=this.tt.et;for(var e=0,u=this.tt.zl;e<u.length;e++){var a=u[e];t.save();var o=0;switch(this.tt.jl){case"left":t.textAlign="left",o=a.Il/2;break;case"center":t.textAlign="center",o=this.tt.Mt/2;break;case"right":t.textAlign="right",o=this.tt.Mt-1-a.Il/2}t.translate(o,r),t.textBaseline="top",t.font=a.St,t.scale(a.Hr,a.Hr),t.fillText(a.Ft,0,a.Ul),t.restore(),r+=a.Il*a.Hr}t.restore()}},i.prototype.Rl=function(t,i){var n=this.ql(t.font),h=n.get(i);return void 0===h&&(h=t.measureText(i).width,n.set(i,h)),h},i.prototype.ql=function(t){var i=this.Pl.get(t);return void 0===i&&(i=new Map,this.Pl.set(t,i)),i},i}(g),hn=function(){function t(t){this.B=!0,this.ot={q:!1,et:"",bt:0,Mt:0,zl:[],Wl:"center",jl:"center"},this.lt=new nn(this.ot),this.ft=t}return t.prototype.V=function(){this.B=!0},t.prototype.R=function(t,i){return this.B&&(this.I(t,i),this.B=!1),this.lt},t.prototype.I=function(t,i){var n=this.ft.vt(),h=this.ot;h.q=n.visible,h.q&&(h.et=n.color,h.Mt=i,h.bt=t,h.jl=n.horzAlign,h.Wl=n.vertAlign,h.zl=[{Ft:n.text,St:Wt(n.fontSize,n.fontFamily,n.fontStyle),Il:1.2*n.fontSize,Ul:0,Hr:0}])},t}(),sn=function(t){function i(i,n){var h=t.call(this)||this;return h.Si=n,h.Ei=new hn(h),h}return r(i,t),i.prototype._i=function(){return[this.Ei]},i.prototype.vt=function(){return this.Si},i.prototype.ji=function(){this.Ei.V()},i}($),rn=function(){function t(t,i){this.Hl=[],this.Yl=[],this.$s=0,this.Kl=null,this.$l=null,this.Xl=new tt,this.Zl=new tt,this.Jl=null,this.Gl=t,this.Si=i,this.Ql=new jt(this),this.el=new Pt(this,i.timeScale,this.Si.localization),this.F=new X(this,i.crosshair),this.tf=new Zi(i.crosshair),this.if=new sn(this,i.watermark),this.nf(),this.Hl[0].wl(2e3),this.hf=this.sf(0),this.rf=this.sf(1)}return t.prototype.ef=function(){this.uf(new qt(3))},t.prototype.Pr=function(){this.uf(new qt(2))},t.prototype.Wo=function(){this.uf(new qt(1))},t.prototype.Ao=function(t){var i=this.af(t);this.uf(i)},t.prototype.lf=function(){return this.$l},t.prototype.ff=function(t){var i=this.$l;this.$l=t,null!==i&&this.Ao(i.cf),null!==t&&this.Ao(t.cf)},t.prototype.vt=function(){return this.Si},t.prototype.rh=function(t){c(this.Si,t),this.Hl.forEach((function(i){return i.cl(t)})),void 0!==t.timeScale&&this.el.rh(t.timeScale),void 0!==t.localization&&this.el.cr(t.localization),(t.leftPriceScale||t.rightPriceScale)&&this.Xl.rn(),this.hf=this.sf(0),this.rf=this.sf(1),this.ef()},t.prototype.vf=function(t,i){var n=this._f(t);null!==n&&(n.$.rh(i),this.Xl.rn())},t.prototype._f=function(t){for(var i=0,n=this.Hl;i<n.length;i++){var h=n[i],s=h.vl(t);if(null!==s)return{ct:h,$:s}}return null},t.prototype.j=function(){return this.el},t.prototype.df=function(){return this.Hl},t.prototype.wf=function(){return this.if},t.prototype.Mf=function(){return this.F},t.prototype.bf=function(){return this.Zl},t.prototype.mf=function(t,i){t.ph(i),this.Vr()},t.prototype.Tr=function(t){this.$s=t,this.el.Tr(this.$s),this.Hl.forEach((function(i){return i.Tr(t)})),this.Vr()},t.prototype.nf=function(t){var i=new tn(this.el,this);void 0!==t?this.Hl.splice(t,0,i):this.Hl.push(i);var n=void 0===t?this.Hl.length-1:t,h=new qt(3);return h.me(n,{pe:0,dh:!0}),this.uf(h),i},t.prototype.xl=function(t,i,n){t.xl(i,n)},t.prototype.Nl=function(t,i,n){t.Nl(i,n),this.Lo(),this.uf(this.pf(t,2))},t.prototype.Sl=function(t,i){t.Sl(i),this.uf(this.pf(t,2))},t.prototype.Cl=function(t,i,n){i.lh()||t.Cl(i,n)},t.prototype.Dl=function(t,i,n){i.lh()||(t.Dl(i,n),this.Lo(),this.uf(this.pf(t,2)))},t.prototype.Tl=function(t,i){i.lh()||(t.Tl(i),this.uf(this.pf(t,2)))},t.prototype.Ll=function(t,i){t.Ll(i),this.uf(this.pf(t,2))},t.prototype.gf=function(t){this.el.jh(t)},t.prototype.yf=function(t,i){var n=this.j();if(!n.ii()&&0!==i){var h=n.Mt();t=Math.max(1,Math.min(t,h)),n.Hr(t,i),this.Vr()}},t.prototype.kf=function(t){this.xf(0),this.Nf(t),this.Sf()},t.prototype.Cf=function(t){this.el.Uh(t),this.Vr()},t.prototype.Df=function(){this.el.qh(),this.Pr()},t.prototype.xf=function(t){this.Kl=t,this.el.Hh(t)},t.prototype.Nf=function(t){var i=!1;return null!==this.Kl&&Math.abs(t-this.Kl)>20&&(this.Kl=null,i=!0),this.el.Yh(t),this.Vr(),i},t.prototype.Sf=function(){this.el.Kh(),this.Pr(),this.Kl=null},t.prototype.P=function(){return this.Yl},t.prototype.Tf=function(t,i,n){this.F.Bi(t,i);var h=NaN,s=this.el.Or(t),r=this.el.mr();null!==r&&(s=Math.min(Math.max(r.rs(),s),r.es()));var e=n.Ti(),u=e.H();null!==u&&(h=e.Ai(i,u)),h=this.tf.Ko(h,s,n),this.F.Pi(s,h,n),this.Wo(),this.Zl.rn(this.F.W(),{x:t,y:i})},t.prototype.Af=function(){this.Mf().Ri(),this.Wo(),this.Zl.rn(null,null)},t.prototype.Lo=function(){var t=this.F.ct();if(null!==t){var i=this.F.Fi(),n=this.F.Vi();this.Tf(i,n,t)}this.F.ji()},t.prototype.Lf=function(t,i){var n=this.el.ei(0);void 0!==i&&this.el.V(i);var h=this.el.ei(0),s=this.el.Er(),r=this.el.mr();if(null!==r&&null!==n&&null!==h){var e=r.Fs(s),u=n.Ts>h.Ts,a=null!==t&&t>s&&!u,o=e&&this.el.vt().shiftVisibleRangeOnNewBar;if(a&&!o){var l=t-s;this.el.Mr(this.el.Ir()-l)}}this.el.qr(t)},t.prototype.Fo=function(t){null!==t&&t.Bl()},t.prototype.Fu=function(t){var i=this.Hl.find((function(i){return i.Vh().includes(t)}));return void 0===i?null:i},t.prototype.Vr=function(){this.if.ji(),this.Hl.forEach((function(t){return t.Bl()})),this.Lo()},t.prototype.un=function(){this.Hl.forEach((function(t){return t.un()})),this.Hl.length=0,this.Si.localization.priceFormatter=void 0,this.Si.localization.timeFormatter=void 0},t.prototype.Ef=function(){return this.Ql},t.prototype.zu=function(){return this.Ql.vt()},t.prototype._l=function(){return this.Xl},t.prototype.Bf=function(t,i){var n=this.Hl[0],h=this.Of(i,t,n);return this.Yl.push(h),1===this.Yl.length?this.ef():this.Pr(),h},t.prototype.Ff=function(t){var i=this.Fu(t),n=this.Yl.indexOf(t);a(-1!==n,"Series not found"),this.Yl.splice(n,1),l(i).Rh(t),t.un&&t.un()},t.prototype.To=function(t,i){var n=l(this.Fu(t));n.Rh(t);var h=this._f(i);if(null===h){var s=t.li();n.Ph(t,i,s)}else{s=h.ct===n?t.li():void 0;h.ct.Ph(t,i,s)}},t.prototype.te=function(){var t=new qt(2);t.ke(),this.uf(t)},t.prototype.Vf=function(t){var i=new qt(2);i.Ne(t),this.uf(i)},t.prototype.Se=function(){var t=new qt(2);t.Se(),this.uf(t)},t.prototype.wr=function(t){var i=new qt(2);i.wr(t),this.uf(i)},t.prototype.Mr=function(t){var i=new qt(2);i.Mr(t),this.uf(i)},t.prototype.Pf=function(){return this.Si.rightPriceScale.visible?"right":"left"},t.prototype.zf=function(){return this.rf},t.prototype.Rf=function(){return this.hf},t.prototype.J=function(t){var i=this.rf,n=this.hf;if(i===n)return i;if(t=Math.max(0,Math.min(100,Math.round(100*t))),null===this.Jl||this.Jl.Oe!==n||this.Jl.Fe!==i)this.Jl={Oe:n,Fe:i,If:new Map};else{var h=this.Jl.If.get(t);if(void 0!==h)return h}var s=function(t,i,n){var h=F(t),s=h[0],r=h[1],e=h[2],u=h[3],a=F(i),o=a[0],l=a[1],f=a[2],c=a[3],v=[T(s+n*(o-s)),T(r+n*(l-r)),T(e+n*(f-e)),A(u+n*(c-u))];return"rgba(".concat(v[0],", ").concat(v[1],", ").concat(v[2],", ").concat(v[3],")")}(n,i,t/100);return this.Jl.If.set(t,s),s},t.prototype.pf=function(t,i){var n=new qt(i);if(null!==t){var h=this.Hl.indexOf(t);n.me(h,{pe:i})}return n},t.prototype.af=function(t,i){return void 0===i&&(i=2),this.pf(this.Fu(t),i)},t.prototype.uf=function(t){this.Gl&&this.Gl(t),this.Hl.forEach((function(t){return t.Fl().nl().V()}))},t.prototype.Of=function(t,i,n){var h=new Xi(this,t,i),s=void 0!==t.priceScaleId?t.priceScaleId:this.Pf();return n.Ph(h,s),Ut(s)||h.rh(t),h},t.prototype.sf=function(t){var i=this.Si.layout;return"gradient"===i.background.type?0===t?i.background.topColor:i.background.bottomColor:i.background.color},t}(),en={allowDownsampling:!0};var un=function(){function t(t,i){var n=this;this._resolutionMediaQueryList=null,this._resolutionListener=function(t){return n._onResolutionChanged()},this._canvasConfiguredListeners=[],this.canvas=t,this._canvasSize={width:this.canvas.clientWidth,height:this.canvas.clientHeight},this._options=i,this._configureCanvas(),this._installResolutionListener()}return t.prototype.destroy=function(){this._canvasConfiguredListeners.length=0,this._uninstallResolutionListener(),this.canvas=null},Object.defineProperty(t.prototype,"canvasSize",{get:function(){return{width:this._canvasSize.width,height:this._canvasSize.height}},enumerable:!0,configurable:!0}),t.prototype.resizeCanvas=function(t){this._canvasSize={width:t.width,height:t.height},this._configureCanvas()},Object.defineProperty(t.prototype,"pixelRatio",{get:function(){var t=this.canvas.ownerDocument.defaultView;if(null==t)throw new Error("No window is associated with the canvas");return t.devicePixelRatio>1||this._options.allowDownsampling?t.devicePixelRatio:1},enumerable:!0,configurable:!0}),t.prototype.subscribeCanvasConfigured=function(t){this._canvasConfiguredListeners.push(t)},t.prototype.unsubscribeCanvasConfigured=function(t){this._canvasConfiguredListeners=this._canvasConfiguredListeners.filter((function(i){return i!=t}))},t.prototype._configureCanvas=function(){var t=this.pixelRatio;this.canvas.style.width=this._canvasSize.width+"px",this.canvas.style.height=this._canvasSize.height+"px",this.canvas.width=this._canvasSize.width*t,this.canvas.height=this._canvasSize.height*t,this._emitCanvasConfigured()},t.prototype._emitCanvasConfigured=function(){var t=this;this._canvasConfiguredListeners.forEach((function(i){return i.call(t)}))},t.prototype._installResolutionListener=function(){if(null!==this._resolutionMediaQueryList)throw new Error("Resolution listener is already installed");var t=this.canvas.ownerDocument.defaultView;if(null==t)throw new Error("No window is associated with the canvas");var i=t.devicePixelRatio;this._resolutionMediaQueryList=t.matchMedia("all and (resolution: "+i+"dppx)"),this._resolutionMediaQueryList.addListener(this._resolutionListener)},t.prototype._uninstallResolutionListener=function(){null!==this._resolutionMediaQueryList&&(this._resolutionMediaQueryList.removeListener(this._resolutionListener),this._resolutionMediaQueryList=null)},t.prototype._reinstallResolutionListener=function(){this._uninstallResolutionListener(),this._installResolutionListener()},t.prototype._onResolutionChanged=function(){this._configureCanvas(),this._reinstallResolutionListener()},t}(),an=function(){function t(t,i){this.ht=t,this.st=i}return t.prototype.ln=function(t){return this.ht===t.ht&&this.st===t.st},t}();function on(t){return t.ownerDocument&&t.ownerDocument.defaultView&&t.ownerDocument.defaultView.devicePixelRatio||1}function ln(t){var i=l(t.getContext("2d"));return i.setTransform(1,0,0,1,0,0),i}function fn(t,i){var n=t.createElement("canvas"),h=on(n);return n.style.width="".concat(i.ht,"px"),n.style.height="".concat(i.st,"px"),n.width=i.ht*h,n.height=i.st*h,n}function cn(t,i){var n=l(t.ownerDocument).createElement("canvas");t.appendChild(n);var h=function(t,i){return void 0===i&&(i=en),new un(t,i)}(n);return h.resizeCanvas({width:i.ht,height:i.st}),h}function vn(t,i){return t.Wf-i.Wf}function _n(t,i,n){var h=(t.Wf-i.Wf)/(t.C-i.C);return Math.sign(h)*Math.min(Math.abs(h),n)}var dn=function(){function t(t,i,n,h){this.jf=null,this.Uf=null,this.qf=null,this.Hf=null,this.Yf=null,this.Kf=0,this.$f=0,this.Xf=!1,this.Zf=t,this.Jf=i,this.Gf=n,this.Ki=h}return t.prototype.Qf=function(t,i){if(null!==this.jf){if(this.jf.C===i)return void(this.jf.Wf=t);if(Math.abs(this.jf.Wf-t)<this.Ki)return}this.Hf=this.qf,this.qf=this.Uf,this.Uf=this.jf,this.jf={C:i,Wf:t}},t.prototype.Ku=function(t,i){if(null!==this.jf&&null!==this.Uf&&!(i-this.jf.C>50)){var n=0,h=_n(this.jf,this.Uf,this.Jf),s=vn(this.jf,this.Uf),r=[h],e=[s];if(n+=s,null!==this.qf){var u=_n(this.Uf,this.qf,this.Jf);if(Math.sign(u)===Math.sign(h)){var a=vn(this.Uf,this.qf);if(r.push(u),e.push(a),n+=a,null!==this.Hf){var o=_n(this.qf,this.Hf,this.Jf);if(Math.sign(o)===Math.sign(h)){var l=vn(this.qf,this.Hf);r.push(o),e.push(l),n+=l}}}}for(var f,c,v,_=0,d=0;d<r.length;++d)_+=e[d]/n*r[d];if(!(Math.abs(_)<this.Zf))this.Yf={Wf:t,C:i},this.$f=_,this.Kf=(f=Math.abs(_),c=this.Gf,v=Math.log(c),Math.log(1*v/-f)/v)}},t.prototype.tc=function(t){var i=l(this.Yf),n=t-i.C;return i.Wf+this.$f*(Math.pow(this.Gf,n)-1)/Math.log(this.Gf)},t.prototype.ic=function(t){return null===this.Yf||this.nc(t)===this.Kf},t.prototype.hc=function(){return this.Xf},t.prototype.sc=function(){this.Xf=!0},t.prototype.nc=function(t){var i=t-l(this.Yf).C;return Math.min(i,this.Kf)},t}(),wn="undefined"!=typeof window;var Mn=function(){if(!wn)return!1;var t=!!navigator.maxTouchPoints||!!navigator.msMaxTouchPoints||!!wn&&("ontouchstart"in window||Boolean(window.DocumentTouch&&document instanceof window.DocumentTouch));return"onorientationchange"in window&&t}();var bn=function(){if(!wn)return!1;var t=/Android/i.test(navigator.userAgent),i=/iPhone|iPad|iPod|AppleWebKit.+Mobile/i.test(navigator.userAgent);return t||i}(),mn=function(){function t(t,i,n){this.rc=0,this.ec=null,this.uc=null,this.ac=!1,this.oc=null,this.lc=!1,this.fc=!1,this.cc=null,this.vc=null,this._c=null,this.dc=null,this.wc=0,this.Mc=!1,this.bc=!1,this.mc=!1,this.gc=t,this.yc=i,this.Si=n,this.kc()}return t.prototype.un=function(){null!==this.cc&&(this.cc(),this.cc=null),null!==this.vc&&(this.vc(),this.vc=null),null!==this._c&&(this._c(),this._c=null),this.xc(),this.Nc()},t.prototype.Sc=function(t){var i=this;this.vc&&this.vc();var n=this.Cc.bind(this);this.vc=function(){i.gc.removeEventListener("mousemove",n)},this.gc.addEventListener("mousemove",n),yn(t)&&this.Cc(t);var h=this.Dc(t);this.Tc(h,this.yc.Ac)},t.prototype.Nc=function(){null!==this.ec&&clearTimeout(this.ec),this.rc=0,this.ec=null},t.prototype.Cc=function(t){if(!this.mc||yn(t)){var i=this.Dc(t);this.Tc(i,this.yc.Lc)}},t.prototype.Ec=function(t){if((!("button"in t)||0===t.button)&&null===this.dc){var i=yn(t);if(!this.bc||!i){this.Mc=!0;var n=this.Dc(t),h=f(this.oc),s=Math.abs(h.p-n.Bc),r=Math.abs(h.g-n.Oc),e=s+r>5;if(e||!i){if(e&&!this.lc&&i){var u=.5*s,a=r>=u&&!this.Si.Fc,o=u>r&&!this.Si.Vc;a||o||(this.bc=!0)}e&&(this.lc=!0,this.fc=!0,i&&this.xc()),this.bc||(this.Tc(n,this.yc.Pc),i&&kn(t))}}}},t.prototype.zc=function(t){if(!("button"in t)||0===t.button){var i=this.Dc(t);this.xc(),this.oc=null,this.mc=!1,this._c&&(this._c(),this._c=null),yn(t)&&this.Rc(t),this.Tc(i,this.yc.Ic),++this.rc,this.ec&&this.rc>1?(this.Tc(i,this.yc.Wc),this.Nc()):this.fc||this.Tc(i,this.yc.jc),yn(t)&&(kn(t),this.Rc(t),0===t.touches.length&&(this.ac=!1))}},t.prototype.xc=function(){null!==this.uc&&(clearTimeout(this.uc),this.uc=null)},t.prototype.Uc=function(t){if(!("button"in t)||0===t.button){var i=this.Dc(t);this.fc=!1,this.lc=!1,this.bc=!1,yn(t)&&this.Sc(t),this.oc={p:i.Bc,g:i.Oc},this._c&&(this._c(),this._c=null);var n=this.Ec.bind(this),h=this.zc.bind(this),s=this.gc.ownerDocument.documentElement;this._c=function(){s.removeEventListener("touchmove",n),s.removeEventListener("touchend",h),s.removeEventListener("mousemove",n),s.removeEventListener("mouseup",h)},s.addEventListener("touchmove",n,{passive:!1}),s.addEventListener("touchend",h,{passive:!1}),this.xc(),yn(t)&&1===t.touches.length?this.uc=setTimeout(this.qc.bind(this,t),240):(s.addEventListener("mousemove",n),s.addEventListener("mouseup",h)),this.mc=!0,this.Tc(i,this.yc.Hc),this.ec||(this.rc=0,this.ec=setTimeout(this.Nc.bind(this),500))}},t.prototype.kc=function(){var t=this;this.gc.addEventListener("mouseenter",this.Sc.bind(this)),this.gc.addEventListener("touchcancel",this.xc.bind(this));var i=this.gc.ownerDocument,n=function(i){t.yc.Yc&&(i.composed&&t.gc.contains(i.composedPath()[0])||i.target&&t.gc.contains(i.target)||t.yc.Yc())};this.cc=function(){i.removeEventListener("mousedown",n),i.removeEventListener("touchstart",n)},i.addEventListener("mousedown",n),i.addEventListener("touchstart",n,{passive:!0}),this.gc.addEventListener("mouseleave",this.Rc.bind(this)),this.gc.addEventListener("touchstart",this.Uc.bind(this),{passive:!0}),Mn||this.gc.addEventListener("mousedown",this.Uc.bind(this)),this.Kc(),this.gc.addEventListener("touchmove",(function(){}),{passive:!1})},t.prototype.Kc=function(){var t=this;void 0===this.yc.$c&&void 0===this.yc.Xc&&void 0===this.yc.Zc||(this.gc.addEventListener("touchstart",(function(i){return t.Jc(i.touches)}),{passive:!0}),this.gc.addEventListener("touchmove",(function(i){if(2===i.touches.length&&null!==t.dc&&void 0!==t.yc.Xc){var n=gn(i.touches[0],i.touches[1])/t.wc;t.yc.Xc(t.dc,n),kn(i)}}),{passive:!1}),this.gc.addEventListener("touchend",(function(i){t.Jc(i.touches)})))},t.prototype.Jc=function(t){1===t.length&&(this.Mc=!1),2!==t.length||this.Mc||this.ac?this.Gc():this.Qc(t)},t.prototype.Qc=function(t){var i=pn(this.gc);this.dc={p:(t[0].clientX-i.left+(t[1].clientX-i.left))/2,g:(t[0].clientY-i.top+(t[1].clientY-i.top))/2},this.wc=gn(t[0],t[1]),void 0!==this.yc.$c&&this.yc.$c(),this.xc()},t.prototype.Gc=function(){null!==this.dc&&(this.dc=null,void 0!==this.yc.Zc&&this.yc.Zc())},t.prototype.Rc=function(t){this.vc&&this.vc();var i=this.Dc(t);this.Tc(i,this.yc.tv)},t.prototype.qc=function(t){var i=this.Dc(t);this.Tc(i,this.yc.iv),this.fc=!0,this.ac=!0},t.prototype.Tc=function(t,i){i&&i.call(this.yc,t)},t.prototype.Dc=function(t){var i;i="touches"in t&&t.touches.length?t.touches[0]:"changedTouches"in t&&t.changedTouches.length?t.changedTouches[0]:t;var n=pn(this.gc);return{nv:i.clientX,hv:i.clientY,Bc:i.pageX,Oc:i.pageY,sv:i.screenX,rv:i.screenY,ev:i.clientX-n.left,uv:i.clientY-n.top,av:t.ctrlKey,ov:t.altKey,lv:t.shiftKey,fv:t.metaKey,xe:t.type.startsWith("mouse")?"mouse":"touch",cv:t.view}},t}();function pn(t){return t.getBoundingClientRect()||{left:0,top:0}}function gn(t,i){var n=t.clientX-i.clientX,h=t.clientY-i.clientY;return Math.sqrt(n*n+h*h)}function yn(t){return Boolean(t.touches)}function kn(t){t.cancelable&&t.preventDefault()}var xn=function(){function t(t,i,n,h){this.Lu=new _i(200),this.ce=0,this.vv="",this.la="",this.Cu=[],this._v=new Map,this.ce=t,this.vv=i,this.la=Wt(t,n,h)}return t.prototype.un=function(){this.Lu.Du(),this.Cu=[],this._v.clear()},t.prototype.dv=function(t,i,n,h,s){var r=this.wv(t,i);if("left"!==s){var e=on(t.canvas);n-=Math.floor(r.Mv*e)}h-=Math.floor(r.bt/2),t.drawImage(r.bv,n,h,r.Mt,r.bt)},t.prototype.wv=function(t,i){var n,h=this;if(this._v.has(i))n=o(this._v.get(i));else{if(this.Cu.length>=200){var s=o(this.Cu.shift());this._v.delete(s)}var r=on(t.canvas),e=Math.ceil(this.ce/4.5),u=Math.round(this.ce/10),a=Math.ceil(this.Lu.Vt(t,i)),l=rt(Math.round(a+2*e)),f=rt(this.ce+2*e),c=fn(document,new an(l,f));n={Ft:i,Mv:Math.round(Math.max(1,a)),Mt:Math.ceil(l*r),bt:Math.ceil(f*r),bv:c},0!==a&&(this.Cu.push(n.Ft),this._v.set(n.Ft,n)),z(t=ln(n.bv),r,(function(){t.font=h.la,t.fillStyle=h.vv,t.fillText(i,0,f-e-u)}))}return n},t}(),Nn=function(){function t(t,i,n,h){var s=this;this.Qt=null,this.mv=null,this.pv=null,this.gv=!1,this.yv=new _i(50),this.kv=new xn(11,"#000"),this.vv=null,this.la=null,this.xv=0,this.Nv=function(){s.Sv(s.Ql.vt()),s.wi.Cv()._t().Pr()},this.Dv=function(){s.wi.Cv()._t().Pr()},this.wi=t,this.Si=i,this.Ql=n,this.Tv="left"===h,this.Av=document.createElement("div"),this.Av.style.height="100%",this.Av.style.overflow="hidden",this.Av.style.width="25px",this.Av.style.left="0",this.Av.style.position="relative",this.Lv=cn(this.Av,new an(16,16)),this.Lv.subscribeCanvasConfigured(this.Nv);var r=this.Lv.canvas;r.style.position="absolute",r.style.zIndex="1",r.style.left="0",r.style.top="0",this.Ev=cn(this.Av,new an(16,16)),this.Ev.subscribeCanvasConfigured(this.Dv);var e=this.Ev.canvas;e.style.position="absolute",e.style.zIndex="2",e.style.left="0",e.style.top="0";var u={Hc:this.Bv.bind(this),Pc:this.Ov.bind(this),Yc:this.Fv.bind(this),Ic:this.Vv.bind(this),Wc:this.Pv.bind(this),Ac:this.zv.bind(this),tv:this.Rv.bind(this)};this.Iv=new mn(this.Ev.canvas,u,{Fc:!1,Vc:!0})}return t.prototype.un=function(){this.Iv.un(),this.Ev.unsubscribeCanvasConfigured(this.Dv),this.Ev.destroy(),this.Lv.unsubscribeCanvasConfigured(this.Nv),this.Lv.destroy(),null!==this.Qt&&this.Qt.Wh().sn(this),this.Qt=null,null!==this.pv&&(clearTimeout(this.pv),this.pv=null),this.kv.un()},t.prototype.Wv=function(){return this.Av},t.prototype.S=function(){return l(this.Qt).vt().borderColor},t.prototype.jv=function(){return this.Si.textColor},t.prototype.zt=function(){return this.Si.fontSize},t.prototype.Uv=function(){return Wt(this.zt(),this.Si.fontFamily)},t.prototype.qv=function(){var t=this.Ql.vt(),i=this.vv!==t.et,n=this.la!==t.St;return(i||n)&&(this.Sv(t),this.vv=t.et),n&&(this.yv.Du(),this.la=t.St),t},t.prototype.Hv=function(){if(null===this.Qt)return 0;var t=34,i=this.qv(),n=ln(this.Lv.canvas),h=this.Qt.On();n.font=this.Uv(),h.length>0&&(t=Math.max(this.yv.Vt(n,h[0].Ln),this.yv.Vt(n,h[h.length-1].Ln)));for(var s=this.Yv(),r=s.length;r--;){var e=this.yv.Vt(n,s[r].Ft());e>t&&(t=e)}var u=this.Qt.H();if(null!==u&&null!==this.mv){var a=this.Qt.Ai(1,u),o=this.Qt.Ai(this.mv.st-2,u);t=Math.max(t,this.yv.Vt(n,this.Qt.ni(Math.floor(Math.min(a,o))+.11111111111111,u)),this.yv.Vt(n,this.Qt.ni(Math.ceil(Math.max(a,o))-.11111111111111,u)))}var l=Math.ceil(i.At+i.Tt+i.Bt+i.Ot+t);return l+=l%2},t.prototype.Kv=function(t){if(t.ht<0||t.st<0)throw new Error("Try to set invalid size to PriceAxisWidget "+JSON.stringify(t));null!==this.mv&&this.mv.ln(t)||(this.mv=t,this.Lv.resizeCanvas({width:t.ht,height:t.st}),this.Ev.resizeCanvas({width:t.ht,height:t.st}),this.Av.style.width=t.ht+"px",this.Av.style.height=t.st+"px",this.Av.style.minWidth=t.ht+"px")},t.prototype.$v=function(){return l(this.mv).ht},t.prototype.ci=function(t){this.Qt!==t&&(null!==this.Qt&&this.Qt.Wh().sn(this),this.Qt=t,t.Wh().Gi(this.qn.bind(this),this))},t.prototype.$=function(){return this.Qt},t.prototype.Du=function(){var t=this.wi.Xv();this.wi.Cv()._t().Ll(t,l(this.$()))},t.prototype.Zv=function(t){if(null!==this.mv){if(1!==t){var i=ln(this.Lv.canvas);this.Jv(),this.Gv(i,this.Lv.pixelRatio),this._u(i,this.Lv.pixelRatio),this.Qv(i,this.Lv.pixelRatio),this.t_(i,this.Lv.pixelRatio)}var n=ln(this.Ev.canvas),h=this.mv.ht,s=this.mv.st;z(n,this.Ev.pixelRatio,(function(){n.clearRect(0,0,h,s)})),this.i_(n,this.Ev.pixelRatio)}},t.prototype.n_=function(){return this.Lv.canvas},t.prototype.Bv=function(t){if(null!==this.Qt&&!this.Qt.ii()&&this.wi.Cv().vt().handleScale.axisPressedMouseMove.price){var i=this.wi.Cv()._t(),n=this.wi.Xv();this.gv=!0,i.xl(n,this.Qt,t.uv)}},t.prototype.Ov=function(t){if(null!==this.Qt&&this.wi.Cv().vt().handleScale.axisPressedMouseMove.price){var i=this.wi.Cv()._t(),n=this.wi.Xv(),h=this.Qt;i.Nl(n,h,t.uv)}},t.prototype.Fv=function(){if(null!==this.Qt&&this.wi.Cv().vt().handleScale.axisPressedMouseMove.price){var t=this.wi.Cv()._t(),i=this.wi.Xv(),n=this.Qt;this.gv&&(this.gv=!1,t.Sl(i,n))}},t.prototype.Vv=function(t){if(null!==this.Qt&&this.wi.Cv().vt().handleScale.axisPressedMouseMove.price){var i=this.wi.Cv()._t(),n=this.wi.Xv();this.gv=!1,i.Sl(n,this.Qt)}},t.prototype.Pv=function(t){this.wi.Cv().vt().handleScale.axisDoubleClickReset&&this.Du()},t.prototype.zv=function(t){null!==this.Qt&&(!this.wi.Cv()._t().vt().handleScale.axisPressedMouseMove.price||this.Qt.fh()||this.Qt._h()||this.h_(1))},t.prototype.Rv=function(t){this.h_(0)},t.prototype.Yv=function(){var t=this,i=[],n=null===this.Qt?void 0:this.Qt;return function(h){for(var s=0;s<h.length;++s)for(var r=h[s].vi(t.wi.Xv(),n),e=0;e<r.length;e++)i.push(r[e])}(this.wi.Xv().Vh()),i},t.prototype.Gv=function(t,i){var n=this;if(null!==this.mv){var h=this.mv.ht,s=this.mv.st;z(t,i,(function(){var i=n.wi.Xv()._t(),r=i.Rf(),e=i.zf();r===e?R(t,0,0,h,s,r):I(t,0,0,h,s,r,e)}))}},t.prototype._u=function(t,i){if(null!==this.mv&&null!==this.Qt&&this.Qt.vt().borderVisible){t.save(),t.fillStyle=this.S();var n,h=Math.max(1,Math.floor(this.qv().At*i));n=this.Tv?Math.floor(this.mv.ht*i)-h:0,t.fillRect(n,0,h,Math.ceil(this.mv.st*i)),t.restore()}},t.prototype.Qv=function(t,i){if(null!==this.mv&&null!==this.Qt){var n=this.Qt.On();t.save(),t.strokeStyle=this.S(),t.font=this.Uv(),t.fillStyle=this.S();var h=this.qv(),s=this.Qt.vt().borderVisible&&this.Qt.vt().drawTicks,r=this.Tv?Math.floor((this.mv.ht-h.Tt)*i-h.At*i):Math.floor(h.At*i),e=this.Tv?Math.round(r-h.Bt*i):Math.round(r+h.Tt*i+h.Bt*i),u=this.Tv?"right":"left",a=Math.max(1,Math.floor(i)),o=Math.floor(.5*i);if(s){var l=Math.round(h.Tt*i);t.beginPath();for(var f=0,c=n;f<c.length;f++){var v=c[f];t.rect(r,Math.round(v.An*i)-o,l,a)}t.fill()}t.fillStyle=this.jv();for(var _=0,d=n;_<d.length;_++){v=d[_];this.kv.dv(t,v.Ln,e,Math.round(v.An*i),u)}t.restore()}},t.prototype.Jv=function(){if(null!==this.mv&&null!==this.Qt){var t=this.mv.st/2,i=[],n=this.Qt.Vh().slice(),h=this.wi.Xv(),s=this.qv();this.Qt===h.Ti()&&this.wi.Xv().Vh().forEach((function(t){h.Vu(t)&&n.push(t)}));var r=this.Qt.Fh()[0],e=this.Qt;n.forEach((function(n){var s=n.vi(h,e);s.forEach((function(t){t.$t(null),t.Xt()&&i.push(t)})),r===n&&s.length>0&&(t=s[0].Rt())}));var u=i.filter((function(i){return i.Rt()<=t})),a=i.filter((function(i){return i.Rt()>t}));if(u.sort((function(t,i){return i.Rt()-t.Rt()})),u.length&&a.length&&a.push(u[0]),a.sort((function(t,i){return t.Rt()-i.Rt()})),i.forEach((function(t){return t.$t(t.Rt())})),this.Qt.vt().alignLabels){for(var o=1;o<u.length;o++){var l=u[o],f=(v=u[o-1]).bt(s,!1);l.Rt()>(_=v.Kt())-f&&l.$t(_-f)}for(var c=1;c<a.length;c++){var v,_;l=a[c],f=(v=a[c-1]).bt(s,!0);l.Rt()<(_=v.Kt())+f&&l.$t(_+f)}}}},t.prototype.t_=function(t,i){var n=this;if(null!==this.mv){t.save();var h=this.mv,s=this.Yv(),r=this.qv(),e=this.Tv?"right":"left";s.forEach((function(s){if(s.Zt()){var u=s.R(l(n.Qt));t.save(),u.h(t,r,n.yv,h.ht,e,i),t.restore()}})),t.restore()}},t.prototype.i_=function(t,i){var n=this;if(null!==this.mv&&null!==this.Qt){t.save();var h=this.mv,s=this.wi.Cv()._t(),r=[],e=this.wi.Xv(),u=s.Mf().vi(e,this.Qt);u.length&&r.push(u);var a=this.qv(),o=this.Tv?"right":"left";r.forEach((function(s){s.forEach((function(s){t.save(),s.R(l(n.Qt)).h(t,a,n.yv,h.ht,o,i),t.restore()}))})),t.restore()}},t.prototype.h_=function(t){this.Av.style.cursor=1===t?"ns-resize":"default"},t.prototype.qn=function(){var t=this,i=this.Hv();if(this.xv<i){var n=this.wi.Cv();null===this.pv&&(this.pv=setTimeout((function(){n&&n._t().ef(),t.pv=null}),100))}this.xv=i},t.prototype.Sv=function(t){this.kv.un(),this.kv=new xn(t.zt,t.et,t.fe)},t}(),Sn=bn;function Cn(t,i,n,h,s){t.o&&t.o(i,n,h,s)}function Dn(t,i,n,h,s){t.h(i,n,h,s)}function Tn(t,i){return t._i(i)}function An(t,i){return void 0!==t.Io?t.Io(i):[]}var Ln=function(){function t(t,i){var n=this;this.mv=new an(0,0),this.s_=null,this.r_=null,this.e_=null,this.u_=!1,this.a_=new tt,this.o_=0,this.l_=!1,this.f_=null,this.c_=!1,this.v_=null,this.__=null,this.Nv=function(){return n.d_&&n.ri().Pr()},this.Dv=function(){return n.d_&&n.ri().Pr()},this.w_=t,this.d_=i,this.d_.Ol().Gi(this.M_.bind(this),this,!0),this.b_=document.createElement("td"),this.b_.style.padding="0",this.b_.style.position="relative";var h=document.createElement("div");h.style.width="100%",h.style.height="100%",h.style.position="relative",h.style.overflow="hidden",this.m_=document.createElement("td"),this.m_.style.padding="0",this.p_=document.createElement("td"),this.p_.style.padding="0",this.b_.appendChild(h),this.Lv=cn(h,new an(16,16)),this.Lv.subscribeCanvasConfigured(this.Nv);var s=this.Lv.canvas;s.style.position="absolute",s.style.zIndex="1",s.style.left="0",s.style.top="0",this.Ev=cn(h,new an(16,16)),this.Ev.subscribeCanvasConfigured(this.Dv);var r=this.Ev.canvas;r.style.position="absolute",r.style.zIndex="2",r.style.left="0",r.style.top="0",this.g_=document.createElement("tr"),this.g_.appendChild(this.m_),this.g_.appendChild(this.b_),this.g_.appendChild(this.p_),this.y_();var e=this.Cv().vt().handleScroll;this.Iv=new mn(this.Ev.canvas,this,{Fc:!e.vertTouchDrag,Vc:!e.horzTouchDrag})}return t.prototype.un=function(){null!==this.s_&&this.s_.un(),null!==this.r_&&this.r_.un(),this.Ev.unsubscribeCanvasConfigured(this.Dv),this.Ev.destroy(),this.Lv.unsubscribeCanvasConfigured(this.Nv),this.Lv.destroy(),null!==this.d_&&this.d_.Ol().sn(this),this.Iv.un()},t.prototype.Xv=function(){return l(this.d_)},t.prototype.k_=function(i){null!==this.d_&&this.d_.Ol().sn(this),this.d_=i,null!==this.d_&&this.d_.Ol().Gi(t.prototype.M_.bind(this),this,!0),this.y_()},t.prototype.Cv=function(){return this.w_},t.prototype.Wv=function(){return this.g_},t.prototype.y_=function(){if(null!==this.d_&&(this.x_(),0!==this.ri().P().length)){if(null!==this.s_){var t=this.d_.yl();this.s_.ci(l(t))}if(null!==this.r_){var i=this.d_.kl();this.r_.ci(l(i))}}},t.prototype.dl=function(){return null!==this.d_?this.d_.dl():0},t.prototype.wl=function(t){this.d_&&this.d_.wl(t)},t.prototype.Ac=function(t){if(this.d_){var i=t.ev,n=t.uv;Mn||this.N_(i,n)}},t.prototype.Hc=function(t){if(this.l_=!1,this.c_=null!==this.f_,this.d_){if(this.S_(),document.activeElement!==document.body&&document.activeElement!==document.documentElement)l(document.activeElement).blur();else{var i=document.getSelection();null!==i&&i.removeAllRanges()}var n=this.ri();if(!this.d_.Ti().ii()&&!n.j().ii()){if(null!==this.f_){var h=n.Mf();this.v_={x:h.gt(),y:h.yt()},this.f_={x:t.ev,y:t.uv}}Mn||this.N_(t.ev,t.uv)}}},t.prototype.Lc=function(t){if(this.d_){var i=t.ev,n=t.uv;if(this.C_()&&this.D_(),!Mn){this.N_(i,n);var h=this.fa(i,n);this.ri().ff(h&&{cf:h.cf,T_:h.T_}),null!==h&&void 0!==h.cv.A_&&h.cv.A_(i,n)}}},t.prototype.jc=function(t){if(null!==this.d_){var i=t.ev,n=t.uv,h=this.fa(i,n);if(null!==h&&void 0!==h.cv.L_&&h.cv.L_(i,n),this.a_.en()){var s=this.ri().Mf().W();this.a_.rn(s,{x:i,y:n})}this.E_()}},t.prototype.Pc=function(t){if(null!==this.d_){var i=this.ri(),n=t.ev,h=t.uv;if(null!==this.f_){this.c_=!1;var s=l(this.v_),r=s.x+(n-this.f_.x),e=s.y+(h-this.f_.y);this.N_(r,e)}else this.C_()||this.N_(n,h);if(!i.j().ii()){var u=this.w_.vt(),a=u.handleScroll,o=u.kineticScroll;if(a.pressedMouseMove&&"touch"!==t.xe||(a.horzTouchDrag||a.vertTouchDrag)&&"mouse"!==t.xe){var f=this.d_.Ti(),c=performance.now();null!==this.e_||this.B_()||(this.e_={x:t.nv,y:t.hv,Ts:c,ev:t.ev,uv:t.uv}),null!==this.__&&this.__.Qf(t.ev,c),null===this.e_||this.u_||this.e_.x===t.nv&&this.e_.y===t.hv||(null===this.__&&("touch"===t.xe&&o.touch||"mouse"===t.xe&&o.mouse)&&(this.__=new dn(.2,7,.997,15),this.__.Qf(this.e_.ev,this.e_.Ts),this.__.Qf(t.ev,c)),f.ii()||i.Cl(this.d_,f,t.uv),i.xf(t.ev),this.u_=!0),this.u_&&(f.ii()||i.Dl(this.d_,f,t.uv),i.Nf(t.ev))}}}},t.prototype.Ic=function(t){null!==this.d_&&(this.l_=!1,this.O_(t))},t.prototype.iv=function(t){if(this.l_=!0,null===this.f_&&Sn){var i={x:t.ev,y:t.uv};this.F_(i,i)}},t.prototype.tv=function(t){null!==this.d_&&(this.d_._t().ff(null),bn||this.D_())},t.prototype.V_=function(){return this.a_},t.prototype.$c=function(){this.o_=1,this.S_()},t.prototype.Xc=function(t,i){if(this.w_.vt().handleScale.pinch){var n=5*(i-this.o_);this.o_=i,this.ri().yf(t.p,n)}},t.prototype.fa=function(t,i){var n=this.d_;if(null===n)return null;for(var h=0,s=n.Vh();h<s.length;h++){var r=s[h],e=this.P_(r._i(n),t,i);if(null!==e)return{cf:r,cv:e.cv,T_:e.T_}}return null},t.prototype.z_=function(t,i){l("left"===i?this.s_:this.r_).Kv(new an(t,this.mv.st))},t.prototype.R_=function(){return this.mv},t.prototype.Kv=function(t){if(t.ht<0||t.st<0)throw new Error("Try to set invalid size to PaneWidget "+JSON.stringify(t));this.mv.ln(t)||(this.mv=t,this.Lv.resizeCanvas({width:t.ht,height:t.st}),this.Ev.resizeCanvas({width:t.ht,height:t.st}),this.b_.style.width=t.ht+"px",this.b_.style.height=t.st+"px")},t.prototype.I_=function(){var t=l(this.d_);t.gl(t.yl()),t.gl(t.kl());for(var i=0,n=t.Fh();i<n.length;i++){var h=n[i];if(t.Vu(h)){var s=h.$();null!==s&&t.gl(s),h.ji()}}},t.prototype.n_=function(){return this.Lv.canvas},t.prototype.Zv=function(t){if(0!==t&&null!==this.d_){if(t>1&&this.I_(),null!==this.s_&&this.s_.Zv(t),null!==this.r_&&this.r_.Zv(t),1!==t){var i=ln(this.Lv.canvas);i.save(),this.Gv(i,this.Lv.pixelRatio),this.d_&&(this.W_(i,this.Lv.pixelRatio),this.j_(i,this.Lv.pixelRatio),this.U_(i,this.Lv.pixelRatio,Tn)),i.restore()}var n=ln(this.Ev.canvas);n.clearRect(0,0,Math.ceil(this.mv.ht*this.Ev.pixelRatio),Math.ceil(this.mv.st*this.Ev.pixelRatio)),this.U_(n,this.Lv.pixelRatio,An),this.q_(n,this.Ev.pixelRatio)}},t.prototype.H_=function(){return this.s_},t.prototype.Y_=function(){return this.r_},t.prototype.M_=function(){null!==this.d_&&this.d_.Ol().sn(this),this.d_=null},t.prototype.Gv=function(t,i){var n=this;z(t,i,(function(){var i=n.ri(),h=i.Rf(),s=i.zf();h===s?R(t,0,0,n.mv.ht,n.mv.st,s):I(t,0,0,n.mv.ht,n.mv.st,h,s)}))},t.prototype.W_=function(t,i){var n=l(this.d_),h=n.Fl().nl().R(n.bt(),n.Mt());null!==h&&(t.save(),h.h(t,i,!1),t.restore())},t.prototype.j_=function(t,i){var n=this.ri().wf();this.K_(t,i,Tn,Cn,n),this.K_(t,i,Tn,Dn,n)},t.prototype.q_=function(t,i){this.K_(t,i,Tn,Dn,this.ri().Mf())},t.prototype.U_=function(t,i,n){for(var h=l(this.d_).Vh(),s=0,r=h;s<r.length;s++){var e=r[s];this.K_(t,i,n,Cn,e)}for(var u=0,a=h;u<a.length;u++){e=a[u];this.K_(t,i,n,Dn,e)}},t.prototype.K_=function(t,i,n,h,s){for(var r=l(this.d_),e=n(s,r),u=r.bt(),a=r.Mt(),o=r._t().lf(),f=null!==o&&o.cf===s,c=null!==o&&f&&void 0!==o.T_?o.T_.ca:void 0,v=0,_=e;v<_.length;v++){var d=_[v].R(u,a);null!==d&&(t.save(),h(d,t,i,f,c),t.restore())}},t.prototype.P_=function(t,i,n){for(var h=0,s=t;h<s.length;h++){var r=s[h],e=r.R(this.mv.st,this.mv.ht);if(null!==e&&e.fa){var u=e.fa(i,n);if(null!==u)return{cv:r,T_:u}}}return null},t.prototype.x_=function(){if(null!==this.d_){var t=this.w_;t.vt().leftPriceScale.visible||null===this.s_||(this.m_.removeChild(this.s_.Wv()),this.s_.un(),this.s_=null),t.vt().rightPriceScale.visible||null===this.r_||(this.p_.removeChild(this.r_.Wv()),this.r_.un(),this.r_=null);var i=t._t().Ef();t.vt().leftPriceScale.visible&&null===this.s_&&(this.s_=new Nn(this,t.vt().layout,i,"left"),this.m_.appendChild(this.s_.Wv())),t.vt().rightPriceScale.visible&&null===this.r_&&(this.r_=new Nn(this,t.vt().layout,i,"right"),this.p_.appendChild(this.r_.Wv()))}},t.prototype.C_=function(){return Sn&&null===this.f_},t.prototype.B_=function(){return Sn&&this.l_||null!==this.f_},t.prototype.X_=function(t){return Math.max(0,Math.min(t,this.mv.ht-1))},t.prototype.Z_=function(t){return Math.max(0,Math.min(t,this.mv.st-1))},t.prototype.N_=function(t,i){this.ri().Tf(this.X_(t),this.Z_(i),l(this.d_))},t.prototype.D_=function(){this.ri().Af()},t.prototype.E_=function(){this.c_&&(this.f_=null,this.D_())},t.prototype.F_=function(t,i){this.f_=t,this.c_=!1,this.N_(i.x,i.y);var n=this.ri().Mf();this.v_={x:n.gt(),y:n.yt()}},t.prototype.ri=function(){return this.w_._t()},t.prototype.J_=function(){var t=this.ri(),i=this.Xv(),n=i.Ti();t.Tl(i,n),t.Sf(),this.e_=null,this.u_=!1},t.prototype.O_=function(t){var i=this;if(this.u_){var n=performance.now();if(null!==this.__&&this.__.Ku(t.ev,n),null===this.__||this.__.ic(n))this.J_();else{var h=this.ri(),s=h.j(),r=this.__,e=function(){if(!r.hc()){var t=performance.now(),n=r.ic(t);if(!r.hc()){var u=s.Ir();h.Nf(r.tc(t)),u===s.Ir()&&(n=!0,i.__=null)}n?i.J_():requestAnimationFrame(e)}};requestAnimationFrame(e)}}},t.prototype.S_=function(){var t=performance.now(),i=null===this.__||this.__.ic(t);null!==this.__&&(i||this.J_()),null!==this.__&&(this.__.sc(),this.__=null)},t}(),En=function(){function t(t,i,n,h,s){var r=this;this.B=!0,this.mv=new an(0,0),this.Nv=function(){return r.Zv(3)},this.Tv="left"===t,this.Ql=n.Ef,this.Si=i,this.G_=h,this.Q_=s,this.Av=document.createElement("div"),this.Av.style.width="25px",this.Av.style.height="100%",this.Av.style.overflow="hidden",this.Lv=cn(this.Av,new an(16,16)),this.Lv.subscribeCanvasConfigured(this.Nv)}return t.prototype.un=function(){this.Lv.unsubscribeCanvasConfigured(this.Nv),this.Lv.destroy()},t.prototype.Wv=function(){return this.Av},t.prototype.R_=function(){return this.mv},t.prototype.Kv=function(t){if(t.ht<0||t.st<0)throw new Error("Try to set invalid size to PriceAxisStub "+JSON.stringify(t));this.mv.ln(t)||(this.mv=t,this.Lv.resizeCanvas({width:t.ht,height:t.st}),this.Av.style.width="".concat(t.ht,"px"),this.Av.style.minWidth="".concat(t.ht,"px"),this.Av.style.height="".concat(t.st,"px"),this.B=!0)},t.prototype.Zv=function(t){if((!(t<3)||this.B)&&0!==this.mv.ht&&0!==this.mv.st){this.B=!1;var i=ln(this.Lv.canvas);this.Gv(i,this.Lv.pixelRatio),this._u(i,this.Lv.pixelRatio)}},t.prototype.n_=function(){return this.Lv.canvas},t.prototype._u=function(t,i){if(this.G_()){var n=this.mv.ht;t.save(),t.fillStyle=this.Si.timeScale.borderColor;var h=Math.floor(this.Ql.vt().At*i),s=this.Tv?Math.round(n*i)-h:0;t.fillRect(s,0,h,h),t.restore()}},t.prototype.Gv=function(t,i){var n=this;z(t,i,(function(){R(t,0,0,n.mv.ht,n.mv.st,n.Q_())}))},t}();function Bn(t,i){return t.Is>i.Is?t:i}var On=function(){function t(t){var i=this;this.td=null,this.nd=null,this.le=null,this.hd=!1,this.mv=new an(0,0),this.yv=new _i(5),this.Nv=function(){return i.w_._t().Pr()},this.Dv=function(){return i.w_._t().Pr()},this.w_=t,this.Si=t.vt().layout,this.sd=document.createElement("tr"),this.rd=document.createElement("td"),this.rd.style.padding="0",this.ed=document.createElement("td"),this.ed.style.padding="0",this.Av=document.createElement("td"),this.Av.style.height="25px",this.Av.style.padding="0",this.ud=document.createElement("div"),this.ud.style.width="100%",this.ud.style.height="100%",this.ud.style.position="relative",this.ud.style.overflow="hidden",this.Av.appendChild(this.ud),this.Lv=cn(this.ud,new an(16,16)),this.Lv.subscribeCanvasConfigured(this.Nv);var n=this.Lv.canvas;n.style.position="absolute",n.style.zIndex="1",n.style.left="0",n.style.top="0",this.Ev=cn(this.ud,new an(16,16)),this.Ev.subscribeCanvasConfigured(this.Dv);var h=this.Ev.canvas;h.style.position="absolute",h.style.zIndex="2",h.style.left="0",h.style.top="0",this.sd.appendChild(this.rd),this.sd.appendChild(this.Av),this.sd.appendChild(this.ed),this.ad(),this.w_._t()._l().Gi(this.ad.bind(this),this),this.Iv=new mn(this.Ev.canvas,this,{Fc:!0,Vc:!1})}return t.prototype.un=function(){this.Iv.un(),null!==this.td&&this.td.un(),null!==this.nd&&this.nd.un(),this.Ev.unsubscribeCanvasConfigured(this.Dv),this.Ev.destroy(),this.Lv.unsubscribeCanvasConfigured(this.Nv),this.Lv.destroy()},t.prototype.Wv=function(){return this.sd},t.prototype.od=function(){return this.td},t.prototype.ld=function(){return this.nd},t.prototype.Hc=function(t){if(!this.hd){this.hd=!0;var i=this.w_._t();!i.j().ii()&&this.w_.vt().handleScale.axisPressedMouseMove.time&&i.gf(t.ev)}},t.prototype.Yc=function(){var t=this.w_._t();!t.j().ii()&&this.hd&&(this.hd=!1,this.w_.vt().handleScale.axisPressedMouseMove.time&&t.Df())},t.prototype.Pc=function(t){var i=this.w_._t();!i.j().ii()&&this.w_.vt().handleScale.axisPressedMouseMove.time&&i.Cf(t.ev)},t.prototype.Ic=function(t){this.hd=!1;var i=this.w_._t();i.j().ii()&&!this.w_.vt().handleScale.axisPressedMouseMove.time||i.Df()},t.prototype.Wc=function(){this.w_.vt().handleScale.axisDoubleClickReset&&this.w_._t().Se()},t.prototype.Ac=function(t){this.w_._t().vt().handleScale.axisPressedMouseMove.time&&this.h_(1)},t.prototype.tv=function(t){this.h_(0)},t.prototype.R_=function(){return this.mv},t.prototype.fd=function(t,i,n){this.mv&&this.mv.ln(t)||(this.mv=t,this.Lv.resizeCanvas({width:t.ht,height:t.st}),this.Ev.resizeCanvas({width:t.ht,height:t.st}),this.Av.style.width=t.ht+"px",this.Av.style.height=t.st+"px"),null!==this.td&&this.td.Kv(new an(i,t.st)),null!==this.nd&&this.nd.Kv(new an(n,t.st))},t.prototype.vd=function(){var t=this._d();return Math.ceil(t.At+t.Tt+t.zt+t.Lt+t.Et)},t.prototype.V=function(){this.w_._t().j().On()},t.prototype.n_=function(){return this.Lv.canvas},t.prototype.Zv=function(t){if(0!==t){if(1!==t){var i=ln(this.Lv.canvas);this.Gv(i,this.Lv.pixelRatio),this._u(i,this.Lv.pixelRatio),this.Qv(i,this.Lv.pixelRatio),null!==this.td&&this.td.Zv(t),null!==this.nd&&this.nd.Zv(t)}var n=ln(this.Ev.canvas),h=this.Ev.pixelRatio;n.clearRect(0,0,Math.ceil(this.mv.ht*h),Math.ceil(this.mv.st*h)),this.dd([this.w_._t().Mf()],n,h)}},t.prototype.Gv=function(t,i){var n=this;z(t,i,(function(){R(t,0,0,n.mv.ht,n.mv.st,n.w_._t().zf())}))},t.prototype._u=function(t,i){if(this.w_.vt().timeScale.borderVisible){t.save(),t.fillStyle=this.wd();var n=Math.max(1,Math.floor(this._d().At*i));t.fillRect(0,0,Math.ceil(this.mv.ht*i),n),t.restore()}},t.prototype.Qv=function(t,i){var n=this,h=this.w_._t().j().On();if(h&&0!==h.length){var s=h.reduce(Bn,h[0]).Is;s>30&&s<40&&(s=30),t.save(),t.strokeStyle=this.wd();var r=this._d(),e=r.At+r.Tt+r.Lt+r.zt-r.Pt;t.textAlign="center",t.fillStyle=this.wd();var u=Math.floor(this._d().At*i),a=Math.max(1,Math.floor(i)),o=Math.floor(.5*i);if(this.w_._t().j().vt().borderVisible){t.beginPath();for(var l=Math.round(r.Tt*i),f=h.length;f--;){var c=Math.round(h[f].An*i);t.rect(c-o,u,a,l)}t.fill()}t.fillStyle=this._e(),z(t,i,(function(){t.font=n.Md();for(var i=0,r=h;i<r.length;i++){if((l=r[i]).Is<s){var u=l.jr?n.bd(t,l.An,l.Ln):l.An;t.fillText(l.Ln,u,e)}}t.font=n.md();for(var a=0,o=h;a<o.length;a++){var l;if((l=o[a]).Is>=s){u=l.jr?n.bd(t,l.An,l.Ln):l.An;t.fillText(l.Ln,u,e)}}}))}},t.prototype.bd=function(t,i,n){var h=this.yv.Vt(t,n),s=h/2,r=Math.floor(i-s)+.5;return r<0?i+=Math.abs(0-r):r+h>this.mv.ht&&(i-=Math.abs(this.mv.ht-(r+h))),i},t.prototype.dd=function(t,i,n){for(var h=this._d(),s=0,r=t;s<r.length;s++)for(var e=0,u=r[s].di();e<u.length;e++){var a=u[e];i.save(),a.R().h(i,h,n),i.restore()}},t.prototype.wd=function(){return this.w_.vt().timeScale.borderColor},t.prototype._e=function(){return this.Si.textColor},t.prototype.ce=function(){return this.Si.fontSize},t.prototype.Md=function(){return Wt(this.ce(),this.Si.fontFamily)},t.prototype.md=function(){return Wt(this.ce(),this.Si.fontFamily,"bold")},t.prototype._d=function(){null===this.le&&(this.le={At:1,Pt:NaN,Lt:NaN,Et:NaN,si:NaN,Tt:3,zt:NaN,St:"",hi:new _i});var t=this.le,i=this.Md();if(t.St!==i){var n=this.ce();t.zt=n,t.St=i,t.Lt=Math.ceil(n/2.5),t.Et=t.Lt,t.si=Math.ceil(n/2),t.Pt=Math.round(this.ce()/5),t.hi.Du()}return this.le},t.prototype.h_=function(t){this.Av.style.cursor=1===t?"ew-resize":"default"},t.prototype.ad=function(){var t=this.w_._t(),i=t.vt();i.leftPriceScale.visible||null===this.td||(this.rd.removeChild(this.td.Wv()),this.td.un(),this.td=null),i.rightPriceScale.visible||null===this.nd||(this.ed.removeChild(this.nd.Wv()),this.nd.un(),this.nd=null);var n={Ef:this.w_._t().Ef()},h=function(){return i.leftPriceScale.borderVisible&&t.j().vt().borderVisible},s=function(){return t.zf()};i.leftPriceScale.visible&&null===this.td&&(this.td=new En("left",i,n,h,s),this.rd.appendChild(this.td.Wv())),i.rightPriceScale.visible&&null===this.nd&&(this.nd=new En("right",i,n,h,s),this.ed.appendChild(this.nd.Wv()))},t}(),Fn=function(){function t(t,i){var n;this.pd=[],this.gd=0,this.Fn=0,this.$s=0,this.yd=0,this.kd=0,this.xd=null,this.Nd=!1,this.a_=new tt,this.Zl=new tt,this.Si=i,this.sd=document.createElement("div"),this.sd.classList.add("tv-lightweight-charts"),this.sd.style.overflow="hidden",this.sd.style.width="100%",this.sd.style.height="100%",(n=this.sd).style.userSelect="none",n.style.webkitUserSelect="none",n.style.msUserSelect="none",n.style.MozUserSelect="none",n.style.webkitTapHighlightColor="transparent",this.Sd=document.createElement("table"),this.Sd.setAttribute("cellspacing","0"),this.sd.appendChild(this.Sd),this.Cd=this.Dd.bind(this),this.sd.addEventListener("wheel",this.Cd,{passive:!1}),this.ri=new rn(this.Gl.bind(this),this.Si),this._t().bf().Gi(this.Td.bind(this),this),this.Ad=new On(this),this.Sd.appendChild(this.Ad.Wv());var h=this.Si.width,s=this.Si.height;if(0===h||0===s){var r=t.getBoundingClientRect();0===h&&(h=Math.floor(r.width),h-=h%2),0===s&&(s=Math.floor(r.height),s-=s%2)}this.Ld(h,s),this.Ed(),t.appendChild(this.sd),this.Bd(),this.ri.j().Gr().Gi(this.ri.ef.bind(this.ri),this),this.ri._l().Gi(this.ri.ef.bind(this.ri),this)}return t.prototype._t=function(){return this.ri},t.prototype.vt=function(){return this.Si},t.prototype.Od=function(){return this.pd},t.prototype.un=function(){this.sd.removeEventListener("wheel",this.Cd),0!==this.gd&&window.cancelAnimationFrame(this.gd),this.ri.bf().sn(this),this.ri.j().Gr().sn(this),this.ri._l().sn(this),this.ri.un();for(var t=0,i=this.pd;t<i.length;t++){var n=i[t];this.Sd.removeChild(n.Wv()),n.V_().sn(this),n.un()}this.pd=[],l(this.Ad).un(),null!==this.sd.parentElement&&this.sd.parentElement.removeChild(this.sd),this.Zl.un(),this.a_.un()},t.prototype.Ld=function(t,i,n){if(void 0===n&&(n=!1),this.Fn!==i||this.$s!==t){this.Fn=i,this.$s=t;var h=i+"px",s=t+"px";l(this.sd).style.height=h,l(this.sd).style.width=s,this.Sd.style.height=h,this.Sd.style.width=s,n?this.Fd(new qt(3)):this.ri.ef()}},t.prototype.Zv=function(t){void 0===t&&(t=new qt(3));for(var i=0;i<this.pd.length;i++)this.pd[i].Zv(t.ye(i).pe);this.Ad.Zv(t.ge())},t.prototype.rh=function(t){this.ri.rh(t),this.Bd();var i=t.width||this.$s,n=t.height||this.Fn;this.Ld(i,n)},t.prototype.V_=function(){return this.a_},t.prototype.bf=function(){return this.Zl},t.prototype.Vd=function(){var t=this;null!==this.xd&&(this.Fd(this.xd),this.xd=null);var i=this.pd[0],n=fn(document,new an(this.$s,this.Fn)),h=ln(n),s=on(n);return z(h,s,(function(){var n=0,s=0,r=function(i){for(var r=0;r<t.pd.length;r++){var e=t.pd[r],u=e.R_().st,a=l("left"===i?e.H_():e.Y_()),o=a.n_();h.drawImage(o,n,s,a.$v(),u),s+=u}};t.Pd()&&(r("left"),n=l(i.H_()).$v()),s=0;for(var e=0;e<t.pd.length;e++){var u=t.pd[e],a=u.R_(),o=u.n_();h.drawImage(o,n,s,a.ht,a.st),s+=a.st}n+=i.R_().ht,t.zd()&&(s=0,r("right"));var f=function(i){var r=l("left"===i?t.Ad.od():t.Ad.ld()),e=r.R_(),u=r.n_();h.drawImage(u,n,s,e.ht,e.st)};if(t.Si.timeScale.visible){n=0,t.Pd()&&(f("left"),n=l(i.H_()).$v());var c=t.Ad.R_();o=t.Ad.n_();h.drawImage(o,n,s,c.ht,c.st),t.zd()&&(n+=i.R_().ht,f("right"),h.restore())}})),n},t.prototype.Rd=function(t){return"none"===t?0:("left"!==t||this.Pd())&&("right"!==t||this.zd())?0===this.pd.length?0:l("left"===t?this.pd[0].H_():this.pd[0].Y_()).$v():0},t.prototype.Id=function(){for(var t=0,i=0,n=0,h=0,s=this.pd;h<s.length;h++){var r=s[h];this.Pd()&&(i=Math.max(i,l(r.H_()).Hv())),this.zd()&&(n=Math.max(n,l(r.Y_()).Hv())),t+=r.dl()}var e=this.$s,u=this.Fn,a=Math.max(e-i-n,0),o=this.Si.timeScale.visible?this.Ad.vd():0;o%2&&(o+=1);for(var f=0+o,c=u<f?0:u-f,v=c/t,_=0,d=0;d<this.pd.length;++d){(r=this.pd[d]).k_(this.ri.df()[d]);var w,M=0;M=d===this.pd.length-1?c-_:Math.round(r.dl()*v),_+=w=Math.max(M,2),r.Kv(new an(a,w)),this.Pd()&&r.z_(i,"left"),this.zd()&&r.z_(n,"right"),r.Xv()&&this.ri.mf(r.Xv(),w)}this.Ad.fd(new an(a,o),i,n),this.ri.Tr(a),this.yd!==i&&(this.yd=i),this.kd!==n&&(this.kd=n)},t.prototype.Dd=function(t){var i=t.deltaX/100,n=-t.deltaY/100;if(0!==i&&this.Si.handleScroll.mouseWheel||0!==n&&this.Si.handleScale.mouseWheel){switch(t.cancelable&&t.preventDefault(),t.deltaMode){case t.DOM_DELTA_PAGE:i*=120,n*=120;break;case t.DOM_DELTA_LINE:i*=32,n*=32}if(0!==n&&this.Si.handleScale.mouseWheel){var h=Math.sign(n)*Math.min(1,Math.abs(n)),s=t.clientX-this.sd.getBoundingClientRect().left;this._t().yf(s,h)}0!==i&&this.Si.handleScroll.mouseWheel&&this._t().kf(-80*i)}},t.prototype.Fd=function(t){var i=t.ge();if(3===i&&this.Wd(),3===i||2===i){for(var n=this.ri.df(),h=0;h<n.length;h++)t.ye(h).dh&&n[h].El();for(var s=t.Ce(),r=0,e=s;r<e.length;r++){var u=e[r];this.De(u)}s.length>0&&(this.ri.Vr(),this.ri.Lo(),this.ri.Pr()),this.Ad.V()}this.Zv(t)},t.prototype.De=function(t){var i=this.ri.j();switch(t.xe){case 0:i.te();break;case 1:i.ie(t.X);break;case 2:i.wr(t.X);break;case 3:i.Mr(t.X);break;case 4:i.Ur()}},t.prototype.Gl=function(t){var i=this;null!==this.xd?this.xd.dn(t):this.xd=t,this.Nd||(this.Nd=!0,this.gd=window.requestAnimationFrame((function(){i.Nd=!1,i.gd=0,null!==i.xd&&(i.Fd(i.xd),i.xd=null)})))},t.prototype.Wd=function(){this.Ed()},t.prototype.Ed=function(){for(var t=this.ri.df(),i=t.length,n=this.pd.length,h=i;h<n;h++){var s=o(this.pd.pop());this.Sd.removeChild(s.Wv()),s.V_().sn(this),s.un()}for(h=n;h<i;h++){(s=new Ln(this,t[h])).V_().Gi(this.jd.bind(this),this),this.pd.push(s),this.Sd.insertBefore(s.Wv(),this.Ad.Wv())}for(h=0;h<i;h++){var r=t[h];(s=this.pd[h]).Xv()!==r?s.k_(r):s.y_()}this.Bd(),this.Id()},t.prototype.Ud=function(t,i){var n,h=new Map;null!==t&&this.ri.P().forEach((function(i){var n=i.xa(t);null!==n&&h.set(i,n)}));if(null!==t){var s=this.ri.j().ei(t);null!==s&&(n=s)}var r=this._t().lf(),e=null!==r&&r.cf instanceof Xi?r.cf:void 0,u=null!==r&&void 0!==r.T_?r.T_._a:void 0;return{C:n,qd:i||void 0,Hd:e,Yd:h,Kd:u}},t.prototype.jd=function(t,i){var n=this;this.a_.rn((function(){return n.Ud(t,i)}))},t.prototype.Td=function(t,i){var n=this;this.Zl.rn((function(){return n.Ud(t,i)}))},t.prototype.Bd=function(){var t=this.Si.timeScale.visible?"":"none";this.Ad.Wv().style.display=t},t.prototype.Pd=function(){return this.Si.leftPriceScale.visible},t.prototype.zd=function(){return this.Si.rightPriceScale.visible},t}();function Vn(t,i,n){var h=n.value,s={Rs:i,C:t,X:[h,h,h,h]};return"color"in n&&void 0!==n.color&&(s.et=n.color),s}function Pn(t,i,n){return{Rs:i,C:t,X:[n.open,n.high,n.low,n.close]}}function zn(t){return void 0!==t.X}function Rn(t){return function(i,n,h){return void 0===(s=h).open&&void 0===s.value?{C:i,Rs:n}:t(i,n,h);var s}}var In={Candlestick:Rn(Pn),Bar:Rn(Pn),Area:Rn(Vn),Histogram:Rn(Vn),Line:Rn(Vn)};function Wn(t){return In[t]}function jn(t){return 60*t*60*1e3}function Un(t){return 60*t*1e3}var qn,Hn=[{$d:1,Is:20},{$d:(qn=1,1e3*qn),Is:19},{$d:Un(1),Is:20},{$d:Un(5),Is:21},{$d:Un(30),Is:22},{$d:jn(1),Is:30},{$d:jn(3),Is:31},{$d:jn(6),Is:32},{$d:jn(12),Is:33}];function Yn(t,i){if(null!==i){var n=new Date(1e3*i),h=new Date(1e3*t);if(h.getUTCFullYear()!==n.getUTCFullYear())return 70;if(h.getUTCMonth()!==n.getUTCMonth())return 60;if(h.getUTCDate()!==n.getUTCDate())return 50;for(var s=Hn.length-1;s>=0;--s)if(Math.floor(n.getTime()/Hn[s].$d)!==Math.floor(h.getTime()/Hn[s].$d))return Hn[s].Is}return 20}function Kn(t){if(!zt(t))throw new Error("time must be of type BusinessDay");var i=new Date(Date.UTC(t.year,t.month-1,t.day,0,0,0,0));return{Ts:Math.round(i.getTime()/1e3),Ds:t}}function $n(t){if(!Rt(t))throw new Error("time must be of type isUTCTimestamp");return{Ts:t}}function Xn(t){return 0===t.length?null:zt(t[0].time)?Kn:$n}function Zn(t){return Rt(t)?$n(t):zt(t)?Kn(t):Kn(Jn(t))}function Jn(t){var i=new Date(t);if(isNaN(i.getTime()))throw new Error("Invalid date string=".concat(t,", expected format=yyyy-mm-dd"));return{day:i.getUTCDate(),month:i.getUTCMonth()+1,year:i.getUTCFullYear()}}function Gn(t){d(t.time)&&(t.time=Jn(t.time))}function Qn(t){return{Rs:0,Xd:new Map,Ih:t}}var th=function(){function t(){this.Zd=new Map,this.Jd=new Map,this.Gd=new Map,this.Qd=[]}return t.prototype.un=function(){this.Zd.clear(),this.Jd.clear(),this.Gd.clear(),this.Qd=[]},t.prototype.tw=function(t,i){var n=this;this.Gd.has(t)&&this.Zd.forEach((function(i){return i.Xd.delete(t)}));var h=[];if(0!==i.length){!function(t){t.forEach(Gn)}(i);var s=l(Xn(i)),r=Wn(t.za());h=i.map((function(i){var h=s(i.time),e=n.Zd.get(h.Ts);void 0===e&&(e=Qn(h),n.Zd.set(h.Ts,e));var u=r(h,e.Rs,i);return e.Xd.set(t,u),u}))}return this.iw(),this.nw(t,h),this.hw(t)},t.prototype.Ff=function(t){return this.tw(t,[])},t.prototype.sw=function(t,i){Gn(i);var n=l(Xn([i]))(i.time),h=this.Gd.get(t);if(void 0!==h&&n.Ts<h.Ts)throw new Error("Cannot update oldest data, last time=".concat(h.Ts,", new time=").concat(n.Ts));var s=this.Zd.get(n.Ts),r=void 0===s;void 0===s&&(s=Qn(n),this.Zd.set(n.Ts,s));var e=Wn(t.za())(n,s.Rs,i);s.Xd.set(t,e);var u=this.rw(t,e);if(!r){var a=new Map;return null!==u&&a.set(t,u),{ew:a,j:{Er:this.uw()}}}return this.hw(t)},t.prototype.rw=function(t,i){var n=this.Jd.get(t);void 0===n&&(n=[],this.Jd.set(t,n));var h=0!==n.length?n[n.length-1]:null,s=null;return null===h||i.C.Ts>h.C.Ts?zn(i)&&(n.push(i),s={ef:!1,ju:[i]}):zn(i)?(n[n.length-1]=i,s={ef:!1,ju:[i]}):(n.splice(-1,1),s={ef:!0,ju:n}),this.Gd.set(t,i.C),s},t.prototype.nw=function(t,i){0!==i.length?(this.Jd.set(t,i.filter(zn)),this.Gd.set(t,i[i.length-1].C)):(this.Jd.delete(t),this.Gd.delete(t))},t.prototype.iw=function(){var t=new Map;this.Zd.forEach((function(i,n){i.Xd.size>0&&t.set(n,i)})),this.Zd=t},t.prototype.aw=function(t){for(var i=-1,n=0;n<this.Qd.length&&n<t.length;++n){var h=this.Qd[n],s=t[n];if(h.C.Ts!==s.C.Ts){i=n;break}s.zs=h.zs}if(-1===i&&this.Qd.length!==t.length&&(i=Math.min(this.Qd.length,t.length)),-1===i)return-1;var r=function(i){var n=o(e.Zd.get(t[i].C.Ts));n.Rs=i,n.Xd.forEach((function(t){t.Rs=i}))},e=this;for(n=i;n<t.length;++n)r(n);return function(t,i){void 0===i&&(i=0);for(var n=0===i||0===t.length?null:t[i-1].C.Ts,h=0,s=i;s<t.length;++s){var r=t[s];r.zs=Yn(r.C.Ts,n),h+=r.C.Ts-(n||r.C.Ts),n=r.C.Ts}if(0===i&&t.length>1){var e=Math.ceil(h/(t.length-1)),u=t[0].C.Ts-e;t[0].zs=Yn(t[0].C.Ts,u)}}(t,i),this.Qd=t,i},t.prototype.uw=function(){if(0===this.Jd.size)return null;var t=0;return this.Jd.forEach((function(i){0!==i.length&&(t=Math.max(t,i[i.length-1].Rs))})),t},t.prototype.hw=function(t){var i=Array.from(this.Zd.values()).map((function(t){return{zs:0,C:t.Ih}}));i.sort((function(t,i){return t.C.Ts-i.C.Ts}));var n=this.aw(i),h={ew:new Map,j:{Er:this.uw()}};if(-1!==n)this.Jd.forEach((function(t,i){h.ew.set(i,{ju:t,ef:!0})})),this.Jd.has(t)||h.ew.set(t,{ju:[],ef:!0}),h.j.ow=this.Qd;else{var s=this.Jd.get(t);h.ew.set(t,{ju:s||[],ef:!0})}return h},t}();var ih={color:"#FF0000",price:0,lineStyle:2,lineWidth:1,axisLabelVisible:!0,title:""},nh=function(){function t(t){this.Ba=t}return t.prototype.applyOptions=function(t){this.Ba.rh(t)},t.prototype.options=function(){return this.Ba.vt()},t.prototype.lw=function(){return this.Ba},t}();function hh(t){var i=t.overlay,n=function(t,i){var n={};for(var h in t)Object.prototype.hasOwnProperty.call(t,h)&&i.indexOf(h)<0&&(n[h]=t[h]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(h=Object.getOwnPropertySymbols(t);s<h.length;s++)i.indexOf(h[s])<0&&Object.prototype.propertyIsEnumerable.call(t,h[s])&&(n[h[s]]=t[h[s]])}return n}(t,["overlay"]);return i&&(n.priceScaleId=""),n}var sh=function(){function t(t,i,n){this.We=t,this.fw=i,this.cw=n}return t.prototype.priceFormatter=function(){return this.We.$h()},t.prototype.priceToCoordinate=function(t){var i=this.We.H();return null===i?null:this.We.$().K(t,i.X)},t.prototype.coordinateToPrice=function(t){var i=this.We.H();return null===i?null:this.We.$().Ai(t,i.X)},t.prototype.barsInLogicalRange=function(t){if(null===t)return null;var i=new Ft(new Lt(t.from,t.to)).Hs(),n=this.We.Yi();if(n.ii())return null;var h=n.io(i.rs(),1),s=n.io(i.es(),-1),r=l(n.Ja()),e=l(n.Hi());if(null!==h&&null!==s&&h.Rs>s.Rs)return{barsBefore:t.from-r,barsAfter:e-t.to};var u={barsBefore:null===h||h.Rs===r?t.from-r:h.Rs-r,barsAfter:null===s||s.Rs===e?e-t.to:e-s.Rs};return null!==h&&null!==s&&(u.from=h.C.Ds||h.C.Ts,u.to=s.C.Ds||s.C.Ts),u},t.prototype.setData=function(t){this.We.za(),this.fw._w(this.We,t)},t.prototype.update=function(t){this.We.za(),this.fw.Bo(this.We,t)},t.prototype.setMarkers=function(t){var i=t.map((function(t){return e(e({},t),{time:Zn(t.time)})}));this.We.Vo(i)},t.prototype.applyOptions=function(t){var i=hh(t);this.We.rh(i)},t.prototype.options=function(){return M(this.We.vt())},t.prototype.priceScale=function(){return this.cw.priceScale(this.We.$().sh())},t.prototype.createPriceLine=function(t){var i=c(M(ih),t),n=this.We.Po(i);return new nh(n)},t.prototype.removePriceLine=function(t){this.We.zo(t.lw())},t.prototype.seriesType=function(){return this.We.za()},t}(),rh=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return r(i,t),i.prototype.applyOptions=function(i){kt(i),t.prototype.applyOptions.call(this,i)},i}(sh),eh={autoScale:!0,mode:0,invertScale:!1,alignLabels:!0,borderVisible:!0,borderColor:"#2B2B43",entireTextOnly:!1,visible:!1,drawTicks:!0,scaleMargins:{bottom:.1,top:.2}},uh={color:"rgba(0, 0, 0, 0)",visible:!1,fontSize:48,fontFamily:It,fontStyle:"",text:"",horzAlign:"center",vertAlign:"center"},ah={width:0,height:0,layout:{background:{type:"solid",color:"#FFFFFF"},textColor:"#191919",fontSize:11,fontFamily:It},crosshair:{vertLine:{color:"#758696",width:1,style:3,visible:!0,labelVisible:!0,labelBackgroundColor:"#4c525e"},horzLine:{color:"#758696",width:1,style:3,visible:!0,labelVisible:!0,labelBackgroundColor:"#4c525e"},mode:1},grid:{vertLines:{color:"#D6DCDE",style:0,visible:!0},horzLines:{color:"#D6DCDE",style:0,visible:!0}},overlayPriceScales:e({},eh),leftPriceScale:e(e({},eh),{visible:!1}),rightPriceScale:e(e({},eh),{visible:!0}),timeScale:{rightOffset:0,barSpacing:6,minBarSpacing:.5,fixLeftEdge:!1,fixRightEdge:!1,lockVisibleTimeRangeOnResize:!1,rightBarStaysOnScroll:!1,borderVisible:!0,borderColor:"#2B2B43",visible:!0,timeVisible:!1,secondsVisible:!0,shiftVisibleRangeOnNewBar:!0},watermark:uh,localization:{locale:wn?navigator.language:"",dateFormat:"dd MMM 'yy"},handleScroll:{mouseWheel:!0,pressedMouseMove:!0,horzTouchDrag:!0,vertTouchDrag:!0},handleScale:{axisPressedMouseMove:{time:!0,price:!0},axisDoubleClickReset:!0,mouseWheel:!0,pinch:!0},kineticScroll:{mouse:!1,touch:!0}},oh={upColor:"#26a69a",downColor:"#ef5350",wickVisible:!0,borderVisible:!0,borderColor:"#378658",borderUpColor:"#26a69a",borderDownColor:"#ef5350",wickColor:"#737375",wickUpColor:"#26a69a",wickDownColor:"#ef5350"},lh={upColor:"#26a69a",downColor:"#ef5350",openVisible:!0,thinBars:!0},fh={color:"#2196f3",lineStyle:0,lineWidth:3,lineType:0,crosshairMarkerVisible:!0,crosshairMarkerRadius:4,crosshairMarkerBorderColor:"",crosshairMarkerBackgroundColor:"",lastPriceAnimation:0},ch={topColor:"rgba( 46, 220, 135, 0.4)",bottomColor:"rgba( 40, 221, 100, 0)",lineColor:"#33D778",lineStyle:0,lineWidth:3,lineType:0,crosshairMarkerVisible:!0,crosshairMarkerRadius:4,crosshairMarkerBorderColor:"",crosshairMarkerBackgroundColor:"",lastPriceAnimation:0},vh={color:"#26a69a",base:0},_h={title:"",visible:!0,lastValueVisible:!0,priceLineVisible:!0,priceLineSource:0,priceLineWidth:1,priceLineColor:"",priceLineStyle:2,baseLineVisible:!0,baseLineWidth:1,baseLineColor:"#B2B5BE",baseLineStyle:0,priceFormat:{type:"price",precision:2,minMove:.01}},dh=function(){function t(t,i){this.dw=t,this.ww=i}return t.prototype.applyOptions=function(t){this.dw._t().vf(this.ww,t)},t.prototype.options=function(){return this.Qt().vt()},t.prototype.width=function(){return Ut(this.ww)?this.dw.Rd("left"===this.ww?"left":"right"):0},t.prototype.Qt=function(){return l(this.dw._t()._f(this.ww)).$},t}(),wh=function(){function t(t){this.Mw=new tt,this.nr=new tt,this.ri=t,this.el().Zr().Gi(this.bw.bind(this)),this.el().Jr().Gi(this.mw.bind(this))}return t.prototype.un=function(){this.el().Zr().sn(this),this.el().Jr().sn(this),this.Mw.un()},t.prototype.scrollPosition=function(){return this.el().Ir()},t.prototype.scrollToPosition=function(t,i){i?this.el().Xr(t,1e3):this.ri.Mr(t)},t.prototype.scrollToRealTime=function(){this.el().$r()},t.prototype.getVisibleRange=function(){var t,i,n=this.el().yr();return null===n?null:{from:null!==(t=n.from.Ds)&&void 0!==t?t:n.from.Ts,to:null!==(i=n.to.Ds)&&void 0!==i?i:n.to.Ts}},t.prototype.setVisibleRange=function(t){var i={from:Zn(t.from),to:Zn(t.to)},n=this.el().Cr(i);this.ri.Vf(n)},t.prototype.getVisibleLogicalRange=function(){var t=this.el().gr();return null===t?null:{from:t.rs(),to:t.es()}},t.prototype.setVisibleLogicalRange=function(t){a(t.from<=t.to,"The from index cannot be after the to index."),this.ri.Vf(t)},t.prototype.resetTimeScale=function(){this.ri.Se()},t.prototype.fitContent=function(){this.ri.te()},t.prototype.logicalToCoordinate=function(t){var i=this.ri.j();return i.ii()?null:i.G(t)},t.prototype.coordinateToLogical=function(t){var i=this.ri.j();return i.ii()?null:i.Or(t)},t.prototype.timeToCoordinate=function(t){var i=Zn(t),n=this.ri.j(),h=n.br(i,!1);return null===h?null:n.G(h)},t.prototype.coordinateToTime=function(t){var i,n=this.ri.j(),h=n.Or(t),s=n.ei(h);return null===s?null:null!==(i=s.Ds)&&void 0!==i?i:s.Ts},t.prototype.subscribeVisibleTimeRangeChange=function(t){this.Mw.Gi(t)},t.prototype.unsubscribeVisibleTimeRangeChange=function(t){this.Mw.hn(t)},t.prototype.subscribeVisibleLogicalRangeChange=function(t){this.nr.Gi(t)},t.prototype.unsubscribeVisibleLogicalRangeChange=function(t){this.nr.hn(t)},t.prototype.applyOptions=function(t){this.el().rh(t)},t.prototype.options=function(){return M(this.el().vt())},t.prototype.el=function(){return this.ri.j()},t.prototype.bw=function(){this.Mw.en()&&this.Mw.rn(this.getVisibleRange())},t.prototype.mw=function(){this.nr.en()&&this.nr.rn(this.getVisibleLogicalRange())},t}();function Mh(t){if(void 0!==t&&"custom"!==t.type){var i=t;void 0!==i.minMove&&void 0===i.precision&&(i.precision=function(t){if(t>=1)return 0;for(var i=0;i<8;i++){var n=Math.round(t);if(Math.abs(n-t)<1e-8)return i;t*=10}return i}(i.minMove))}}function bh(t){return function(t){if(w(t.handleScale)){var i=t.handleScale;t.handleScale={axisDoubleClickReset:i,axisPressedMouseMove:{time:i,price:i},mouseWheel:i,pinch:i}}else if(void 0!==t.handleScale&&w(t.handleScale.axisPressedMouseMove)){var n=t.handleScale.axisPressedMouseMove;t.handleScale.axisPressedMouseMove={time:n,price:n}}var h=t.handleScroll;w(h)&&(t.handleScroll={horzTouchDrag:h,vertTouchDrag:h,mouseWheel:h,pressedMouseMove:h})}(t),function(t){if(t.priceScale){t.leftPriceScale=t.leftPriceScale||{},t.rightPriceScale=t.rightPriceScale||{};var i=t.priceScale.position;delete t.priceScale.position,t.leftPriceScale=c(t.leftPriceScale,t.priceScale),t.rightPriceScale=c(t.rightPriceScale,t.priceScale),"left"===i&&(t.leftPriceScale.visible=!0,t.rightPriceScale.visible=!1),"right"===i&&(t.leftPriceScale.visible=!1,t.rightPriceScale.visible=!0),"none"===i&&(t.leftPriceScale.visible=!1,t.rightPriceScale.visible=!1),t.overlayPriceScales=t.overlayPriceScales||{},void 0!==t.priceScale.invertScale&&(t.overlayPriceScales.invertScale=t.priceScale.invertScale),void 0!==t.priceScale.scaleMargins&&(t.overlayPriceScales.scaleMargins=t.priceScale.scaleMargins)}}(t),function(t){t.layout&&t.layout.backgroundColor&&!t.layout.background&&(t.layout.background={type:"solid",color:t.layout.backgroundColor})}(t),t}var mh=function(){function t(t,i){var n=this;this.pw=new th,this.gw=new Map,this.yw=new Map,this.kw=new tt,this.xw=new tt;var h=void 0===i?M(ah):c(M(ah),bh(i));this.dw=new Fn(t,h),this.dw.V_().Gi((function(t){n.kw.en()&&n.kw.rn(n.Nw(t()))}),this),this.dw.bf().Gi((function(t){n.xw.en()&&n.xw.rn(n.Nw(t()))}),this);var s=this.dw._t();this.Sw=new wh(s)}return t.prototype.remove=function(){this.dw.V_().sn(this),this.dw.bf().sn(this),this.Sw.un(),this.dw.un(),this.gw.clear(),this.yw.clear(),this.kw.un(),this.xw.un(),this.pw.un()},t.prototype.resize=function(t,i,n){this.dw.Ld(t,i,n)},t.prototype.addAreaSeries=function(t){void 0===t&&(t={}),Mh((t=hh(t)).priceFormat);var i=c(M(_h),ch,t),n=this.dw._t().Bf("Area",i),h=new sh(n,this,this);return this.gw.set(h,n),this.yw.set(n,h),h},t.prototype.addBarSeries=function(t){void 0===t&&(t={}),Mh((t=hh(t)).priceFormat);var i=c(M(_h),lh,t),n=this.dw._t().Bf("Bar",i),h=new sh(n,this,this);return this.gw.set(h,n),this.yw.set(n,h),h},t.prototype.addCandlestickSeries=function(t){void 0===t&&(t={}),kt(t=hh(t)),Mh(t.priceFormat);var i=c(M(_h),oh,t),n=this.dw._t().Bf("Candlestick",i),h=new rh(n,this,this);return this.gw.set(h,n),this.yw.set(n,h),h},t.prototype.addHistogramSeries=function(t){void 0===t&&(t={}),Mh((t=hh(t)).priceFormat);var i=c(M(_h),vh,t),n=this.dw._t().Bf("Histogram",i),h=new sh(n,this,this);return this.gw.set(h,n),this.yw.set(n,h),h},t.prototype.addLineSeries=function(t){void 0===t&&(t={}),Mh((t=hh(t)).priceFormat);var i=c(M(_h),fh,t),n=this.dw._t().Bf("Line",i),h=new sh(n,this,this);return this.gw.set(h,n),this.yw.set(n,h),h},t.prototype.removeSeries=function(t){var i=o(this.gw.get(t)),n=this.pw.Ff(i);this.dw._t().Ff(i),this.Cw(n),this.gw.delete(t),this.yw.delete(i)},t.prototype._w=function(t,i){this.Cw(this.pw.tw(t,i))},t.prototype.Bo=function(t,i){this.Cw(this.pw.sw(t,i))},t.prototype.subscribeClick=function(t){this.kw.Gi(t)},t.prototype.unsubscribeClick=function(t){this.kw.hn(t)},t.prototype.subscribeCrosshairMove=function(t){this.xw.Gi(t)},t.prototype.unsubscribeCrosshairMove=function(t){this.xw.hn(t)},t.prototype.priceScale=function(t){return void 0===t&&(t=this.dw._t().Pf()),new dh(this.dw,t)},t.prototype.timeScale=function(){return this.Sw},t.prototype.applyOptions=function(t){this.dw.rh(bh(t))},t.prototype.options=function(){return this.dw.vt()},t.prototype.takeScreenshot=function(){return this.dw.Vd()},t.prototype.Cw=function(t){var i=this.dw._t();i.Lf(t.j.Er,t.j.ow),t.ew.forEach((function(t,i){return i.Bo(t.ju,t.ef)})),i.Vr()},t.prototype.Dw=function(t){return o(this.yw.get(t))},t.prototype.Nw=function(t){var i=this,n=new Map;t.Yd.forEach((function(t,h){n.set(i.Dw(h),t)}));var h=void 0===t.Hd?void 0:this.Dw(t.Hd);return{time:t.C&&(t.C.Ds||t.C.Ts),point:t.qd,hoveredSeries:h,hoveredMarkerId:t.Kd,seriesPrices:n}},t}();var ph=Object.freeze({__proto__:null,version:function(){return"3.6.1-dev+202204050724"},get LineStyle(){return i},get LineType(){return t},get CrosshairMode(){return W},get PriceScaleMode(){return _t},get PriceLineSource(){return mt},get LastPriceAnimationMode(){return bt},get LasPriceAnimationMode(){return bt},get TickMarkType(){return Bt},get ColorType(){return Vt},isBusinessDay:zt,isUTCTimestamp:Rt,createChart:function(t,i){var n;if(d(t)){var h=document.getElementById(t);a(null!==h,"Cannot find element in DOM with id=".concat(t)),n=h}else n=t;return new mh(n,i)}});window.LightweightCharts=ph}();
